<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Sacha Chua's Emacs configuration</title>
<!-- 2015-02-01 Sun 18:50 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Sacha Chua" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css"
href="http://sachachua.com/blog/wp-content/themes/sacha-v3/foundation/css/foundation.min.css"></link>
<link rel="stylesheet" type="text/css" href="http://sachachua.com/org-export.css"></link>
<link rel="stylesheet" type="text/css" href="http://sachachua.com/blog/wp-content/themes/sacha-v3/style.css"></link>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<a name="top" id="top"></a>
</div>
<div id="content">
<h1 class="title">Sacha Chua's Emacs configuration</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#unnumbered-1">Configuration</a>
<ul>
<li><a href="#unnumbered-2">About this file</a></li>
<li><a href="#unnumbered-3">Personal information</a></li>
<li><a href="#unnumbered-4">Emacs initialization</a>
<ul>
<li><a href="#unnumbered-5">Add package sources</a></li>
<li><a href="#unnumbered-6">Add my elisp directory and other files</a></li>
<li><a href="#unnumbered-7">Load secrets</a></li>
</ul>
</li>
<li><a href="#unnumbered-8">General configuration</a>
<ul>
<li><a href="#unnumbered-9">Backups</a></li>
<li><a href="#unnumbered-10">History</a></li>
<li><a href="#unnumbered-11">Windows configuration&#xa0;&#xa0;&#xa0;<span class="tag"><span class="drill">drill</span></span></a></li>
<li><a href="#unnumbered-12">Winner mode - undo and redo window configuration</a></li>
<li><a href="#unnumbered-13">Sentences end with a single space</a></li>
<li><a href="#unnumbered-14">Helm - interactive completion</a></li>
<li><a href="#unnumbered-15">Mode line format</a></li>
<li><a href="#unnumbered-16">Change "yes or no" to "y or n"</a></li>
<li><a href="#unnumbered-17">Minibuffer editing - more space!</a></li>
<li><a href="#unnumbered-18">Set up a light-on-dark color scheme</a></li>
<li><a href="#unnumbered-19">Undo tree mode - visualize your undos and branches</a></li>
<li><a href="#unnumbered-20">Help - guide-key</a></li>
<li><a href="#unnumbered-21">UTF-8</a></li>
<li><a href="#unnumbered-22">Killing text</a></li>
<li><a href="#unnumbered-23">Repeatable commands</a>
<ul>
<li><a href="#unnumbered-24"><span class="todo nilTODO">TODO</span> Look for opportunities to use this</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#unnumbered-25">Navigation</a>
<ul>
<li><a href="#unnumbered-26">Pop to mark</a></li>
<li><a href="#unnumbered-27">Helm-swoop - quickly finding lines</a></li>
<li><a href="#unnumbered-28">Windmove - switching between windows</a></li>
<li><a href="#unnumbered-29">Make window splitting more useful</a></li>
<li><a href="#unnumbered-30"><span class="done nilDONE">DONE</span> Searching based on the current word</a></li>
<li><a href="#unnumbered-31">Frequently-accessed files</a></li>
<li><a href="#unnumbered-32">Key chords</a></li>
<li><a href="#unnumbered-33">Smartscan</a></li>
<li><a href="#unnumbered-34">Dired</a></li>
<li><a href="#unnumbered-35">Move to beginning of line</a></li>
<li><a href="#unnumbered-36">Recent files</a></li>
<li><a href="#unnumbered-37">Copy filename to clipboard</a></li>
</ul>
</li>
<li><a href="#unnumbered-38">Reading</a></li>
<li><a href="#unnumbered-39">Writing</a>
<ul>
<li><a href="#unnumbered-40">Avoiding weasel words</a></li>
<li><a href="#unnumbered-41">Unfill paragraph</a></li>
<li><a href="#unnumbered-42">Unicode</a></li>
<li><a href="#unnumbered-43">Clean up spaces</a></li>
<li><a href="#unnumbered-44">Expand</a></li>
<li><a href="#unnumbered-45">Define more abbreviations</a></li>
</ul>
</li>
<li><a href="#unnumbered-46">Org</a>
<ul>
<li><a href="#unnumbered-47">My files</a></li>
<li><a href="#unnumbered-48">Modules</a></li>
<li><a href="#unnumbered-49">Keyboard shortcuts</a>
<ul>
<li><a href="#unnumbered-50">Speed commands</a></li>
</ul>
</li>
<li><a href="#unnumbered-51">Navigation</a>
<ul>
<li><a href="#unnumbered-52">Link Org subtrees and navigate between them</a></li>
<li><a href="#unnumbered-53">Viewing, navigating, and editing the Org tree</a></li>
</ul>
</li>
<li><a href="#unnumbered-54">Taking notes</a>
<ul>
<li><a href="#unnumbered-55">Date trees</a></li>
<li><a href="#unnumbered-56">Templates</a></li>
<li><a href="#unnumbered-58">Refiling</a></li>
<li><a href="#unnumbered-59">Estimating WPM</a></li>
</ul>
</li>
<li><a href="#unnumbered-60">Tasks</a>
<ul>
<li><a href="#unnumbered-61">Managing tasks</a></li>
<li><a href="#unnumbered-68">Estimating tasks</a></li>
<li><a href="#unnumbered-69">Modifying org agenda so that I can display a subset of tasks</a></li>
<li><a href="#unnumbered-70">Flexible scheduling of tasks</a></li>
<li><a href="#unnumbered-71">Task dependencies</a></li>
</ul>
</li>
<li><a href="#unnumbered-72">Templates</a>
<ul>
<li><a href="#unnumbered-73">Structure templates</a></li>
<li><a href="#unnumbered-74">Emacs chats, Emacs hangouts</a></li>
</ul>
</li>
<li><a href="#unnumbered-75">Org agenda</a>
<ul>
<li><a href="#unnumbered-76">Basic configuration</a></li>
<li><a href="#unnumbered-77">Starting my weeks on Saturday</a></li>
<li><a href="#unnumbered-78">Display projects with associated subtasks</a></li>
<li><a href="#unnumbered-79">Org agenda custom commands</a></li>
<li><a href="#unnumbered-80">Make it easy to mark a task as done</a></li>
<li><a href="#unnumbered-81">Make it easy to mark a task as done and create a follow-up task</a></li>
<li><a href="#unnumbered-82">Capture something based on the agenda</a></li>
<li><a href="#unnumbered-83">Sorting by date and priority</a></li>
<li><a href="#unnumbered-84">Preventing things from falling through the cracks</a></li>
</ul>
</li>
<li><a href="#unnumbered-85">Reviews</a>
<ul>
<li><a href="#unnumbered-86">Weekly review</a></li>
<li><a href="#unnumbered-91">Monthly reviews</a></li>
<li><a href="#unnumbered-92">Fix timestamps in Flickr links</a></li>
</ul>
</li>
<li><a href="#unnumbered-93">Filing</a>
<ul>
<li><a href="#unnumbered-94">Moving lines around</a></li>
<li><a href="#unnumbered-95">Organizing my blog index</a></li>
</ul>
</li>
<li><a href="#unnumbered-96">Publishing</a>
<ul>
<li><a href="#unnumbered-97">Org2blog</a></li>
<li><a href="#unnumbered-98">Publish without prompting</a></li>
<li><a href="#unnumbered-99">Stylesheet / header</a></li>
<li><a href="#unnumbered-100">Footer</a></li>
<li><a href="#unnumbered-101">Copy region</a></li>
<li><a href="#unnumbered-102">UTF-8 checkboxes</a></li>
<li><a href="#unnumbered-103">Share my Emacs configuration</a></li>
</ul>
</li>
<li><a href="#unnumbered-104">Links</a>
<ul>
<li><a href="#unnumbered-105">Quick links</a></li>
<li><a href="#unnumbered-106">Custom links</a></li>
</ul>
</li>
<li><a href="#unnumbered-107">Attachments</a></li>
<li><a href="#unnumbered-108">Diagrams and graphics</a></li>
<li><a href="#unnumbered-109">Counting</a></li>
<li><a href="#unnumbered-110">Literate programming</a>
<ul>
<li><a href="#unnumbered-111">Editing source code</a></li>
<li><a href="#unnumbered-112">Copying and sharing code</a></li>
</ul>
</li>
<li><a href="#unnumbered-113">Archiving</a></li>
<li><a href="#unnumbered-114">Filesystem</a>
<ul>
<li><a href="#unnumbered-115"><span class="todo nilTODO">TODO</span> check out org-fstree</a></li>
</ul>
</li>
<li><a href="#unnumbered-116">Presentations</a></li>
</ul>
</li>
<li><a href="#unnumbered-117">Coding</a>
<ul>
<li><a href="#unnumbered-118">Web development</a></li>
<li><a href="#unnumbered-119">Tab width of 2 is compact and readable</a></li>
<li><a href="#unnumbered-120">New lines are always indented</a></li>
<li><a href="#unnumbered-121">Adapt to being on Windows</a></li>
<li><a href="#unnumbered-122">Expand region</a></li>
<li><a href="#unnumbered-123">Emacs Lisp</a>
<ul>
<li><a href="#unnumbered-124">Eldoc</a></li>
<li><a href="#unnumbered-125">Refactoring&#xa0;&#xa0;&#xa0;<span class="tag"><span class="drill">drill</span></span></a></li>
<li><a href="#unnumbered-126">Jumping to code</a></li>
<li><a href="#unnumbered-127">Sorting</a></li>
<li><a href="#unnumbered-128">Evaluation</a></li>
</ul>
</li>
<li><a href="#unnumbered-129">Snippets</a></li>
<li><a href="#unnumbered-130">Show column number</a></li>
<li><a href="#unnumbered-131">Don't show whitespace in diff, but show context</a></li>
<li><a href="#unnumbered-132">Javascript</a>
<ul>
<li><a href="#unnumbered-133">Tern - for Javascript</a></li>
</ul>
</li>
<li><a href="#unnumbered-134">Magit - nice git interface</a>
<ul>
<li><a href="#unnumbered-135"><span class="todo nilTODO">TODO</span> Make this better by adding a post command options variable</a></li>
</ul>
</li>
<li><a href="#unnumbered-136">git-messenger - shows commit message</a></li>
<li><a href="#unnumbered-137">Tag files</a></li>
<li><a href="#unnumbered-138">Projects</a></li>
<li><a href="#unnumbered-139">Exploring MELPA recipes</a></li>
<li><a href="#unnumbered-140">Ruby</a></li>
<li><a href="#unnumbered-141">Skewer</a></li>
<li><a href="#unnumbered-142">Autocomplete</a></li>
</ul>
</li>
<li><a href="#unnumbered-143">Ledger (personal finance): Make it easier to review my credit card transactions</a></li>
<li><a href="#unnumbered-144">Internet Relay Chat</a></li>
<li><a href="#unnumbered-145">Self-tracking, statistics, and other data transformations</a>
<ul>
<li><a href="#unnumbered-146">Quantified Awesome</a></li>
<li><a href="#unnumbered-147">Compare times and effort estimates</a></li>
<li><a href="#unnumbered-148">R</a></li>
<li><a href="#unnumbered-149">Workrave</a></li>
<li><a href="#unnumbered-150">Blog</a></li>
<li><a href="#unnumbered-151">Artrage</a></li>
</ul>
</li>
<li><a href="#unnumbered-152">Workarounds</a>
<ul>
<li><a href="#unnumbered-153">color-theme sometimes comes across lists. Odd!</a></li>
<li><a href="#unnumbered-154">ido-sort-mtime stopped working when I upgraded to Windows 8</a></li>
<li><a href="#unnumbered-155">Cygwin mogrify doesn't work for me, but ImageMagick does</a></li>
</ul>
</li>
<li><a href="#unnumbered-156">Display</a></li>
<li><a href="#unnumbered-157">Advanced stuff / things I tend to forget about</a>
<ul>
<li><a href="#unnumbered-158">Editing multiple things</a>
<ul>
<li><a href="#unnumbered-159">Multiple cursors mode&#xa0;&#xa0;&#xa0;<span class="tag"><span class="drill">drill</span></span></a></li>
</ul>
</li>
<li><a href="#unnumbered-160">Edit list&#xa0;&#xa0;&#xa0;<span class="tag"><span class="drill">drill</span></span></a></li>
<li><a href="#unnumbered-161">Ace Jump mode&#xa0;&#xa0;&#xa0;<span class="tag"><span class="drill">drill</span></span></a></li>
<li><a href="#unnumbered-162">Deleting things</a>
<ul>
<li><a href="#unnumbered-163"><span class="todo nilTODO">TODO</span> Get zap-to-isearch to work with helm-swoop</a></li>
</ul>
</li>
<li><a href="#unnumbered-164">Network: TRAMP and editing files over SSH</a></li>
</ul>
</li>
<li><a href="#unnumbered-165">Other nifty Emacs things I want to learn</a>
<ul>
<li><a href="#unnumbered-166">Smartparens mode&#xa0;&#xa0;&#xa0;<span class="tag"><span class="drill">drill</span></span></a></li>
</ul>
</li>
<li><a href="#unnumbered-167">Web browsing</a></li>
<li><a href="#unnumbered-168">Transcript editing</a></li>
<li><a href="#unnumbered-169">Japanese</a></li>
</ul>
</li>
<li><a href="#unnumbered-170">Other cool configs you may want to check out</a></li>
<li><a href="#unnumbered-171">Inactive/infrequent things</a>
<ul>
<li><a href="#unnumbered-172">Org - mapping blog posts and image URLs from bulk exports</a></li>
<li><a href="#unnumbered-173">Beeminder</a></li>
<li><a href="#unnumbered-174">Strike through DONE headlines</a></li>
<li><a href="#unnumbered-175">Rainbow delimiters</a></li>
<li><a href="#unnumbered-176">Drupal</a></li>
<li><a href="#unnumbered-177">Autoconnect to IRC so that I don't forget</a></li>
<li><a href="#unnumbered-178">Org - send things to the bottom of the list</a></li>
<li><a href="#unnumbered-179">Previous weekly review</a></li>
<li><a href="#unnumbered-180">Animation for Emacs chats</a></li>
<li><a href="#unnumbered-181">Idle timer</a></li>
<li><a href="#unnumbered-182">Old Flickr/Evernote export</a></li>
<li><a href="#unnumbered-183">Presentation code for Emacs Conference</a></li>
<li><a href="#unnumbered-184">Enable minibuffer completion</a></li>
<li><a href="#unnumbered-185">Because I'm trying to use helm instead of ido&#x2026;</a>
<ul>
<li><a href="#unnumbered-186">Ido-mode: Much better navigationy things</a></li>
<li><a href="#unnumbered-187">Ido and Org</a></li>
<li><a href="#unnumbered-188">Finding files</a></li>
</ul>
</li>
<li><a href="#unnumbered-189">Keywiz - keyboard quizzes</a></li>
<li><a href="#unnumbered-190">MobileOrg for Android</a></li>
<li><a href="#unnumbered-191">Encryption</a></li>
<li><a href="#unnumbered-192">Drawing</a>
<ul>
<li><a href="#unnumbered-193"><span class="done nilDONE">DONE</span> Digital index piles with Emacs</a></li>
<li><a href="#unnumbered-194"><span class="done nilDONE">DONE</span> Using Emacs to prepare files for external applications like Autodesk Sketchbook Pro</a>
<ul>
<li><a href="#unnumbered-195">Index cards</a></li>
<li><a href="#unnumbered-196">Rename scanned index cards</a></li>
<li><a href="#unnumbered-197">Automatically resize images</a></li>
<li><a href="#unnumbered-198">Get information for sketched books</a></li>
</ul>
</li>
<li><a href="#unnumbered-199">Other sketches</a></li>
<li><a href="#unnumbered-200">Sketched books</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#unnumbered-201">Games</a>
<ul>
<li><a href="#unnumbered-202">Typing of Emacs</a></li>
<li><a href="#unnumbered-203">2048 in Emacs, and colours too&#xa0;&#xa0;&#xa0;<span class="tag"><span class="emacs">emacs</span></span></a></li>
</ul>
</li>
<li><a href="#unnumbered-204">Path</a></li>
</ul>
</div>
</div>


<div id="outline-container-unnumbered-1" class="outline-2">
<h2 id="unnumbered-1">Configuration</h2>
<div class="outline-text-2" id="text-unnumbered-1">
</div><div id="outline-container-unnumbered-2" class="outline-3">
<h3 id="unnumbered-2">About this file</h3>
<div class="outline-text-3" id="text-unnumbered-2">
<p>
<a id="babel-init"></a>
</p>

<p>
Inspired by the <a href="http://eschulte.me/emacs24-starter-kit/#installation">Emacs Starter Kit</a>, I set up my configuration file
using Org-babel. Because my username is Sacha, I can save this as
Sacha.org in my <code>~/.emacs.d</code> directory to have it automatically load.
You could load it with <code>(org-babel-load-file "/path/to/file")</code>,
changing the path appropriately, but you'll probably want to tweak it
extensively first.
</p>

<p>
This page: <a href="http://sachac.github.io/.emacs.d/Sacha.html">HTML</a> - <a href="https://github.com/sachac/.emacs.d/blob/gh-pages/Sacha.org">Org</a> - <a href="https://dl.dropbox.com/u/3968124/sacha-emacs.el">.el</a> - <a href="http://github.com/sachac/.emacs.d/">Github</a> - also, <a href="http://sach.ac/dotemacs">http://sach.ac/dotemacs</a>
</p>

<p>
To be precise, this is what's in the first part of my <code>~/.emacs.d/init.el</code> (what used to be the <code>~/.emacs</code> file):
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">This sets up the load path so that we can override it</span>
<span class="org-rainbow-delimiters-depth-1">(</span>package-initialize nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Override the packages with the git version of Org and other packages</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'load-path <span class="org-string">"~/elisp/org-mode/lisp"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'load-path <span class="org-string">"~/elisp/org-mode/contrib/lisp"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'load-path <span class="org-string">"~/code/org2blog"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'load-path <span class="org-string">"~/Dropbox/2014/presentations/org-reveal"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'load-path <span class="org-string">"/usr/local/share/emacs/site-lisp"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Load the rest of the packages</span>
<span class="org-rainbow-delimiters-depth-1">(</span>package-initialize t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq package-enable-at-startup nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>org-babel-load-file <span class="org-string">"~/.emacs.d/Sacha.org"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
If you're new to Emacs Lisp, you probably don't want to copy and paste
large chunks of this code. Instead, copy small parts of it (always
making sure to copy a complete set of parentheses) into your
<code>*scratch*</code> buffer or some other buffer in <code>emacs-lisp-mode</code>. Use <code>M-x
eval-buffer</code> to evaluate the code and see if you like the way that
Emacs behaves. See <a href="https://www.gnu.org/software/emacs/manual/html_mono/eintr.html">An Introduction to Programming in Emacs Lisp</a> for more details on Emacs Lisp. You can also find the manual by using <code>C-h i</code> (<code>info</code>) and choosing "Emacs Lisp Intro".
</p>

<p>
I've installed a lot of packages. See the <i>package sources</i> section to
add the repositories to your configuration. When you see <code>use-package</code>
and a package name you might like, you can use <code>M-x package-install</code>
to install the package of that name. Note that use-package is itself
provided by a package, so you'll probably want to install that and
<code>bind-key</code>.
</p>

<p>
If you're viewing the Org file, you can open source code blocks (those are the ones in begin_src) in a separate buffer by moving your point inside them and typing C-c ' (<code>org-edit-special</code>). This opens another buffer in <code>emacs-lisp-mode</code>, so you can use <code>M-x eval-buffer</code> to load the changes. If you want to explore how functions work, use <code>M-x edebug-defun</code> to set up debugging for that function, and then call it. You can learn more about edebug in the <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Edebug.html">Emacs Lisp</a> manual.
</p>

<p>
I like using <code>(setq ...)</code> more than Customize because I can neatly organize my configuration that way.
</p>
</div>
</div>

<div id="outline-container-unnumbered-3" class="outline-3">
<h3 id="unnumbered-3">Personal information</h3>
<div class="outline-text-3" id="text-unnumbered-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq user-full-name <span class="org-string">"Sacha Chua"</span>
      user-mail-address <span class="org-string">"sacha@sachachua.com"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-4" class="outline-3">
<h3 id="unnumbered-4">Emacs initialization</h3>
<div class="outline-text-3" id="text-unnumbered-4">
</div><div id="outline-container-unnumbered-5" class="outline-4">
<h4 id="unnumbered-5">Add package sources</h4>
<div class="outline-text-4" id="text-unnumbered-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'package-archives '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"org"</span> . <span class="org-string">"http://orgmode.org/elpa/"</span><span class="org-rainbow-delimiters-depth-2">)</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-2">(</span>assoc-default <span class="org-string">"melpa"</span> package-archives<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'package-archives '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"melpa"</span> . <span class="org-string">"http://melpa.org/packages/"</span><span class="org-rainbow-delimiters-depth-3">)</span> t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>package-refresh-contents<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Use <code>M-x package-refresh-contents</code> to reload the list of packages
after adding these for the first time.
</p>
</div>
</div>

<div id="outline-container-unnumbered-6" class="outline-4">
<h4 id="unnumbered-6">Add my elisp directory and other files</h4>
<div class="outline-text-4" id="text-unnumbered-6">
<p>
Sometimes I load files outside the package system. As long as they're
in a directory in my <code>load-path</code>, Emacs can find them.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'load-path <span class="org-string">"~/elisp"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'load-path <span class="org-string">"~/elisp/artbollocks-mode"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-2">(</span>package-installed-p 'use-package<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>package-install 'use-package<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">use-package</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">auto-compile</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span>auto-compile-on-load-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq load-prefer-newer t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-7" class="outline-4">
<h4 id="unnumbered-7">Load secrets</h4>
<div class="outline-text-4" id="text-unnumbered-7">
<p>
I keep slightly more sensitive information in a separate file so that I can easily publish my main configuration.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>load <span class="org-string">"~/.emacs.secrets"</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-unnumbered-8" class="outline-3">
<h3 id="unnumbered-8">General configuration</h3>
<div class="outline-text-3" id="text-unnumbered-8">
</div><div id="outline-container-unnumbered-9" class="outline-4">
<h4 id="unnumbered-9">Backups</h4>
<div class="outline-text-4" id="text-unnumbered-9">
<p>
This is one of the things people usually want to change right away. By default, Emacs saves backup files in the current directory. These are the files ending in <code>~</code> that are cluttering up your directory lists. The following code stashes them all in <code>~/.emacs.d/backups</code>, where I can find them with <code>C-x C-f</code> (<code>find-file</code>) if I really need to.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq backup-directory-alist '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"."</span> . <span class="org-string">"~/.emacs.d/backups"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Disk space is cheap. Save lots.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq delete-old-versions -1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq version-control t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq vc-make-backup-files t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq auto-save-file-name-transforms '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">".*"</span> <span class="org-string">"~/.emacs.d/auto-save-list/"</span> t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-10" class="outline-4">
<h4 id="unnumbered-10">History</h4>
<div class="outline-text-4" id="text-unnumbered-10">
<p>
From <a href="http://www.wisdomandwonder.com/wordpress/wp-content/uploads/2014/03/C3F.html">http://www.wisdomandwonder.com/wordpress/wp-content/uploads/2014/03/C3F.html</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq savehist-file <span class="org-string">"~/.emacs.d/savehist"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>savehist-mode 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq history-length t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq history-delete-duplicates t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq savehist-save-minibuffer-history 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq savehist-additional-variables
      '<span class="org-rainbow-delimiters-depth-2">(</span>kill-ring
        search-ring
        regexp-search-ring<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-11" class="outline-4">
<h4 id="unnumbered-11"><a id="ID-440c0b9a-9068-450b-89a3-a20c8ec1f447"></a>Windows configuration&#xa0;&#xa0;&#xa0;<span class="tag"><span class="drill">drill</span></span></h4>
<div class="outline-text-4" id="text-unnumbered-11">
<p>
When you're starting out, tooltips, menus, and the tool bar can be very helpful. <a href="http://sachachua.com/blog/2014/03/emacs-basics-using-mouse/">(Emacs Basics: Using the Mouse</a>). Eventually, you may want to reclaim that extra little bit of screenspace. The following code turns those things off when using a graphical Emacs. (Although I changed my mind about the menu - I want that again.)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> window-system
  <span class="org-rainbow-delimiters-depth-2">(</span>tooltip-mode -1<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>tool-bar-mode -1<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>menu-bar-mode 1<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>scroll-bar-mode -1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-12" class="outline-4">
<h4 id="unnumbered-12">Winner mode - undo and redo window configuration</h4>
<div class="outline-text-4" id="text-unnumbered-12">
<p>
<code>winner-mode</code> lets you use <code>C-c &lt;left&gt;</code> and <code>C-c &lt;right&gt;</code> to switch between window configurations. This is handy when something has popped up a buffer that you want to look at briefly before returning to whatever you were working on. When you're done, press <code>C-c &lt;left&gt;</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">winner</span>
  <span class="org-builtin">:ensure</span> winner
  <span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span>winner-mode 1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-13" class="outline-4">
<h4 id="unnumbered-13">Sentences end with a single space</h4>
<div class="outline-text-4" id="text-unnumbered-13">
<p>
In my world, sentences end with a single space. This makes
sentence navigation commands work for me.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq sentence-end-double-space nil<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-14" class="outline-4">
<h4 id="unnumbered-14">Helm - interactive completion</h4>
<div class="outline-text-4" id="text-unnumbered-14">
<p>
Helm makes it easy to complete various things. I find it to be easier
to configure than ido in order to get completion in as many places as
possible, although I prefer ido's way of switching buffers.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">helm</span>
  <span class="org-builtin">:ensure</span> helm
  <span class="org-builtin">:diminish</span> helm-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">require</span> '<span class="org-constant">helm-config</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq helm-candidate-number-limit 100<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">From https://gist.github.com/antifuchs/9238468</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq helm-idle-delay 0.0 <span class="org-comment-delimiter">; </span><span class="org-comment">update fast sources immediately (doesn't).</span>
          helm-input-idle-delay 0.01  <span class="org-comment-delimiter">; </span><span class="org-comment">this actually updates things</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">reeeelatively quickly.</span>
          helm-quick-update t
          helm-M-x-requires-pattern nil
          helm-ff-skip-boring-files t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>helm-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c h"</span> . helm-mini<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-h a"</span> . helm-apropos<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x C-b"</span> . helm-buffers-list<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x b"</span> . helm-buffers-list<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-y"</span> . helm-show-kill-ring<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-x"</span> . helm-M-x<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x c o"</span> . helm-occur<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x c s"</span> . helm-swoop<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x c b"</span> . sacha/helm-do-grep-book-notes<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x c SPC"</span> . helm-all-mark-rings<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>ido-mode -1<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;; </span><span class="org-comment">Turn off ido mode in case I enabled it accidentally</span>
</pre>
</div>

<p>
Great for describing bindings. I'll replace the binding for <code>where-is</code> too.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">helm-descbinds</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-h b"</span> . helm-descbinds<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-h w"</span> . helm-descbinds<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
helm-grep? Bit slow and hard to read, though.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/book-notes-directory</span> <span class="org-string">"~/Dropbox/books"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/helm-do-grep-book-notes</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Search my book notes."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>helm-do-grep-1 <span class="org-rainbow-delimiters-depth-3">(</span>list sacha/book-notes-directory<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-15" class="outline-4">
<h4 id="unnumbered-15">Mode line format</h4>
<div class="outline-text-4" id="text-unnumbered-15">
<p>
Display a more compact mode line
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">smart-mode-line</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>setq-default
   mode-line-format
   '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"%e"</span>
     mode-line-front-space
     mode-line-mule-info
     mode-line-client
     mode-line-modified
     mode-line-remote
     mode-line-frame-identification
     mode-line-buffer-identification
     <span class="org-string">"   "</span>
     mode-line-position
     <span class="org-rainbow-delimiters-depth-5">(</span>vc-mode vc-mode<span class="org-rainbow-delimiters-depth-5">)</span>
     <span class="org-string">"  "</span>
     mode-line-modes
     mode-line-misc-info
     mode-line-end-spaces<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-16" class="outline-4">
<h4 id="unnumbered-16">Change "yes or no" to "y or n"</h4>
<div class="outline-text-4" id="text-unnumbered-16">
<p>
Lazy people like me never want to type "yes" when "y" will suffice.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>fset 'yes-or-no-p 'y-or-n-p<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-17" class="outline-4">
<h4 id="unnumbered-17">Minibuffer editing - more space!</h4>
<div class="outline-text-4" id="text-unnumbered-17">
<p>
Sometimes you want to be able to do fancy things with the text
that you're entering into the minibuffer. Sometimes you just want
to be able to read it, especially when it comes to lots of text.
This binds <code>C-M-e</code> in a minibuffer) so that you can edit the
contents of the minibuffer before submitting it.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">miniedit</span>
  <span class="org-builtin">:ensure</span> miniedit
  <span class="org-builtin">:commands</span> minibuffer-edit
  <span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span>miniedit-install<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-18" class="outline-4">
<h4 id="unnumbered-18">Set up a light-on-dark color scheme</h4>
<div class="outline-text-4" id="text-unnumbered-18">
<p>
I like light on dark because I find it to be more restful. The
color-theme in ELPA was a little odd, though, so we define some advice to make
it work. Some things still aren't quite right.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">color-theme-alist</span> <span class="org-rainbow-delimiters-depth-2">(</span>around sacha activate<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>ad-get-arg 0<span class="org-rainbow-delimiters-depth-3">)</span>
      ad-do-it
    nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">color-theme</span> <span class="org-builtin">:ensure</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">color-theme-solarized</span> <span class="org-builtin">:ensure</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/setup-color-theme</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>color-theme-solarized-dark<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>set-face-foreground 'secondary-selection <span class="org-string">"darkblue"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>set-face-background 'secondary-selection <span class="org-string">"lightblue"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>set-face-background 'font-lock-doc-face <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>set-face-foreground 'font-lock-doc-face <span class="org-string">"wheat"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>set-face-background 'font-lock-string-face <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>set-face-foreground 'org-todo <span class="org-string">"green"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>set-face-background 'org-todo <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">color-theme</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> window-system
    <span class="org-rainbow-delimiters-depth-3">(</span>sacha/setup-color-theme<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I sometimes need to switch to a lighter background for screenshots.
For that, I use <code>color-theme-vim</code>.
</p>

<p>
Some more tweaks to solarized:
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> window-system
  <span class="org-rainbow-delimiters-depth-2">(</span>custom-set-faces
   '<span class="org-rainbow-delimiters-depth-3">(</span>erc-input-face <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>t <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"antique white"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>helm-selection <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>t <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:background</span> <span class="org-string">"ForestGreen"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>org-agenda-clocking <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>t <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:inherit</span> secondary-selection <span class="org-builtin">:foreground</span> <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>org-agenda-done <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>t <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"dim gray"</span> <span class="org-builtin">:strike-through</span> nil<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>org-done <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>t <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"PaleGreen"</span> <span class="org-builtin">:weight</span> normal <span class="org-builtin">:strike-through</span> t<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>org-clock-overlay <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>t <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:background</span> <span class="org-string">"SkyBlue4"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>org-headline-done <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>class color<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>min-colors 16<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>background dark<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"LightSalmon"</span> <span class="org-builtin">:strike-through</span> t<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>outline-1 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>t <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:inherit</span> font-lock-function-name-face <span class="org-builtin">:foreground</span> <span class="org-string">"cornflower blue"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-19" class="outline-4">
<h4 id="unnumbered-19">Undo tree mode - visualize your undos and branches</h4>
<div class="outline-text-4" id="text-unnumbered-19">
<p>
People often struggle with the Emacs undo model, where there's really no concept of "redo" - you simply undo the undo.
</p>
<p>
This lets you use <code>C-x u</code> (<code>undo-tree-visualize</code>) to visually walk through the changes you've made, undo back to a certain point (or redo), and go down different branches.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">undo-tree</span>
  <span class="org-builtin">:ensure</span> undo-tree
  <span class="org-builtin">:diminish</span> undo-tree-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>global-undo-tree-mode<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq undo-tree-visualizer-timestamps t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq undo-tree-visualizer-diff t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-20" class="outline-4">
<h4 id="unnumbered-20">Help - guide-key</h4>
<div class="outline-text-4" id="text-unnumbered-20">
<p>
It's hard to remember keyboard shortcuts. The <code>guide-key</code> package pops up help after a short delay.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">guide-key</span>
  <span class="org-builtin">:diminish</span> guide-key-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>setq guide-key/guide-key-sequence '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"C-x r"</span> <span class="org-string">"C-x 4"</span> <span class="org-string">"C-c"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>guide-key-mode 1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>  <span class="org-comment-delimiter">; </span><span class="org-comment">Enable guide-key-mode</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-21" class="outline-4">
<h4 id="unnumbered-21">UTF-8</h4>
<div class="outline-text-4" id="text-unnumbered-21">
<p>
From <a href="http://www.wisdomandwonder.com/wordpress/wp-content/uploads/2014/03/C3F.html">http://www.wisdomandwonder.com/wordpress/wp-content/uploads/2014/03/C3F.html</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>prefer-coding-system 'utf-8<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span>display-graphic-p<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq x-select-request-type '<span class="org-rainbow-delimiters-depth-3">(</span>UTF8_STRING COMPOUND_TEXT TEXT STRING<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-22" class="outline-4">
<h4 id="unnumbered-22">Killing text</h4>
<div class="outline-text-4" id="text-unnumbered-22">
<p>
From <a href="https://github.com/itsjeyd/emacs-config/blob/emacs24/init.el">https://github.com/itsjeyd/emacs-config/blob/emacs24/init.el</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">kill-region</span> <span class="org-rainbow-delimiters-depth-2">(</span>before slick-cut activate compile<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"When called interactively with no active region, kill a single line instead."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> mark-active <span class="org-rainbow-delimiters-depth-4">(</span>list <span class="org-rainbow-delimiters-depth-5">(</span>region-beginning<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>region-end<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>list <span class="org-rainbow-delimiters-depth-5">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>line-beginning-position 2<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-23" class="outline-4">
<h4 id="unnumbered-23">Repeatable commands</h4>
<div class="outline-text-4" id="text-unnumbered-23">
<p>
Based on <a href="http://oremacs.com/2015/01/14/repeatable-commands/">http://oremacs.com/2015/01/14/repeatable-commands/</a> . Modified to
accept <code>nil</code> as the first value if you don't want the keymap to run a
command by default, and to use <code>kbd</code> for the keybinding definitions.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/def-rep-command</span> <span class="org-rainbow-delimiters-depth-2">(</span>alist<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-doc">"Return a lambda that calls the first function of ALIST.</span>
<span class="org-doc">It sets the transient map to all functions of ALIST,</span>
<span class="org-doc">allowing you to repeat those functions as needed."</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>lexical-let <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>keymap <span class="org-rainbow-delimiters-depth-5">(</span>make-sparse-keymap<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                  <span class="org-rainbow-delimiters-depth-4">(</span>func <span class="org-rainbow-delimiters-depth-5">(</span>cdar alist<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>mapc <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span>x<span class="org-rainbow-delimiters-depth-5">)</span>
              <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">when</span> x
                <span class="org-rainbow-delimiters-depth-6">(</span>define-key keymap <span class="org-rainbow-delimiters-depth-7">(</span>kbd <span class="org-rainbow-delimiters-depth-8">(</span>car x<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>cdr x<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
            alist<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>arg<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>interactive <span class="org-string">"p"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> func
          <span class="org-rainbow-delimiters-depth-5">(</span>funcall func arg<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>set-transient-map keymap t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
<div id="outline-container-unnumbered-24" class="outline-5">
<h5 id="unnumbered-24"><span class="todo TODO">TODO</span> Look for opportunities to use this</h5>
</div>
</div>
</div>

<div id="outline-container-unnumbered-25" class="outline-3">
<h3 id="unnumbered-25">Navigation</h3>
<div class="outline-text-3" id="text-unnumbered-25">
</div><div id="outline-container-unnumbered-26" class="outline-4">
<h4 id="unnumbered-26">Pop to mark</h4>
<div class="outline-text-4" id="text-unnumbered-26">
<p>
Handy way of getting back to previous places.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-x p"</span> 'pop-to-mark-command<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq set-mark-command-repeat-pop t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-27" class="outline-4">
<h4 id="unnumbered-27">Helm-swoop - quickly finding lines</h4>
<div class="outline-text-4" id="text-unnumbered-27">
<p>
This promises to be a fast way to find things. Let's bind it to <code>Ctrl-Shift-S</code> to see if I can get used to that&#x2026;
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">helm-swoop</span>
 <span class="org-builtin">:bind</span>
 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-S-s"</span> . helm-swoop<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-i"</span> . helm-swoop<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-s s"</span> . helm-swoop<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-s M-s"</span> . helm-swoop<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-I"</span> . helm-swoop-back-to-last-point<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c M-i"</span> . helm-multi-swoop<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x M-i"</span> . helm-multi-swoop-all<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">)</span>
 <span class="org-builtin">:config</span>
 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>define-key isearch-mode-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"M-i"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'helm-swoop-from-isearch<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>define-key helm-swoop-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"M-i"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'helm-multi-swoop-all-from-helm-swoop<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-28" class="outline-4">
<h4 id="unnumbered-28">Windmove - switching between windows</h4>
<div class="outline-text-4" id="text-unnumbered-28">
<p>
Windmove lets you move between windows with something more natural than cycling through <code>C-x o</code> (<code>other-window</code>).
Windmove doesn't behave well with Org, so we need to use different keybindings.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">windmove</span>
  <span class="org-builtin">:bind</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;f2&gt; &lt;right&gt;"</span> . windmove-right<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;f2&gt; &lt;left&gt;"</span> . windmove-left<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;f2&gt; &lt;up&gt;"</span> . windmove-up<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;f2&gt; &lt;down&gt;"</span> . windmove-down<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-29" class="outline-4">
<h4 id="unnumbered-29">Make window splitting more useful</h4>
<div class="outline-text-4" id="text-unnumbered-29">
<p>
Copied from <a href="http://www.reddit.com/r/emacs/comments/25v0eo/you_emacs_tips_and_tricks/chldury">http://www.reddit.com/r/emacs/comments/25v0eo/you_emacs_tips_and_tricks/chldury</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/vsplit-last-buffer</span> <span class="org-rainbow-delimiters-depth-2">(</span>prefix<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Split the window vertically and display the previous buffer."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"p"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>split-window-vertically<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>other-window 1 nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>= prefix 1<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>switch-to-next-buffer<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/hsplit-last-buffer</span> <span class="org-rainbow-delimiters-depth-2">(</span>prefix<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Split the window horizontally and display the previous buffer."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"p"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>split-window-horizontally<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>other-window 1 nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>= prefix 1<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>switch-to-next-buffer<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-x 2"</span> 'sacha/vsplit-last-buffer<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-x 3"</span> 'sacha/hsplit-last-buffer<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-30" class="outline-4">
<h4 id="unnumbered-30"><span class="done DONE">DONE</span> Searching based on the current word</h4>
<div class="outline-text-4" id="text-unnumbered-30">
<p>
This lets me search up and down. I don't use this often, though.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/search-word-backward</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Find the previous occurrence of the current word."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>cur <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>skip-syntax-backward <span class="org-string">"w_"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-backward <span class="org-rainbow-delimiters-depth-6">(</span>concat <span class="org-string">"\\_&lt;"</span> <span class="org-rainbow-delimiters-depth-7">(</span>current-word<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"\\_&gt;"</span><span class="org-rainbow-delimiters-depth-6">)</span> nil t<span class="org-rainbow-delimiters-depth-5">)</span>
         <span class="org-rainbow-delimiters-depth-5">(</span>match-beginning 0<span class="org-rainbow-delimiters-depth-5">)</span>
       cur<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/search-word-forward</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Find the next occurrence of the current word."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>cur <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>skip-syntax-forward <span class="org-string">"w_"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward <span class="org-rainbow-delimiters-depth-6">(</span>concat <span class="org-string">"\\_&lt;"</span> <span class="org-rainbow-delimiters-depth-7">(</span>current-word<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"\\_&gt;"</span><span class="org-rainbow-delimiters-depth-6">)</span> nil t<span class="org-rainbow-delimiters-depth-5">)</span>
         <span class="org-rainbow-delimiters-depth-5">(</span>match-beginning 0<span class="org-rainbow-delimiters-depth-5">)</span>
       cur<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">search-for-keyword</span> <span class="org-rainbow-delimiters-depth-2">(</span>around sacha activate<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Match in a case-insensitive way."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>case-fold-search t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    ad-do-it<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key '<span class="org-rainbow-delimiters-depth-2">[</span>M-up<span class="org-rainbow-delimiters-depth-2">]</span> 'sacha/search-word-backward<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key '<span class="org-rainbow-delimiters-depth-2">[</span>M-down<span class="org-rainbow-delimiters-depth-2">]</span> 'sacha/search-word-forward<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-31" class="outline-4">
<h4 id="unnumbered-31">Frequently-accessed files</h4>
<div class="outline-text-4" id="text-unnumbered-31">
<p>
Registers allow you to jump to a file or other location quickly. To
jump to a register, use <code>C-x r j</code> followed by the letter of the
register. Using registers for all these file shortcuts is probably a bit of a waste since I can easily define my own keymap, but since I rarely go beyond register A anyway&#x2026;
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>mapcar
 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span>r<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>set-register <span class="org-rainbow-delimiters-depth-4">(</span>car r<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>cons 'file <span class="org-rainbow-delimiters-depth-5">(</span>cdr r<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
 '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>?i . <span class="org-string">"~/.emacs.d/Sacha.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>?o . <span class="org-string">"~/personal/organizer.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>?b . <span class="org-string">"~/personal/business.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>?B . <span class="org-string">"~/Dropbox/books"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>?e . <span class="org-string">"~/code/dev/emacs-notes/tasks.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>?w . <span class="org-string">"~/Dropbox/public/sharing/index.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>?W . <span class="org-string">"~/Dropbox/public/sharing/blog.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>?j . <span class="org-string">"~/personal/journal.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>?I . <span class="org-string">"~/Dropbox/Inbox"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>?g . <span class="org-string">"~/sachac.github.io/evil-plans/index.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>?c . <span class="org-string">"~/code/dev/elisp-course.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>?l . <span class="org-string">"~/dropbox/public/sharing/learning.org"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-32" class="outline-4">
<h4 id="unnumbered-32">Key chords</h4>
<div class="outline-text-4" id="text-unnumbered-32">
<p>
I'm on a Dvorak keyboard, so these might not work for you.
Experimenting with this. <code>key-chord</code> lets you define keyboard
shortcuts that use ordinary keys.
</p>

<p>
Some code from <a href="http://emacsredux.com/blog/2013/04/28/switch-to-previous-buffer/">http://emacsredux.com/blog/2013/04/28/switch-to-previous-buffer/</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/key-chord-define</span> <span class="org-rainbow-delimiters-depth-2">(</span>keymap keys command<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Define in KEYMAP, a key-chord of two keys in KEYS starting a COMMAND.</span>
<span class="org-doc">\nKEYS can be a string or a vector of two elements. Currently only elements</span>
<span class="org-doc">that corresponds to ascii codes in the range 32 to 126 can be used.</span>
<span class="org-doc">\nCOMMAND can be an interactive function, a string, or nil.</span>
<span class="org-doc">If COMMAND is nil, the key-chord is removed.</span>

<span class="org-doc">MODIFICATION: Do not define the transposed key chord.</span>
<span class="org-doc">"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>/= 2 <span class="org-rainbow-delimiters-depth-4">(</span>length keys<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-warning">error</span> <span class="org-string">"Key-chord keys must have two elements"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Exotic chars in a string are &gt;255 but define-key wants 128..255 for those</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>key1 <span class="org-rainbow-delimiters-depth-5">(</span>logand 255 <span class="org-rainbow-delimiters-depth-6">(</span>aref keys 0<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>key2 <span class="org-rainbow-delimiters-depth-5">(</span>logand 255 <span class="org-rainbow-delimiters-depth-6">(</span>aref keys 1<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key keymap <span class="org-rainbow-delimiters-depth-4">(</span>vector 'key-chord key1 key2<span class="org-rainbow-delimiters-depth-4">)</span> command<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>fset 'key-chord-define 'sacha/key-chord-define<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/switch-to-previous-buffer</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Switch to previously open buffer.</span>
<span class="org-doc">Repeated invocations toggle between the two most recently open buffers."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>switch-to-buffer <span class="org-rainbow-delimiters-depth-3">(</span>other-buffer <span class="org-rainbow-delimiters-depth-4">(</span>current-buffer<span class="org-rainbow-delimiters-depth-4">)</span> 1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-check-agenda</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Peek at agenda."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">cond</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>derived-mode-p 'org-agenda-mode<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>window-parent<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>delete-window<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>bury-buffer<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>get-buffer <span class="org-string">"*Org Agenda*"</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span>switch-to-buffer-other-window <span class="org-string">"*Org Agenda*"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>t <span class="org-rainbow-delimiters-depth-4">(</span>org-agenda nil <span class="org-string">"a"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/key-chord-command-map</span> <span class="org-rainbow-delimiters-depth-2">(</span>make-sparse-keymap<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key sacha/key-chord-command-map <span class="org-string">"k"</span> 'kill-sexp<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key sacha/key-chord-command-map <span class="org-string">"h"</span> 'emms-pause<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key sacha/key-chord-command-map <span class="org-string">"u"</span> 'emms-pause<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key sacha/key-chord-command-map <span class="org-string">"r"</span> 'repeat<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key sacha/key-chord-command-map <span class="org-string">"t"</span> 'emms-seek-backward<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key sacha/key-chord-command-map <span class="org-string">"s"</span> 'emms-seek-to<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key sacha/key-chord-command-map <span class="org-string">"i"</span> 'imenu<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key sacha/key-chord-command-map <span class="org-string">"+"</span> <span class="org-rainbow-delimiters-depth-2">(</span>sacha/def-rep-command '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"+"</span> . text-scale-increase<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"-"</span> . text-scale-decrease<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key sacha/key-chord-command-map <span class="org-string">"-"</span> <span class="org-rainbow-delimiters-depth-2">(</span>sacha/def-rep-command '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"-"</span> . text-scale-decrease<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"+"</span> . text-scale-increase<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Now let's set up the actual keychords.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">key-chord</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>fset 'key-chord-define 'sacha/key-chord-define<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq key-chord-one-key-delay 0.16<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>key-chord-mode 1<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">k can be bound too</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>key-chord-define-global <span class="org-string">"uu"</span>     'undo<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>key-chord-define-global <span class="org-string">"jj"</span>     'ace-jump-word-mode<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>key-chord-define-global <span class="org-string">"yy"</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>sacha/def-rep-command
           '<span class="org-rainbow-delimiters-depth-5">(</span>nil
             <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"&lt;left&gt;"</span> . windmove-left<span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"&lt;right&gt;"</span> . windmove-right<span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"&lt;down&gt;"</span> . windmove-down<span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"&lt;up&gt;"</span> . windmove-up<span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"y"</span> . other-window<span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"h"</span> . ace-window<span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"s"</span> . <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>interactive<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>ace-window 4<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"d"</span> . <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>interactive<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>ace-window 16<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>key-chord-define-global <span class="org-string">"jw"</span>     'ace-window<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>key-chord-define-global <span class="org-string">"jl"</span>     'ace-jump-line-mode<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>key-chord-define-global <span class="org-string">"j."</span>
                             <span class="org-rainbow-delimiters-depth-4">(</span>sacha/def-rep-command
                              '<span class="org-rainbow-delimiters-depth-5">(</span>nil
                                <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"&lt;up&gt;"</span> . join-line<span class="org-rainbow-delimiters-depth-6">)</span>
                                <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"&lt;down&gt;"</span> . <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>interactive<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>join-line 1<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                                <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"t"</span> . join-line<span class="org-rainbow-delimiters-depth-6">)</span>
                                <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"n"</span> . <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>interactive<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>join-line 1<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">not an ace-jump, but still useful</span>
    <span class="org-comment-delimiter">;</span><span class="org-comment">(key-chord-define-global "jZ"     'ace-jump-zap-to-char)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>key-chord-define-global <span class="org-string">"FF"</span>     'find-file<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>key-chord-define-global <span class="org-string">"qq"</span>     'sacha/org-quick-clock-in-task<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>key-chord-define-global <span class="org-string">"hh"</span>     sacha/key-chord-command-map<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>key-chord-define-global <span class="org-string">"hc"</span>     'emms-seek-forward<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>key-chord-define-global <span class="org-string">"xx"</span>     'er/expand-region<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>key-chord-define-global <span class="org-string">"  "</span>     'sacha/insert-space-or-expand<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>key-chord-define-global <span class="org-string">"JJ"</span>     'sacha/switch-to-previous-buffer<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-33" class="outline-4">
<h4 id="unnumbered-33">Smartscan</h4>
<div class="outline-text-4" id="text-unnumbered-33">
<p>
From <a href="https://github.com/itsjeyd/emacs-config/blob/emacs24/init.el">https://github.com/itsjeyd/emacs-config/blob/emacs24/init.el</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">smartscan</span>
  <span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span>global-smartscan-mode t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-34" class="outline-4">
<h4 id="unnumbered-34">Dired</h4>
<div class="outline-text-4" id="text-unnumbered-34">
<p>
From <a href="http://www.masteringemacs.org/articles/2011/03/25/working-multiple-files-dired/">http://www.masteringemacs.org/articles/2011/03/25/working-multiple-files-dired/</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">find-dired</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq find-ls-option '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"-print0 | xargs -0 ls -ld"</span> . <span class="org-string">"-ld"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-35" class="outline-4">
<h4 id="unnumbered-35">Move to beginning of line</h4>
<div class="outline-text-4" id="text-unnumbered-35">
<p>
Copied from <a href="http://emacsredux.com/blog/2013/05/22/smarter-navigation-to-the-beginning-of-a-line/">http://emacsredux.com/blog/2013/05/22/smarter-navigation-to-the-beginning-of-a-line/</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/smarter-move-beginning-of-line</span> <span class="org-rainbow-delimiters-depth-2">(</span>arg<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Move point back to indentation of beginning of line.</span>

<span class="org-doc">Move point to the first non-whitespace character on this line.</span>
<span class="org-doc">If point is already there, move to the beginning of the line.</span>
<span class="org-doc">Effectively toggle between the first non-whitespace character and</span>
<span class="org-doc">the beginning of the line.</span>

<span class="org-doc">If ARG is not nil or 1, move forward ARG - 1 lines first.  If</span>
<span class="org-doc">point reaches the beginning or end of the buffer, stop there."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"^p"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq arg <span class="org-rainbow-delimiters-depth-3">(</span>or arg 1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Move lines first</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>/= arg 1<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>line-move-visual nil<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>forward-line <span class="org-rainbow-delimiters-depth-5">(</span>1- arg<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>orig-point <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>back-to-indentation<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>= orig-point <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>move-beginning-of-line 1<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">remap C-a to `</span><span class="org-comment"><span class="org-constant">smarter-move-beginning-of-line</span></span><span class="org-comment">'</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">[</span>remap move-beginning-of-line<span class="org-rainbow-delimiters-depth-2">]</span>
                'sacha/smarter-move-beginning-of-line<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-36" class="outline-4">
<h4 id="unnumbered-36">Recent files</h4>
<div class="outline-text-4" id="text-unnumbered-36">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">recentf</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq recentf-max-saved-items 200
      recentf-max-menu-items 15<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>recentf-mode<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-37" class="outline-4">
<h4 id="unnumbered-37">Copy filename to clipboard</h4>
<div class="outline-text-4" id="text-unnumbered-37">
<p>
<a href="http://emacsredux.com/blog/2013/03/27/copy-filename-to-the-clipboard/">http://emacsredux.com/blog/2013/03/27/copy-filename-to-the-clipboard/</a>
<a href="https://github.com/bbatsov/prelude">https://github.com/bbatsov/prelude</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">prelude-copy-file-name-to-clipboard</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Copy the current buffer file name to the clipboard."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>filename <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>equal major-mode 'dired-mode<span class="org-rainbow-delimiters-depth-6">)</span>
                      default-directory
                    <span class="org-rainbow-delimiters-depth-6">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> filename
      <span class="org-rainbow-delimiters-depth-4">(</span>kill-new filename<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>message <span class="org-string">"Copied buffer file name '%s' to the clipboard."</span> filename<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-unnumbered-38" class="outline-3">
<h3 id="unnumbered-38">Reading</h3>
<div class="outline-text-3" id="text-unnumbered-38">
<p>
<a href="https://github.com/xahlee/xah_emacs_init/blob/master/xah_emacs_font.el">https://github.com/xahlee/xah_emacs_init/blob/master/xah_emacs_font.el</a>
From Xah Lee:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">xah-toggle-margin-right</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Toggle the right margin between `</span><span class="org-doc"><span class="org-constant">fill-column</span></span><span class="org-doc">' or window width.</span>
<span class="org-doc">This command is convenient when reading novel, documentation."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>eq <span class="org-rainbow-delimiters-depth-4">(</span>cdr <span class="org-rainbow-delimiters-depth-5">(</span>window-margins<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>set-window-margins nil 0 <span class="org-rainbow-delimiters-depth-4">(</span>- <span class="org-rainbow-delimiters-depth-5">(</span>window-body-width<span class="org-rainbow-delimiters-depth-5">)</span> fill-column<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>set-window-margins nil 0 0<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-39" class="outline-3">
<h3 id="unnumbered-39">Writing</h3>
<div class="outline-text-3" id="text-unnumbered-39">
</div><div id="outline-container-unnumbered-40" class="outline-4">
<h4 id="unnumbered-40">Avoiding weasel words</h4>
<div class="outline-text-4" id="text-unnumbered-40">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">artbollocks-mode</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq artbollocks-weasel-words-regex
          <span class="org-rainbow-delimiters-depth-4">(</span>concat <span class="org-string">"\\b"</span> <span class="org-rainbow-delimiters-depth-5">(</span>regexp-opt
                         '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"one of the"</span>
                           <span class="org-string">"should"</span>
                           <span class="org-string">"just"</span>
                           <span class="org-string">"sort of"</span>
                           <span class="org-string">"a lot"</span>
                           <span class="org-string">"probably"</span>
                           <span class="org-string">"maybe"</span>
                           <span class="org-string">"perhaps"</span>
                           <span class="org-string">"I think"</span>
                           <span class="org-string">"really"</span>
                           <span class="org-string">"pretty"</span>
                           <span class="org-string">"nice"</span>
                           <span class="org-string">"action"</span>
                           <span class="org-string">"utilize"</span>
                           <span class="org-string">"leverage"</span><span class="org-rainbow-delimiters-depth-6">)</span> t<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">"\\b"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't show the art critic words, or at least until I figure</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">out my own jargon</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq artbollocks-jargon nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-41" class="outline-4">
<h4 id="unnumbered-41">Unfill paragraph</h4>
<div class="outline-text-4" id="text-unnumbered-41">
<p>
I unfill paragraphs a lot because Wordpress likes adding extra <code>&lt;br&gt;</code> tags if I don't. (I should probably just tweak my Wordpress installation.)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/unfill-paragraph</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> region<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-doc">"Takes a multi-line paragraph and makes it into a single line of text."</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
                   <span class="org-rainbow-delimiters-depth-4">(</span>barf-if-buffer-read-only<span class="org-rainbow-delimiters-depth-4">)</span>
                   <span class="org-rainbow-delimiters-depth-4">(</span>list t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>fill-column <span class="org-rainbow-delimiters-depth-5">(</span>point-max<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>fill-paragraph nil region<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"M-Q"</span> 'sacha/unfill-paragraph<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I never actually justify text, so I might as well change the way
<code>fill-paragraph</code> works. With the code below, <code>M-q</code> will fill the
paragraph normally, and <code>C-u M-q</code> will unfill it.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/fill-or-unfill-paragraph</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> unfill region<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-doc">"Fill paragraph (or REGION).</span>
<span class="org-doc">  With the prefix argument UNFILL, unfill it instead."</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
                   <span class="org-rainbow-delimiters-depth-4">(</span>barf-if-buffer-read-only<span class="org-rainbow-delimiters-depth-4">)</span>
                   <span class="org-rainbow-delimiters-depth-4">(</span>list <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> current-prefix-arg 'unfill<span class="org-rainbow-delimiters-depth-5">)</span> t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>fill-column <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> unfill <span class="org-rainbow-delimiters-depth-6">(</span>point-max<span class="org-rainbow-delimiters-depth-6">)</span> fill-column<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>fill-paragraph nil region<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"M-q"</span> 'sacha/fill-or-unfill-paragraph<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Also, <code>visual-line-mode</code> is so much better than <code>auto-fill-mode</code>. It doesn't actually break the text into multiple lines - it only looks that way.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>remove-hook 'text-mode-hook #'turn-on-auto-fill<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'text-mode-hook 'turn-on-visual-line-mode<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-42" class="outline-4">
<h4 id="unnumbered-42">Unicode</h4>
<div class="outline-text-4" id="text-unnumbered-42">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defmacro</span> <span class="org-function-name">sacha/insert-unicode</span> <span class="org-rainbow-delimiters-depth-2">(</span>unicode-name<span class="org-rainbow-delimiters-depth-2">)</span>
  `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>interactive<span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span>insert-char <span class="org-rainbow-delimiters-depth-4">(</span>cdr <span class="org-rainbow-delimiters-depth-5">(</span>assoc-string ,unicode-name <span class="org-rainbow-delimiters-depth-6">(</span>ucs-names<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-x 8 s"</span> <span class="org-rainbow-delimiters-depth-2">(</span>sacha/insert-unicode <span class="org-string">"ZERO WIDTH SPACE"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-x 8 S"</span> <span class="org-rainbow-delimiters-depth-2">(</span>sacha/insert-unicode <span class="org-string">"SNOWMAN"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-43" class="outline-4">
<h4 id="unnumbered-43">Clean up spaces</h4>
<div class="outline-text-4" id="text-unnumbered-43">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"M-SPC"</span> 'cycle-spacing<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-44" class="outline-4">
<h4 id="unnumbered-44">Expand</h4>
<div class="outline-text-4" id="text-unnumbered-44">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"M-/"</span> 'hippie-expand<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
From <a href="https://github.com/purcell/emacs.d/blob/master/lisp/init-auto-complete.el">https://github.com/purcell/emacs.d/blob/master/lisp/init-auto-complete.el</a> - Exclude very large buffers from dabbrev
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sanityinc/dabbrev-friend-buffer</span> <span class="org-rainbow-delimiters-depth-2">(</span>other-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>&lt; <span class="org-rainbow-delimiters-depth-3">(</span>buffer-size other-buffer<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>* 1 1024 1024<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq dabbrev-friend-buffer-function 'sanityinc/dabbrev-friend-buffer<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq hippie-expand-try-functions-list
      '<span class="org-rainbow-delimiters-depth-2">(</span>yas-hippie-try-expand
        try-expand-all-abbrevs
        try-complete-file-name-partially
        try-complete-file-name
        try-expand-dabbrev
        try-expand-dabbrev-from-kill
        try-expand-dabbrev-all-buffers
        try-expand-list
        try-expand-line
        try-complete-lisp-symbol-partially
        try-complete-lisp-symbol<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-45" class="outline-4">
<h4 id="unnumbered-45">Define more abbreviations</h4>
<div class="outline-text-4" id="text-unnumbered-45">
<table id="abbrev" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Base</th>
<th scope="col" class="left">Expansion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">bc</td>
<td class="left">because</td>
</tr>

<tr>
<td class="left">wo</td>
<td class="left">without</td>
</tr>

<tr>
<td class="left">wi</td>
<td class="left">with</td>
</tr>

<tr>
<td class="left">ex</td>
<td class="left">For example,</td>
</tr>

<tr>
<td class="left">qm</td>
<td class="left">sacha@sachachua.com</td>
</tr>

<tr>
<td class="left">qe</td>
<td class="left"><a href="http://sachachua.com/dotemacs">http://sachachua.com/dotemacs</a></td>
</tr>

<tr>
<td class="left">qw</td>
<td class="left"><a href="http://sachachua.com/">http://sachachua.com/</a></td>
</tr>

<tr>
<td class="left">qb</td>
<td class="left"><a href="http://sachachua.com/blog/">http://sachachua.com/blog/</a></td>
</tr>

<tr>
<td class="left">qc</td>
<td class="left"><a href="http://sachachua.com/blog/emacs-chat/">http://sachachua.com/blog/emacs-chat/</a></td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>mapc <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>define-global-abbrev <span class="org-rainbow-delimiters-depth-4">(</span>car x<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>cadr x<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> data<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'text-mode-hook 'abbrev-mode<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>diminish 'abbrev-mode <span class="org-string">" A"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-unnumbered-46" class="outline-3">
<h3 id="unnumbered-46">Org</h3>
<div class="outline-text-3" id="text-unnumbered-46">
<p>
I use <a href="http://www.orgmode.org/">Org Mode</a> to take notes, publish my blog, and do all sorts of
stuff.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org</span>
  <span class="org-builtin">:diminish</span> org-mode
  <span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
<div id="outline-container-unnumbered-47" class="outline-4">
<h4 id="unnumbered-47">My files</h4>
<div class="outline-text-4" id="text-unnumbered-47">
<p>
#<a id="org-files"></a>
</p>

<p>
Here are the Org files I use. I should probably organize them better. =)
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">organizer.org</td>
<td class="left">My main Org file. Inbox for M-x org-capture, tasks, weekly reviews, etc.</td>
</tr>

<tr>
<td class="left">business.org</td>
<td class="left">Business-related notes and TODOs</td>
</tr>

<tr>
<td class="left">people.org</td>
<td class="left">People-related tasks</td>
</tr>

<tr>
<td class="left"><a href="http://sachachua.com/evil-plans">evil-plans/index.org</a></td>
<td class="left">High-level goals</td>
</tr>

<tr>
<td class="left"><a href="http://sachachua.com/outline">sharing/index.org</a></td>
<td class="left">Things to write about</td>
</tr>

<tr>
<td class="left">decisions.org</td>
<td class="left">Pending, current, and reviewed decisions</td>
</tr>

<tr>
<td class="left"><a href="http://sachachua.com/blog/index">blog.org</a></td>
<td class="left">Topic index for my blog</td>
</tr>

<tr>
<td class="left"><a href="http://sachachua.com/my-learning">learning.org</a></td>
<td class="left">Learning plan</td>
</tr>

<tr>
<td class="left">outline.org</td>
<td class="left">Huge outline of notes by category</td>
</tr>

<tr>
<td class="left">tracking.org</td>
<td class="left">Temporary Org file for tracking various things</td>
</tr>

<tr>
<td class="left">delegation.org</td>
<td class="left">Templates for assigning tasks - now using Google Docs instead</td>
</tr>

<tr>
<td class="left">books.org</td>
<td class="left">Huge file with book notes</td>
</tr>

<tr>
<td class="left">calendar.org</td>
<td class="left">Used to use this with ical2org, but have been having problems with ical2org lately; no longer use</td>
</tr>

<tr>
<td class="left">ideal.org</td>
<td class="left">Planning ideal days</td>
</tr>

<tr>
<td class="left">archive.org</td>
<td class="left">Archived subtrees</td>
</tr>

<tr>
<td class="left">latin.org</td>
<td class="left">Latin notes</td>
</tr>

<tr>
<td class="left">101things.org</td>
<td class="left">Old goals for 101 things in 1001 days</td>
</tr>

<tr>
<td class="left">life.org</td>
<td class="left">Questions, processes, tools</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-unnumbered-48" class="outline-4">
<h4 id="unnumbered-48">Modules</h4>
<div class="outline-text-4" id="text-unnumbered-48">
<p>
Org has a whole bunch of optional modules. These are the ones I'm
currently experimenting with.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-rainbow-delimiters-depth-1">(</span>setq org-modules '<span class="org-rainbow-delimiters-depth-2">(</span>org-bbdb
                      org-gnus
                      org-drill
                      org-info
                      org-jsinfo
                      org-habit
                      org-irc
                      org-mouse
                      org-annotate-file
                      org-eval
                      org-expiry
                      org-interactive-query
                      org-man
                      org-collector
                      org-panel
                      org-screen
                      org-toc<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>eval-after-load 'org
 '<span class="org-rainbow-delimiters-depth-2">(</span>org-load-modules-maybe t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-expiry-inactive-timestamps t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-49" class="outline-4">
<h4 id="unnumbered-49">Keyboard shortcuts</h4>
<div class="outline-text-4" id="text-unnumbered-49">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c r"</span> 'org-capture<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c a"</span> 'org-agenda<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c l"</span> 'org-store-link<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c L"</span> 'org-insert-link-global<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c O"</span> 'org-open-at-point-global<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"&lt;f9&gt; &lt;f9&gt;"</span> 'org-agenda-list<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"&lt;f9&gt; &lt;f8&gt;"</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>interactive<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>org-capture nil <span class="org-string">"r"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-TAB"</span> 'org-cycle org-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c v"</span> 'org-show-todo-tree org-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c C-r"</span> 'org-refile org-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c R"</span> 'org-reveal org-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<code>append-next-kill</code> is more useful to me than <code>org-table-copy-region</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>eval-after-load 'org
  '<span class="org-rainbow-delimiters-depth-2">(</span>bind-key <span class="org-string">"C-M-w"</span> 'append-next-kill org-mode-map<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I don't use the diary, but I do use the clock a lot.
</p>

<pre class="example">
(eval-after-load 'org-agenda
  '(bind-key "i" 'org-agenda-clock-in org-agenda-mode-map))
</pre>
</div>

<div id="outline-container-unnumbered-50" class="outline-5">
<h5 id="unnumbered-50">Speed commands</h5>
<div class="outline-text-5" id="text-unnumbered-50">
<p>
These are great for quickly acting on tasks.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-use-effective-time t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-use-speed-commands-for-headings-and-lists</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Activate speed commands on list items too."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>or <span class="org-rainbow-delimiters-depth-3">(</span>and <span class="org-rainbow-delimiters-depth-4">(</span>looking-at org-outline-regexp<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>looking-back <span class="org-string">"^\**"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span> <span class="org-rainbow-delimiters-depth-4">(</span>and <span class="org-rainbow-delimiters-depth-5">(</span>looking-at <span class="org-rainbow-delimiters-depth-6">(</span>org-item-re<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>looking-back <span class="org-string">"^[ \t]*"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-use-speed-commands 'sacha/org-use-speed-commands-for-headings-and-lists<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'org-speed-commands-user '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"x"</span> org-todo <span class="org-string">"DONE"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'org-speed-commands-user '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"y"</span> org-todo-yesterday <span class="org-string">"DONE"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'org-speed-commands-user '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"!"</span> sacha/org-clock-in-and-track<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'org-speed-commands-user '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"s"</span> call-interactively 'org-schedule<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'org-speed-commands-user '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"d"</span> sacha/org-move-line-to-destination<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'org-speed-commands-user '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"i"</span> call-interactively 'org-clock-in<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'org-speed-commands-user '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"o"</span> call-interactively 'org-clock-out<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'org-speed-commands-user '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"$"</span> call-interactively 'org-archive-subtree<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"!"</span> 'sacha/org-clock-in-and-track org-agenda-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-unnumbered-51" class="outline-4">
<h4 id="unnumbered-51">Navigation</h4>
<div class="outline-text-4" id="text-unnumbered-51">
<p>
From <a href="http://stackoverflow.com/questions/15011703/is-there-an-emacs-org-mode-command-to-jump-to-an-org-heading">http://stackoverflow.com/questions/15011703/is-there-an-emacs-org-mode-command-to-jump-to-an-org-heading</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-goto-interface 'outline
      org-goto-max-level 10<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">imenu</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-startup-folded nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c j"</span> 'org-clock-goto<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;; </span><span class="org-comment">jump to current task from anywhere</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c C-w"</span> 'org-refile<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-cycle-include-plain-lists 'integrate<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>

<div id="outline-container-unnumbered-52" class="outline-5">
<h5 id="unnumbered-52">Link Org subtrees and navigate between them</h5>
<div class="outline-text-5" id="text-unnumbered-52">
<p>
The following code makes it easier for me to link trees with entries, as in <a href="http://sachachua.com/evil-plans">http://sachachua.com/evil-plans</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-follow-entry-link</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Follow the defined link for this entry."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>org-entry-get <span class="org-rainbow-delimiters-depth-4">(</span>point<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"LINK"</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>org-open-link-from-string <span class="org-rainbow-delimiters-depth-4">(</span>org-entry-get <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">"LINK"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-open-at-point<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c o"</span> 'sacha/org-follow-entry-link org-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-link-projects</span> <span class="org-rainbow-delimiters-depth-2">(</span>location<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Add link properties between the current subtree and the one specified by LOCATION."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive
   <span class="org-rainbow-delimiters-depth-3">(</span>list <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>org-refile-use-cache nil<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
     <span class="org-rainbow-delimiters-depth-5">(</span>org-refile-get-location <span class="org-string">"Location"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>link1 <span class="org-rainbow-delimiters-depth-5">(</span>org-store-link nil<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> link2<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-window-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-refile 4 nil location<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>setq link2 <span class="org-rainbow-delimiters-depth-5">(</span>org-store-link nil<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-set-property <span class="org-string">"LINK"</span> link1<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-set-property <span class="org-string">"LINK"</span> link2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-53" class="outline-5">
<h5 id="unnumbered-53">Viewing, navigating, and editing the Org tree</h5>
<div class="outline-text-5" id="text-unnumbered-53">
<p>
I often cut and paste subtrees. This makes it easier to cut
something and paste it elsewhere in the hierarchy.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>eval-after-load 'org
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
     <span class="org-rainbow-delimiters-depth-3">(</span>bind-key <span class="org-string">"C-c k"</span> 'org-cut-subtree org-mode-map<span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span>setq org-yank-adjusted-subtrees t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-unnumbered-54" class="outline-4">
<h4 id="unnumbered-54">Taking notes</h4>
<div class="outline-text-4" id="text-unnumbered-54">
<p>
My org files are in my <code>personal</code> directory, which is actually a
symlink to a directory in my Dropbox. That way, I can update my
Org files from multiple computers.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-directory <span class="org-string">"~/personal"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-default-notes-file <span class="org-string">"~/personal/organizer.org"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
This makes it easier to add links from outside.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/yank-more</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>insert <span class="org-string">"[["</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>yank<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>insert <span class="org-string">"][more]]"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"&lt;f6&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'sacha/yank-more<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
<div id="outline-container-unnumbered-55" class="outline-5">
<h5 id="unnumbered-55">Date trees</h5>
<div class="outline-text-5" id="text-unnumbered-55">
<p>
This quickly adds a same-level heading for the succeeding day.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-insert-heading-for-next-day</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Insert a same-level heading for the following day."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>new-date
         <span class="org-rainbow-delimiters-depth-5">(</span>seconds-to-time
          <span class="org-rainbow-delimiters-depth-6">(</span>+ 86400.0
             <span class="org-rainbow-delimiters-depth-7">(</span>float-time
              <span class="org-rainbow-delimiters-depth-8">(</span>org-read-date nil 'to-time <span class="org-rainbow-delimiters-depth-9">(</span>elt <span class="org-rainbow-delimiters-depth-1">(</span>org-heading-components<span class="org-rainbow-delimiters-depth-1">)</span> 4<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-insert-heading-after-current<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>insert <span class="org-rainbow-delimiters-depth-4">(</span>format-time-string <span class="org-string">"%Y-%m-%d\n\n"</span> new-date<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-56" class="outline-5">
<h5 id="unnumbered-56">Templates</h5>
<div class="outline-text-5" id="text-unnumbered-56">
<p>
I use <code>org-capture</code> templates to quickly jot down tasks, ledger
entries, notes, and other semi-structured pieces of information.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/org-basic-task-template</span> <span class="org-string">"* TODO %^{Task}</span>
<span class="org-string">SCHEDULED: %^t</span>
<span class="org-string">:PROPERTIES:</span>
<span class="org-string">:Effort: %^{effort|1:00|0:05|0:15|0:30|2:00|4:00}</span>
<span class="org-string">:END:</span>
<span class="org-string">%?</span>
<span class="org-string">"</span> <span class="org-doc">"Basic task data"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-capture-templates
      `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"t"</span> <span class="org-string">"Tasks"</span> entry
         <span class="org-rainbow-delimiters-depth-4">(</span>file+headline <span class="org-string">"~/personal/organizer.org"</span> <span class="org-string">"Tasks"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         ,sacha/org-basic-task-template<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"T"</span> <span class="org-string">"Quick task"</span> entry
         <span class="org-rainbow-delimiters-depth-4">(</span>file+headline <span class="org-string">"~/personal/organizer.org"</span> <span class="org-string">"Tasks"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-string">"* TODO %^{Task}"</span>
         <span class="org-builtin">:immediate-finish</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"e"</span> <span class="org-string">"Emacs idea"</span> entry
         <span class="org-rainbow-delimiters-depth-4">(</span>file+headline <span class="org-string">"~/code/dev/emacs-notes/tasks.org"</span> <span class="org-string">"Emacs"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-string">"* TODO %^{Task}"</span>
         <span class="org-builtin">:immediate-finish</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"b"</span> <span class="org-string">"Business task"</span> entry
         <span class="org-rainbow-delimiters-depth-4">(</span>file+headline <span class="org-string">"~/personal/business.org"</span> <span class="org-string">"Tasks"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         ,sacha/org-basic-task-template<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"p"</span> <span class="org-string">"People task"</span> entry
         <span class="org-rainbow-delimiters-depth-4">(</span>file+headline <span class="org-string">"~/personal/people.org"</span> <span class="org-string">"Tasks"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         ,sacha/org-basic-task-template<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"j"</span> <span class="org-string">"Journal entry"</span> plain
         <span class="org-rainbow-delimiters-depth-4">(</span>file+datetree <span class="org-string">"~/personal/journal.org"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-string">"%K - %a\n%i\n%?\n"</span>
         <span class="org-builtin">:unnarrowed</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"J"</span> <span class="org-string">"Journal entry with date"</span> plain
         <span class="org-rainbow-delimiters-depth-4">(</span>file+datetree+prompt <span class="org-string">"~/personal/journal.org"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-string">"%K - %a\n%i\n%?\n"</span>
         <span class="org-builtin">:unnarrowed</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"db"</span> <span class="org-string">"Done - Business"</span> entry
         <span class="org-rainbow-delimiters-depth-4">(</span>file+headline <span class="org-string">"~/personal/business.org"</span> <span class="org-string">"Tasks"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-string">"* DONE %^{Task}\nSCHEDULED: %^t\n%?"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dp"</span> <span class="org-string">"Done - People"</span> entry
         <span class="org-rainbow-delimiters-depth-4">(</span>file+headline <span class="org-string">"~/personal/people.org"</span> <span class="org-string">"Tasks"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-string">"* DONE %^{Task}\nSCHEDULED: %^t\n%?"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dt"</span> <span class="org-string">"Done - Task"</span> entry
         <span class="org-rainbow-delimiters-depth-4">(</span>file+headline <span class="org-string">"~/personal/organizer.org"</span> <span class="org-string">"Tasks"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-string">"* DONE %^{Task}\nSCHEDULED: %^t\n%?"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"q"</span> <span class="org-string">"Quick note"</span> item
         <span class="org-rainbow-delimiters-depth-4">(</span>file+headline <span class="org-string">"~/personal/organizer.org"</span> <span class="org-string">"Quick notes"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"l"</span> <span class="org-string">"Ledger entries"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"lm"</span> <span class="org-string">"MBNA"</span> plain
         <span class="org-rainbow-delimiters-depth-4">(</span>file <span class="org-string">"~/personal/ledger"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-string">"%(org-read-date) %^{Payee}</span>
<span class="org-string">  Liabilities:MBNA</span>
<span class="org-string">  Expenses:%^{Account}  $%^{Amount}</span>
<span class="org-string">"</span> <span class="org-builtin">:immediate-finish</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ln"</span> <span class="org-string">"No Frills"</span> plain
         <span class="org-rainbow-delimiters-depth-4">(</span>file <span class="org-string">"~/personal/ledger"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-string">"%(let ((org-read-date-prefer-future nil)) (org-read-date)) * No Frills</span>
<span class="org-string">  Liabilities:MBNA</span>
<span class="org-string">  Assets:Wayne:Groceries  $%^{Amount}</span>
<span class="org-string">"</span> <span class="org-builtin">:immediate-finish</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"lc"</span> <span class="org-string">"Cash"</span> plain
         <span class="org-rainbow-delimiters-depth-4">(</span>file <span class="org-string">"~/personal/ledger"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-string">"%(org-read-date) * %^{Payee}</span>
<span class="org-string">  Expenses:Cash</span>
<span class="org-string">  Expenses:%^{Account}  %^{Amount}</span>
<span class="org-string">"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"b"</span> <span class="org-string">"Book"</span> entry
         <span class="org-rainbow-delimiters-depth-4">(</span>file+datetree <span class="org-string">"~/personal/books.org"</span> <span class="org-string">"Inbox"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-string">"* %^{Title}  %^g</span>
<span class="org-string">%i</span>
<span class="org-string">*Author(s):* %^{Author} \\\\</span>
<span class="org-string">*ISBN:* %^{ISBN}</span>

<span class="org-string">%?</span>

<span class="org-string">*Review on:* %^t \\</span>
<span class="org-string">%a</span>
<span class="org-string">%U"</span>
         <span class="org-builtin">:clock-in</span> <span class="org-builtin">:clock-resume</span><span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"c"</span> <span class="org-string">"Contact"</span> entry <span class="org-rainbow-delimiters-depth-4">(</span>file <span class="org-string">"~/personal/contacts.org"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-string">"* %(org-contacts-template-name)</span>
<span class="org-string">:PROPERTIES:</span>
<span class="org-string">:EMAIL: %(org-contacts-template-email)</span>
<span class="org-string">:END:"</span><span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"n"</span> <span class="org-string">"Daily note"</span> table-line <span class="org-rainbow-delimiters-depth-4">(</span>file+olp <span class="org-string">"~/personal/organizer.org"</span> <span class="org-string">"Daily notes"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-string">"| %u | %^{Note} |"</span>
          <span class="org-builtin">:immediate-finish</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"r"</span> <span class="org-string">"Notes"</span> entry
          <span class="org-rainbow-delimiters-depth-4">(</span>file+datetree <span class="org-string">"~/personal/organizer.org"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-string">"* %?\n\n%i\n"</span>
          <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-M-r"</span> 'org-capture<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
<ul class="org-ul"><li><a id="unnumbered-57"></a>Allow refiling in the middle(ish) of a capture<br  /><div class="outline-text-6" id="text-unnumbered-57">
<p>
This lets me use <code>C-c C-r</code> to refile a capture and then jump to the
new location. I wanted to be able to file tasks under projects so that
they could inherit the QUANTIFIED property that I use to track time
(and any Beeminder-related properties too), but I also wanted to be
able to clock in on them.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-capture-refile-and-jump</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-capture-refile<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-refile-goto-last-stored<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">org-capture</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c C-r"</span> 'sacha/org-capture-refile-and-jump org-capture-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li></ul>
</div>

<div id="outline-container-unnumbered-58" class="outline-5">
<h5 id="unnumbered-58">Refiling</h5>
<div class="outline-text-5" id="text-unnumbered-58">
<p>
<code>org-refile</code> lets you organize notes by typing in the headline to file them under.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-reverse-note-order t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-refile-use-outline-path nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-refile-allow-creating-parent-nodes 'confirm<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-refile-use-cache nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-refile-targets '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>org-agenda-files . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:maxlevel</span> . 6<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-blank-before-new-entry nil<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-59" class="outline-5">
<h5 id="unnumbered-59">Estimating WPM</h5>
<div class="outline-text-5" id="text-unnumbered-59">
<p>
I'm curious about how fast I type some things.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">org-clock</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-entry-wpm</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-restriction</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-narrow-to-subtree<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>words <span class="org-rainbow-delimiters-depth-7">(</span>count-words-region <span class="org-rainbow-delimiters-depth-8">(</span>point-min<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>point-max<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>minutes <span class="org-rainbow-delimiters-depth-7">(</span>org-clock-sum-current-item<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>wpm <span class="org-rainbow-delimiters-depth-7">(</span>/ words minutes<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
  <span class="org-rainbow-delimiters-depth-5">(</span>message <span class="org-string">"WPM: %d (words: %d, minutes: %d)"</span> wpm words minutes<span class="org-rainbow-delimiters-depth-5">)</span>
  <span class="org-rainbow-delimiters-depth-5">(</span>kill-new <span class="org-rainbow-delimiters-depth-6">(</span>number-to-string wpm<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-unnumbered-60" class="outline-4">
<h4 id="unnumbered-60">Tasks</h4>
<div class="outline-text-4" id="text-unnumbered-60">
</div><div id="outline-container-unnumbered-61" class="outline-5">
<h5 id="unnumbered-61">Managing tasks</h5>
<div class="outline-text-5" id="text-unnumbered-61">
</div><ul class="org-ul"><li><a id="unnumbered-62"></a>Track TODO state<br  /><div class="outline-text-6" id="text-unnumbered-62">
<p>
<a id="todo-keywords"></a>
</p>

<p>
The parentheses indicate keyboard shortcuts that I can use to set the
task state. <code>@</code> and <code>!</code> toggle logging. <code>@</code> prompts you for a note,
and <code>!</code> automatically logs the timestamp of the state change.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-todo-keywords
 '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>sequence
    <span class="org-string">"TODO(t)"</span>  <span class="org-comment-delimiter">; </span><span class="org-comment">next action</span>
    <span class="org-string">"TOBLOG(b)"</span>  <span class="org-comment-delimiter">; </span><span class="org-comment">next action</span>
    <span class="org-string">"STARTED(s)"</span>
    <span class="org-string">"WAITING(w@/!)"</span>
    <span class="org-string">"SOMEDAY(.)"</span> <span class="org-string">"|"</span> <span class="org-string">"DONE(x!)"</span> <span class="org-string">"CANCELLED(c@)"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>sequence <span class="org-string">"LEARN"</span> <span class="org-string">"DO"</span> <span class="org-string">"TEACH"</span> <span class="org-string">"|"</span> <span class="org-string">"COMPLETE(x)"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>sequence <span class="org-string">"TOSKETCH"</span> <span class="org-string">"SKETCHED"</span> <span class="org-string">"|"</span> <span class="org-string">"POSTED"</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>sequence <span class="org-string">"TODELEGATE(-)"</span> <span class="org-string">"DELEGATED(d)"</span> <span class="org-string">"|"</span> <span class="org-string">"COMPLETE(x)"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-todo-keyword-faces
      '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"TODO"</span> . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"green"</span> <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"DONE"</span> . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"cyan"</span> <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"WAITING"</span> . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"red"</span> <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"SOMEDAY"</span> . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"gray"</span> <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="unnumbered-63"></a>Projects<br  /><div class="outline-text-6" id="text-unnumbered-63">
<p>
Projects are headings with the <code>:project:</code> tag, so we generally don't
want that tag inherited, except when we display unscheduled tasks that
don't belong to any projects.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-tags-exclude-from-inheritance '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"project"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
This code makes it easy for me to focus on one project and its tasks.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'org-speed-commands-user '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"N"</span> org-narrow-to-subtree<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'org-speed-commands-user '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"W"</span> widen<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-agenda-for-subtree</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>derived-mode-p 'org-agenda-mode<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>marker <span class="org-rainbow-delimiters-depth-6">(</span>or <span class="org-rainbow-delimiters-depth-7">(</span>org-get-at-bol 'org-marker<span class="org-rainbow-delimiters-depth-7">)</span>
                       <span class="org-rainbow-delimiters-depth-7">(</span>org-agenda-error<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>hdmarker <span class="org-rainbow-delimiters-depth-6">(</span>or <span class="org-rainbow-delimiters-depth-7">(</span>org-get-at-bol 'org-hd-marker<span class="org-rainbow-delimiters-depth-7">)</span> marker<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>pos <span class="org-rainbow-delimiters-depth-6">(</span>marker-position marker<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>col <span class="org-rainbow-delimiters-depth-6">(</span>current-column<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           newhead<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-with-remote-undo <span class="org-rainbow-delimiters-depth-5">(</span>marker-buffer marker<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-6">(</span>marker-buffer marker<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>widen<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>org-agenda nil <span class="org-string">"t"</span> 'subtree<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-agenda nil <span class="org-string">"t"</span> 'subtree<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'org-speed-commands-user '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"T"</span> sacha/org-agenda-for-subtree<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
There's probably a proper way to do this, maybe with <code>&lt;</code>. Oh, that would work nicely. <code>&lt; C-c a t</code> too.
</p>
</div>
</li>

<li><a id="unnumbered-64"></a>Tag tasks with GTD-ish contexts<br  /><div class="outline-text-6" id="text-unnumbered-64">
<p>
This defines keyboard shortcuts for those, too.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-tag-alist '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"@work"</span> . ?b<span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"@home"</span> . ?h<span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"@writing"</span> . ?w<span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"@errands"</span> . ?e<span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"@drawing"</span> . ?d<span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"@coding"</span> . ?c<span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"@phone"</span> . ?p<span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"@reading"</span> . ?r<span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"@computer"</span> . ?l<span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"quantified"</span> . ?q<span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"lowenergy"</span> . ?0<span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"highenergy"</span> . ?1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>
<li><a id="unnumbered-65"></a>Enable filtering by effort estimates<br  /><div class="outline-text-6" id="text-unnumbered-65">
<p>
That way, it's easy to see short tasks that I can finish.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'org-global-properties
      '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Effort_ALL"</span>. <span class="org-string">"0:05 0:15 0:30 1:00 2:00 3:00 4:00"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="unnumbered-66"></a>Track time<br  /><div class="outline-text-6" id="text-unnumbered-66">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-clock-in-set-state-to-started</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Mark STARTED when clocked in."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">catch</span> '<span class="org-constant">exit</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">cond</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>derived-mode-p 'org-agenda-mode<span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>marker <span class="org-rainbow-delimiters-depth-9">(</span>or <span class="org-rainbow-delimiters-depth-1">(</span>org-get-at-bol 'org-marker<span class="org-rainbow-delimiters-depth-1">)</span>
                           <span class="org-rainbow-delimiters-depth-1">(</span>org-agenda-error<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
               <span class="org-rainbow-delimiters-depth-8">(</span>hdmarker <span class="org-rainbow-delimiters-depth-9">(</span>or <span class="org-rainbow-delimiters-depth-1">(</span>org-get-at-bol 'org-hd-marker<span class="org-rainbow-delimiters-depth-1">)</span> marker<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
               <span class="org-rainbow-delimiters-depth-8">(</span>pos <span class="org-rainbow-delimiters-depth-9">(</span>marker-position marker<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
               <span class="org-rainbow-delimiters-depth-8">(</span>col <span class="org-rainbow-delimiters-depth-9">(</span>current-column<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
               newhead<span class="org-rainbow-delimiters-depth-7">)</span>
          <span class="org-rainbow-delimiters-depth-7">(</span>org-with-remote-undo <span class="org-rainbow-delimiters-depth-8">(</span>marker-buffer marker<span class="org-rainbow-delimiters-depth-8">)</span>
            <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-9">(</span>marker-buffer marker<span class="org-rainbow-delimiters-depth-9">)</span>
              <span class="org-rainbow-delimiters-depth-9">(</span>widen<span class="org-rainbow-delimiters-depth-9">)</span>
              <span class="org-rainbow-delimiters-depth-9">(</span>goto-char pos<span class="org-rainbow-delimiters-depth-9">)</span>
              <span class="org-rainbow-delimiters-depth-9">(</span>org-back-to-heading t<span class="org-rainbow-delimiters-depth-9">)</span>
              <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span>org-get-todo-state<span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span>org-todo <span class="org-string">"STARTED"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span>t <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>org-get-todo-state<span class="org-rainbow-delimiters-depth-7">)</span>
                  <span class="org-rainbow-delimiters-depth-7">(</span>org-todo <span class="org-string">"STARTED"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org</span>
 <span class="org-builtin">:init</span>
 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>setq org-clock-idle-time nil<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>setq org-log-done 'time<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>setq org-clock-persist t<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>setq org-clock-report-include-clocking-task t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
 <span class="org-builtin">:config</span>
 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>org-clock-persistence-insinuate<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'org-clock-in-hook 'sacha/org-clock-in-set-state-to-started<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Too many clock entries clutter up a heading.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-log-into-drawer <span class="org-string">"LOGBOOK"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-clock-into-drawer 1<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="unnumbered-67"></a>Habits<br  /><div class="outline-text-6" id="text-unnumbered-67">
<p>
I like using org-habits to track consistency. My task names tend
to be a bit long, though, so I've configured the graph column to
show a little bit more to the right.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-habit-graph-column 80<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-habit-show-habits-only-for-today nil<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
If you want to use habits, be sure to schedule your tasks and add a STYLE property with the value of <code>habit</code> to the tasks you want displayed.
</p>
</div>
</li></ul>
</div>

<div id="outline-container-unnumbered-68" class="outline-5">
<h5 id="unnumbered-68">Estimating tasks</h5>
<div class="outline-text-5" id="text-unnumbered-68">
<p>
From "Add an effort estimate on the fly when clocking in" on the
<a href="http://orgmode.org/worg/org-hacks.html">Org Hacks</a> page:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'org-clock-in-prepare-hook
          'sacha/org-mode-ask-effort<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-mode-ask-effort</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Ask for an effort estimate when clocking in."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span>org-entry-get <span class="org-rainbow-delimiters-depth-4">(</span>point<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"Effort"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>effort
           <span class="org-rainbow-delimiters-depth-6">(</span>completing-read
            <span class="org-string">"Effort: "</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>org-entry-get-multivalued-property <span class="org-rainbow-delimiters-depth-8">(</span>point<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">"Effort"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-5">(</span>equal effort <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>org-set-property <span class="org-string">"Effort"</span> effort<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-69" class="outline-5">
<h5 id="unnumbered-69">Modifying org agenda so that I can display a subset of tasks</h5>
<div class="outline-text-5" id="text-unnumbered-69">
<p>
I want to create an agenda command that displays a list of tasks by
context. That way, I can quickly preview a bunch of contexts and
decide what I feel like doing the most.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/org-agenda-limit-items</span> nil <span class="org-doc">"Number of items to show in agenda to-do views; nil if unlimited."</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>eval-after-load 'org
'<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">org-agenda-finalize-entries</span> <span class="org-rainbow-delimiters-depth-3">(</span>around sacha activate<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> sacha/org-agenda-limit-items
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>setq list <span class="org-rainbow-delimiters-depth-6">(</span>mapcar 'org-agenda-highlight-todo list<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>setq ad-return-value
              <span class="org-rainbow-delimiters-depth-6">(</span>subseq list 0 sacha/org-agenda-limit-items<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">when</span> org-agenda-before-sorting-filter-function
          <span class="org-rainbow-delimiters-depth-6">(</span>setq list <span class="org-rainbow-delimiters-depth-7">(</span>delq nil <span class="org-rainbow-delimiters-depth-8">(</span>mapcar org-agenda-before-sorting-filter-function list<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>setq ad-return-value
              <span class="org-rainbow-delimiters-depth-6">(</span>mapconcat 'identity
                         <span class="org-rainbow-delimiters-depth-7">(</span>delq nil
                               <span class="org-rainbow-delimiters-depth-8">(</span>subseq
                                <span class="org-rainbow-delimiters-depth-9">(</span>sort list 'org-entries-lessp<span class="org-rainbow-delimiters-depth-9">)</span>
                                0
                                sacha/org-agenda-limit-items<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                         <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    ad-do-it<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-70" class="outline-5">
<h5 id="unnumbered-70">Flexible scheduling of tasks</h5>
<div class="outline-text-5" id="text-unnumbered-70">
<p>
I (theoretically) want to be able to schedule tasks for dates like the first Saturday
of every month. Fortunately, <a href="http://stackoverflow.com/questions/13555385/org-mode-how-to-schedule-repeating-tasks-for-the-first-saturday-of-every-month">someone else has figured that out!</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Get this from https://raw.github.com/chenfengyuan/elisp/master/next-spec-day.el</span>
<span class="org-rainbow-delimiters-depth-1">(</span>load <span class="org-string">"~/elisp/next-spec-day.el"</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-71" class="outline-5">
<h5 id="unnumbered-71">Task dependencies</h5>
<div class="outline-text-5" id="text-unnumbered-71">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-enforce-todo-dependencies t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-track-ordered-property-with-tag t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-dim-blocked-tasks t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-unnumbered-72" class="outline-4">
<h4 id="unnumbered-72">Templates</h4>
<div class="outline-text-4" id="text-unnumbered-72">
</div><div id="outline-container-unnumbered-73" class="outline-5">
<h5 id="unnumbered-73">Structure templates</h5>
<div class="outline-text-5" id="text-unnumbered-73">
<p>
Org makes it easy to insert blocks by typing <code>&lt;s[TAB]</code>, etc.
I hardly ever use LaTeX, but I insert a lot of Emacs Lisp blocks, so I
redefine <code>&lt;l</code> to insert a Lisp block instead.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-structure-template-alist
      '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"s"</span> <span class="org-string">"#+begin_src ?\n\n#+end_src"</span> <span class="org-string">"&lt;src lang=\"?\"&gt;\n\n&lt;/src&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"e"</span> <span class="org-string">"#+begin_example\n?\n#+end_example"</span> <span class="org-string">"&lt;example&gt;\n?\n&lt;/example&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"q"</span> <span class="org-string">"#+begin_quote\n?\n#+end_quote"</span> <span class="org-string">"&lt;quote&gt;\n?\n&lt;/quote&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"v"</span> <span class="org-string">"#+BEGIN_VERSE\n?\n#+END_VERSE"</span> <span class="org-string">"&lt;verse&gt;\n?\n&lt;/verse&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"c"</span> <span class="org-string">"#+BEGIN_COMMENT\n?\n#+END_COMMENT"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"p"</span> <span class="org-string">"#+BEGIN_PRACTICE\n?\n#+END_PRACTICE"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"l"</span> <span class="org-string">"#+begin_src emacs-lisp\n?\n#+end_src"</span> <span class="org-string">"&lt;src lang=\"emacs-lisp\"&gt;\n?\n&lt;/src&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"L"</span> <span class="org-string">"#+latex: "</span> <span class="org-string">"&lt;literal style=\"latex\"&gt;?&lt;/literal&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"h"</span> <span class="org-string">"#+begin_html\n?\n#+end_html"</span> <span class="org-string">"&lt;literal style=\"html\"&gt;\n?\n&lt;/literal&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"H"</span> <span class="org-string">"#+html: "</span> <span class="org-string">"&lt;literal style=\"html\"&gt;?&lt;/literal&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"a"</span> <span class="org-string">"#+begin_ascii\n?\n#+end_ascii"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"A"</span> <span class="org-string">"#+ascii: "</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"i"</span> <span class="org-string">"#+index: ?"</span> <span class="org-string">"#+index: ?"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"I"</span> <span class="org-string">"#+include %file ?"</span> <span class="org-string">"&lt;include file=%file markup=\"?\"&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-74" class="outline-5">
<h5 id="unnumbered-74">Emacs chats, Emacs hangouts</h5>
<div class="outline-text-5" id="text-unnumbered-74">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-link-youtube-time</span> <span class="org-rainbow-delimiters-depth-2">(</span>url beg end<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Link times of the form h:mm to YouTube video at URL.</span>
<span class="org-doc">Works on region defined by BEG and END."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-rainbow-delimiters-depth-3">(</span>list <span class="org-rainbow-delimiters-depth-4">(</span>read-string <span class="org-string">"URL: "</span> <span class="org-rainbow-delimiters-depth-5">(</span>org-entry-get-with-inheritance <span class="org-string">"YOUTUBE"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>point<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>mark<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-restriction</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>narrow-to-region beg end<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> nil t<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>replace-match <span class="org-rainbow-delimiters-depth-6">(</span>concat <span class="org-string">"[["</span> url <span class="org-string">"&amp;t="</span> <span class="org-rainbow-delimiters-depth-7">(</span>match-string 1<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"h"</span> <span class="org-rainbow-delimiters-depth-7">(</span>match-string 2<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"m]["</span> <span class="org-rainbow-delimiters-depth-7">(</span>match-string 0<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"]]"</span><span class="org-rainbow-delimiters-depth-6">)</span> nil t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-unnumbered-75" class="outline-4">
<h4 id="unnumbered-75">Org agenda</h4>
<div class="outline-text-4" id="text-unnumbered-75">
</div><div id="outline-container-unnumbered-76" class="outline-5">
<h5 id="unnumbered-76">Basic configuration</h5>
<div class="outline-text-5" id="text-unnumbered-76">
<p>
I have quite a few Org files, but I keep my agenda items and TODOs in
only a few of them them for faster scanning.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-files
      <span class="org-rainbow-delimiters-depth-2">(</span>delq nil
            <span class="org-rainbow-delimiters-depth-3">(</span>mapcar <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span>x<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>and <span class="org-rainbow-delimiters-depth-6">(</span>file-exists-p x<span class="org-rainbow-delimiters-depth-6">)</span> x<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                    '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"~/personal/organizer.org"</span>
                      <span class="org-string">"~/personal/people.org"</span>
                      <span class="org-string">"~/personal/business.org"</span>
                      <span class="org-string">"~/Dropbox/public/sharing/index.org"</span>
                      <span class="org-string">"~/dropbox/public/sharing/learning.org"</span>
                      <span class="org-string">"~/code/dev/emacs-notes/tasks.org"</span>
                      <span class="org-string">"~/sachac.github.io/evil-plans/index.org"</span>
                      <span class="org-string">"~/personal/cooking.org"</span>
                      <span class="org-string">"~/personal/routines.org"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I like looking at two days at a time when I plan using the Org
agenda. I want to see my log entries, but I don't want to see
scheduled items that I've finished. I like seeing a time grid so that
I can get a sense of how appointments are spread out.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-span 2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-sticky nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-inhibit-startup t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-use-tag-inheritance t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-show-log t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-skip-scheduled-if-done t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-skip-deadline-if-done t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-skip-deadline-prewarning-if-scheduled 'pre-scheduled<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-time-grid
      '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>daily today require-timed<span class="org-rainbow-delimiters-depth-3">)</span>
       <span class="org-string">"----------------"</span>
       <span class="org-rainbow-delimiters-depth-3">(</span>800 1000 1200 1400 1600 1800<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-columns-default-format <span class="org-string">"%50ITEM %12SCHEDULED %TODO %3PRIORITY %Effort{:} %TAGS"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Some other keyboard shortcuts:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"Y"</span> 'org-agenda-todo-yesterday org-agenda-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-77" class="outline-5">
<h5 id="unnumbered-77">Starting my weeks on Saturday</h5>
<div class="outline-text-5" id="text-unnumbered-77">
<p>
I like looking at weekends as <a href="http://sachachua.com/blog/2010/11/week-beginnings/">week beginnings</a> instead, so I want the
Org agenda to start on Saturdays.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-start-on-weekday 6<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-78" class="outline-5">
<h5 id="unnumbered-78">Display projects with associated subtasks</h5>
<div class="outline-text-5" id="text-unnumbered-78">
<p>
I wanted a view that showed projects with a few subtasks underneath
them. Here's a sample of the output:
</p>

<pre class="example">
Headlines with TAGS match: +PROJECT
Press `C-u r' to search again with new search string
  organizer:  Set up communication processes for Awesome Foundation Toronto
  organizer:  TODO Announce the next pitch night
  organizer:  TODO Follow up with the winner of the previous pitch night for any news to include in the updates

  organizer:  Tidy up the house so that I can find things quickly
  organizer:  TODO Inventory all the things in closets and boxes         :@home:
  organizer:  TODO Drop things off for donation                       :@errands:

  organizer:  Learn how to develop for Android devices
</pre>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-agenda-project-agenda</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Return the project headline and up to `</span><span class="org-doc"><span class="org-constant">sacha/org-agenda-limit-items</span></span><span class="org-doc">' tasks."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>marker <span class="org-rainbow-delimiters-depth-6">(</span>org-agenda-new-marker<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>heading
            <span class="org-rainbow-delimiters-depth-6">(</span>org-agenda-format-item <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-7">(</span>org-get-heading<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>org-get-category<span class="org-rainbow-delimiters-depth-7">)</span> nil<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-restrict t<span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-restrict-begin <span class="org-rainbow-delimiters-depth-6">(</span>point<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-restrict-end <span class="org-rainbow-delimiters-depth-6">(</span>org-end-of-subtree 'invisible<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-comment-delimiter">;; </span><span class="org-comment">Find the TODO items in this subtree</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>list <span class="org-rainbow-delimiters-depth-6">(</span>org-agenda-get-day-entries <span class="org-rainbow-delimiters-depth-7">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>calendar-current-date<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-builtin">:todo</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-add-props heading
          <span class="org-rainbow-delimiters-depth-5">(</span>list 'face 'defaults
                'done-face 'org-agenda-done
                'undone-face 'default
                'mouse-face 'highlight
                'org-not-done-regexp org-not-done-regexp
                'org-todo-regexp org-todo-regexp
                'org-complex-heading-regexp org-complex-heading-regexp
                'help-echo
                <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"mouse-2 or RET jump to org file %s"</span>
                        <span class="org-rainbow-delimiters-depth-7">(</span>abbreviate-file-name
                         <span class="org-rainbow-delimiters-depth-8">(</span>or <span class="org-rainbow-delimiters-depth-9">(</span>buffer-file-name <span class="org-rainbow-delimiters-depth-1">(</span>buffer-base-buffer<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                             <span class="org-rainbow-delimiters-depth-9">(</span>buffer-name <span class="org-rainbow-delimiters-depth-1">(</span>buffer-base-buffer<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        'org-marker marker
        'org-hd-marker marker
        'org-category <span class="org-rainbow-delimiters-depth-5">(</span>org-get-category<span class="org-rainbow-delimiters-depth-5">)</span>
        'type <span class="org-string">"tagsmatch"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>concat heading <span class="org-string">"\n"</span>
              <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-finalize-entries list<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-agenda-projects-and-tasks</span> <span class="org-rainbow-delimiters-depth-2">(</span>match<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-doc">"Show TODOs for all `</span><span class="org-doc"><span class="org-constant">org-agenda-files</span></span><span class="org-doc">' headlines matching MATCH."</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"MString: "</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>todo-only nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> org-agenda-overriding-arguments
          <span class="org-rainbow-delimiters-depth-4">(</span>setq todo-only <span class="org-rainbow-delimiters-depth-5">(</span>car org-agenda-overriding-arguments<span class="org-rainbow-delimiters-depth-5">)</span>
                match <span class="org-rainbow-delimiters-depth-5">(</span>nth 1 org-agenda-overriding-arguments<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-tags-match-list-sublevels
              org-tags-match-list-sublevels<span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span>completion-ignore-case t<span class="org-rainbow-delimiters-depth-5">)</span>
             rtn rtnall files file pos matcher
             buffer<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-5">(</span>and <span class="org-rainbow-delimiters-depth-6">(</span>stringp match<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>not <span class="org-rainbow-delimiters-depth-7">(</span>string-match <span class="org-string">"\\S-"</span> match<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq match nil<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>setq matcher <span class="org-rainbow-delimiters-depth-5">(</span>org-make-tags-matcher match<span class="org-rainbow-delimiters-depth-5">)</span>
              match <span class="org-rainbow-delimiters-depth-5">(</span>car matcher<span class="org-rainbow-delimiters-depth-5">)</span> matcher <span class="org-rainbow-delimiters-depth-5">(</span>cdr matcher<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">catch</span> '<span class="org-constant">exit</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> org-agenda-sticky
              <span class="org-rainbow-delimiters-depth-6">(</span>setq org-agenda-buffer-name
                    <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-8">(</span>stringp match<span class="org-rainbow-delimiters-depth-8">)</span>
                        <span class="org-rainbow-delimiters-depth-8">(</span>format <span class="org-string">"*Org Agenda(%s:%s)*"</span>
                                <span class="org-rainbow-delimiters-depth-9">(</span>or org-keys <span class="org-rainbow-delimiters-depth-1">(</span>or <span class="org-rainbow-delimiters-depth-2">(</span>and todo-only <span class="org-string">"M"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-string">"m"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span> match<span class="org-rainbow-delimiters-depth-8">)</span>
                      <span class="org-rainbow-delimiters-depth-8">(</span>format <span class="org-string">"*Org Agenda(%s)*"</span> <span class="org-rainbow-delimiters-depth-9">(</span>or <span class="org-rainbow-delimiters-depth-1">(</span>and todo-only <span class="org-string">"M"</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"m"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-prepare <span class="org-rainbow-delimiters-depth-6">(</span>concat <span class="org-string">"TAGS "</span> match<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>org-compile-prefix-format 'tags<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>org-set-sorting-strategy 'tags<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq org-agenda-query-string match<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq org-agenda-redo-command
                <span class="org-rainbow-delimiters-depth-6">(</span>list 'org-tags-view `<span class="org-rainbow-delimiters-depth-7">(</span>quote ,todo-only<span class="org-rainbow-delimiters-depth-7">)</span>
                      <span class="org-rainbow-delimiters-depth-7">(</span>list 'if 'current-prefix-arg nil `<span class="org-rainbow-delimiters-depth-8">(</span>quote ,org-agenda-query-string<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq files <span class="org-rainbow-delimiters-depth-6">(</span>org-agenda-files nil 'ifmode<span class="org-rainbow-delimiters-depth-6">)</span>
                rtnall nil<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-6">(</span>setq file <span class="org-rainbow-delimiters-depth-7">(</span>pop files<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">catch</span> '<span class="org-constant">nextfile</span>
              <span class="org-rainbow-delimiters-depth-7">(</span>org-check-agenda-file file<span class="org-rainbow-delimiters-depth-7">)</span>
              <span class="org-rainbow-delimiters-depth-7">(</span>setq buffer <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-9">(</span>file-exists-p file<span class="org-rainbow-delimiters-depth-9">)</span>
                               <span class="org-rainbow-delimiters-depth-9">(</span>org-get-agenda-file-buffer file<span class="org-rainbow-delimiters-depth-9">)</span>
                             <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-warning">error</span> <span class="org-string">"No such file %s"</span> file<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
              <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-8">(</span>not buffer<span class="org-rainbow-delimiters-depth-8">)</span>
                  <span class="org-comment-delimiter">;; </span><span class="org-comment">If file does not exist, error message to agenda</span>
                  <span class="org-rainbow-delimiters-depth-8">(</span>setq rtn <span class="org-rainbow-delimiters-depth-9">(</span>list
                             <span class="org-rainbow-delimiters-depth-1">(</span>format <span class="org-string">"ORG-AGENDA-ERROR: No such org-file %s"</span> file<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                        rtnall <span class="org-rainbow-delimiters-depth-9">(</span>append rtnall rtn<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">with-current-buffer</span> buffer
                  <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-1">(</span>derived-mode-p 'org-mode<span class="org-rainbow-delimiters-depth-1">)</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-warning">error</span> <span class="org-string">"Agenda file %s is not in `</span><span class="org-string"><span class="org-constant">org-mode</span></span><span class="org-string">'"</span> file<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                  <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">save-excursion</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">save-restriction</span>
                      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> org-agenda-restrict
                          <span class="org-rainbow-delimiters-depth-3">(</span>narrow-to-region org-agenda-restrict-begin
                                            org-agenda-restrict-end<span class="org-rainbow-delimiters-depth-3">)</span>
                        <span class="org-rainbow-delimiters-depth-3">(</span>widen<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                      <span class="org-rainbow-delimiters-depth-2">(</span>setq rtn <span class="org-rainbow-delimiters-depth-3">(</span>org-scan-tags 'sacha/org-agenda-project-agenda matcher todo-only<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                      <span class="org-rainbow-delimiters-depth-2">(</span>setq rtnall <span class="org-rainbow-delimiters-depth-3">(</span>append rtnall rtn<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> org-agenda-overriding-header
              <span class="org-rainbow-delimiters-depth-6">(</span>insert <span class="org-rainbow-delimiters-depth-7">(</span>org-add-props <span class="org-rainbow-delimiters-depth-8">(</span>copy-sequence org-agenda-overriding-header<span class="org-rainbow-delimiters-depth-8">)</span>
                          nil 'face 'org-agenda-structure<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>insert <span class="org-string">"Headlines with TAGS match: "</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>add-text-properties <span class="org-rainbow-delimiters-depth-7">(</span>point-min<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>1- <span class="org-rainbow-delimiters-depth-8">(</span>point<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                                 <span class="org-rainbow-delimiters-depth-7">(</span>list 'face 'org-agenda-structure
                                       'short-heading
                                       <span class="org-rainbow-delimiters-depth-8">(</span>concat <span class="org-string">"Match: "</span> match<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>setq pos <span class="org-rainbow-delimiters-depth-7">(</span>point<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>insert match <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>add-text-properties pos <span class="org-rainbow-delimiters-depth-7">(</span>1- <span class="org-rainbow-delimiters-depth-8">(</span>point<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>list 'face 'org-warning<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>setq pos <span class="org-rainbow-delimiters-depth-7">(</span>point<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">unless</span> org-agenda-multi
              <span class="org-rainbow-delimiters-depth-7">(</span>insert <span class="org-string">"Press `C-u r' to search again with new search string\n"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>add-text-properties pos <span class="org-rainbow-delimiters-depth-7">(</span>1- <span class="org-rainbow-delimiters-depth-8">(</span>point<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>list 'face 'org-agenda-structure<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-mark-header-line <span class="org-rainbow-delimiters-depth-6">(</span>point-min<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">when</span> rtnall
            <span class="org-rainbow-delimiters-depth-6">(</span>insert <span class="org-rainbow-delimiters-depth-7">(</span>mapconcat 'identity rtnall <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>goto-char <span class="org-rainbow-delimiters-depth-6">(</span>point-min<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>or org-agenda-multi <span class="org-rainbow-delimiters-depth-6">(</span>org-agenda-fit-window-to-buffer<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>add-text-properties <span class="org-rainbow-delimiters-depth-6">(</span>point-min<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>point-max<span class="org-rainbow-delimiters-depth-6">)</span>
                               `<span class="org-rainbow-delimiters-depth-6">(</span>org-agenda-type tags
                                                 org-last-args <span class="org-rainbow-delimiters-depth-7">(</span>,todo-only ,match<span class="org-rainbow-delimiters-depth-7">)</span>
                                                 org-redo-cmd ,org-agenda-redo-command
                                                 org-series-cmd ,org-cmd<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-finalize<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq buffer-read-only t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-79" class="outline-5">
<h5 id="unnumbered-79">Org agenda custom commands</h5>
<div class="outline-text-5" id="text-unnumbered-79">
<p>
There are quite a few custom commands here, and I often forget to use
them. =) But it's good to define them, and over time, I'll get the
hang of using these more!
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">Key</td>
<td class="left">Description</td>
</tr>

<tr>
<td class="left">.</td>
<td class="left">What am I waiting for?</td>
</tr>

<tr>
<td class="left">T</td>
<td class="left">Not really an agenda command - shows the to-do tree in the current file</td>
</tr>

<tr>
<td class="left">b</td>
<td class="left">Shows business-related tasks</td>
</tr>

<tr>
<td class="left">o</td>
<td class="left">Shows personal tasks and miscellaneous tasks (o: organizer)</td>
</tr>

<tr>
<td class="left">w</td>
<td class="left">Show all tasks for the upcoming week</td>
</tr>

<tr>
<td class="left">W</td>
<td class="left">Show all tasks for the upcoming week, aside from the routine ones</td>
</tr>

<tr>
<td class="left">g &#x2026;</td>
<td class="left">Show tasks by context: b - business; c - coding; w - writing; p - phone; d - drawing, h - home</td>
</tr>

<tr>
<td class="left">0</td>
<td class="left">Show common contexts with up to 3 tasks each, so that I can choose what I feel like working on</td>
</tr>

<tr>
<td class="left">) (shift-0)</td>
<td class="left">Show common contexts with all the tasks associated with them</td>
</tr>

<tr>
<td class="left">9</td>
<td class="left">Show common contexts with up to 3 unscheduled tasks each</td>
</tr>

<tr>
<td class="left">( (shift-9)</td>
<td class="left">Show common contexts with all the unscheduled tasks associated with them</td>
</tr>

<tr>
<td class="left">d</td>
<td class="left">Timeline for today (agenda, clock summary)</td>
</tr>

<tr>
<td class="left">u</td>
<td class="left">Unscheduled tasks to do if I have free time</td>
</tr>

<tr>
<td class="left">U</td>
<td class="left">Unscheduled tasks that are not part of projects</td>
</tr>

<tr>
<td class="left">P</td>
<td class="left">Tasks by priority</td>
</tr>

<tr>
<td class="left">p</td>
<td class="left">My projects</td>
</tr>

<tr>
<td class="left">2</td>
<td class="left">Projects with tasks</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/org-agenda-contexts</span>
    '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>tags-todo <span class="org-string">"+@phone"</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>tags-todo <span class="org-string">"+@work"</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>tags-todo <span class="org-string">"+@drawing"</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>tags-todo <span class="org-string">"+@coding"</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>tags-todo <span class="org-string">"+@writing"</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>tags-todo <span class="org-string">"+@computer"</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>tags-todo <span class="org-string">"+@home"</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>tags-todo <span class="org-string">"+@errands"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-doc">"Usual list of contexts."</span><span class="org-rainbow-delimiters-depth-1">)</span>
  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-agenda-skip-scheduled</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>org-agenda-skip-entry-if 'scheduled 'deadline 'regexp <span class="org-string">"\n]+&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
  <span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-custom-commands
        `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"T"</span> tags-todo <span class="org-string">"TODO=\"TODO\"-goal-routine-SCHEDULED={.+}"</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"b"</span> todo <span class="org-string">""</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-files '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"~/personal/business.org"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"B"</span> todo <span class="org-string">""</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-files '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"~/Dropbox/books"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"o"</span> todo <span class="org-string">""</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-files '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"~/personal/organizer.org"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"c"</span> todo <span class="org-string">""</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-prefix-format <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-cmp-user-defined 'sacha/org-sort-agenda-items-todo<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-comment-delimiter">;; </span><span class="org-comment">Weekly review</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"w"</span> <span class="org-string">"Weekly review"</span> agenda <span class="org-string">""</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-span 7<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-log-mode 1<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"W"</span> <span class="org-string">"Weekly review sans routines"</span> agenda <span class="org-string">""</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-span 7<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-log-mode 1<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-tag-filter-preset '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"-routine"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"2"</span> <span class="org-string">"Bi-weekly review"</span> agenda <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-span 14<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-log-mode 1<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"gb"</span> <span class="org-string">"Business"</span> todo <span class="org-string">""</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-files '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"~/personal/business.org"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"gc"</span> <span class="org-string">"Coding"</span> tags-todo <span class="org-string">"@coding"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"gw"</span> <span class="org-string">"Writing"</span> tags-todo <span class="org-string">"@writing"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"gp"</span> <span class="org-string">"Publishing"</span> tags-todo <span class="org-string">"@publishing"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"gP"</span> <span class="org-string">"Phone"</span> tags-todo <span class="org-string">"@phone"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"gd"</span> <span class="org-string">"Drawing"</span> tags-todo <span class="org-string">"@drawing"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"gh"</span> <span class="org-string">"Home"</span> tags-todo <span class="org-string">"@home"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ge"</span> <span class="org-string">"Errands"</span> tags-todo <span class="org-string">"@errands"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"0"</span> <span class="org-string">"Top 3 by context"</span>
           ,sacha/org-agenda-contexts
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-sorting-strategy '<span class="org-rainbow-delimiters-depth-6">(</span>priority-up effort-down<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>sacha/org-agenda-limit-items 3<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">")"</span> <span class="org-string">"All by context"</span>
           ,sacha/org-agenda-contexts
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-sorting-strategy '<span class="org-rainbow-delimiters-depth-6">(</span>priority-down effort-down<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>sacha/org-agenda-limit-items nil<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"9"</span> <span class="org-string">"Unscheduled top 3 by context"</span>
           ,sacha/org-agenda-contexts
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-skip-function 'sacha/org-agenda-skip-scheduled<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-sorting-strategy '<span class="org-rainbow-delimiters-depth-6">(</span>priority-down effort-down<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>sacha/org-agenda-limit-items 3<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"("</span> <span class="org-string">"All unscheduled by context"</span>
           ,sacha/org-agenda-contexts
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-skip-function 'sacha/org-agenda-skip-scheduled<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-sorting-strategy '<span class="org-rainbow-delimiters-depth-6">(</span>priority-down effort-down<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"d"</span> <span class="org-string">"Timeline for today"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>agenda <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-ndays 1<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-show-log t<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-log-mode-items '<span class="org-rainbow-delimiters-depth-6">(</span>clock closed<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-clockreport-mode t<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-entry-types '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"."</span> <span class="org-string">"Waiting for"</span> todo <span class="org-string">"WAITING"</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"u"</span> <span class="org-string">"Unscheduled tasks"</span> tags-todo <span class="org-string">"-someday-TODO=\"SOMEDAY\"-TODO=\"DELEGATED\"-TODO=\"WAITING\"-project"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-skip-function 'sacha/org-agenda-skip-scheduled<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-tags-exclude-from-inheritance '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"project"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-overriding-header <span class="org-string">"Unscheduled TODO entries: "</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-columns-default-format <span class="org-string">"%50ITEM %TODO %3PRIORITY %Effort{:} %TAGS"</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-sorting-strategy '<span class="org-rainbow-delimiters-depth-6">(</span>todo-state-up priority-down effort-up tag-up category-keep<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"U"</span> <span class="org-string">"Unscheduled tasks outside projects"</span> tags-todo <span class="org-string">"-project"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-skip-function 'sacha/org-agenda-skip-scheduled<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-tags-exclude-from-inheritance nil<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-overriding-header <span class="org-string">"Unscheduled TODO entries outside projects: "</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-sorting-strategy '<span class="org-rainbow-delimiters-depth-6">(</span>todo-state-up priority-down tag-up category-keep effort-down<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"P"</span> <span class="org-string">"By priority"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>tags-todo <span class="org-string">"+PRIORITY=\"A\""</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>tags-todo <span class="org-string">"+PRIORITY=\"B\""</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>tags-todo <span class="org-string">"+PRIORITY=\"\""</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>tags-todo <span class="org-string">"+PRIORITY=\"C\""</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-prefix-format <span class="org-string">"%-10c %-10T %e "</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-sorting-strategy '<span class="org-rainbow-delimiters-depth-6">(</span>priority-down tag-up category-keep effort-down<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"pp"</span> tags <span class="org-string">"+project-someday-TODO=\"DONE\""</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-tags-exclude-from-inheritance '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"project"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-sorting-strategy '<span class="org-rainbow-delimiters-depth-6">(</span>priority-down tag-up category-keep effort-down<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"p."</span> tags <span class="org-string">"+project-TODO=\"DONE\""</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-tags-exclude-from-inheritance '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"project"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-sorting-strategy '<span class="org-rainbow-delimiters-depth-6">(</span>priority-down tag-up category-keep effort-down<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"S"</span> tags-todo <span class="org-string">"TODO=\"STARTED\""</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C"</span> <span class="org-string">"Cooking"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>tags <span class="org-string">"vegetables"</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>tags <span class="org-string">"chicken"</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>tags <span class="org-string">"beef"</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>tags <span class="org-string">"pork"</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>tags <span class="org-string">"other"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-files '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"~/personal/cooking.org"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-view-columns-initially t<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>org-agenda-sorting-strategy '<span class="org-rainbow-delimiters-depth-6">(</span>scheduled-up time-down todo-state-up<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
           <span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"2"</span> <span class="org-string">"List projects with tasks"</span> sacha/org-agenda-projects-and-tasks
           <span class="org-string">"+PROJECT"</span>
             <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>sacha/org-agenda-limit-items 3<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"&lt;apps&gt; a"</span> 'org-agenda<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-80" class="outline-5">
<h5 id="unnumbered-80">Make it easy to mark a task as done</h5>
<div class="outline-text-5" id="text-unnumbered-80">
<p>
Great for quickly going through the to-do list. Gets rid of one
extra keystroke. ;)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-agenda-done</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> arg<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Mark current TODO as done.</span>
<span class="org-doc">This changes the line at point, all other lines in the agenda referring to</span>
<span class="org-doc">the same tree node, and the headline of the tree node in the Org-mode file."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-agenda-todo <span class="org-string">"DONE"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Override the key definition for org-exit</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key org-agenda-mode-map <span class="org-string">"x"</span> 'sacha/org-agenda-done<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-81" class="outline-5">
<h5 id="unnumbered-81">Make it easy to mark a task as done and create a follow-up task</h5>
<div class="outline-text-5" id="text-unnumbered-81">
<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-agenda-mark-done-and-add-followup</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-doc">"Mark the current TODO as done and add another task after it.</span>
<span class="org-doc">Creates it at the same level as the previous task, so it's better to use</span>
<span class="org-doc">this with to-do items than with projects or headings."</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>org-agenda-todo <span class="org-string">"DONE"</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>org-agenda-switch-to<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>org-capture 0 <span class="org-string">"t"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Override the key definition</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key org-agenda-mode-map <span class="org-string">"X"</span> 'sacha/org-agenda-mark-done-and-add-followup<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-82" class="outline-5">
<h5 id="unnumbered-82">Capture something based on the agenda</h5>
<div class="outline-text-5" id="text-unnumbered-82">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-agenda-new</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Create a new note or task at the current agenda item.</span>
<span class="org-doc">Creates it at the same level as the previous task, so it's better to use</span>
<span class="org-doc">this with to-do items than with projects or headings."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-agenda-switch-to<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-capture 0<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">New key assignment</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key org-agenda-mode-map <span class="org-string">"N"</span> 'sacha/org-agenda-new<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-83" class="outline-5">
<h5 id="unnumbered-83">Sorting by date and priority</h5>
<div class="outline-text-5" id="text-unnumbered-83">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-sorting-strategy
      '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>agenda time-up priority-down tag-up effort-up category-keep<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span>todo user-defined-up todo-state-up priority-down effort-up<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span>tags user-defined-up<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span>search category-keep<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-agenda-cmp-user-defined 'sacha/org-sort-agenda-items-user-defined<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">cl</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-get-context</span> <span class="org-rainbow-delimiters-depth-2">(</span>txt<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Find the context."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>car <span class="org-rainbow-delimiters-depth-3">(</span>member-if
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span>item<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>string-match <span class="org-string">"@"</span> item<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>get-text-property 1 'tags txt<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-compare-dates</span> <span class="org-rainbow-delimiters-depth-2">(</span>a b<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Return 1 if A should go after B, -1 if B should go after A, or 0 if a = b."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">cond</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>and <span class="org-rainbow-delimiters-depth-5">(</span>= a 0<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>= b 0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>= a 0<span class="org-rainbow-delimiters-depth-4">)</span> 1<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>= b 0<span class="org-rainbow-delimiters-depth-4">)</span> -1<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>&gt; a b<span class="org-rainbow-delimiters-depth-4">)</span> 1<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>&lt; a b<span class="org-rainbow-delimiters-depth-4">)</span> -1<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>t nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-complete-cmp</span> <span class="org-rainbow-delimiters-depth-2">(</span>a b<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>state-a <span class="org-rainbow-delimiters-depth-5">(</span>or <span class="org-rainbow-delimiters-depth-6">(</span>get-text-property 1 'todo-state a<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>state-b <span class="org-rainbow-delimiters-depth-5">(</span>or <span class="org-rainbow-delimiters-depth-6">(</span>get-text-property 1 'todo-state b<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>or
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>member state-a org-done-keywords-for-agenda<span class="org-rainbow-delimiters-depth-5">)</span> 1<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>member state-b org-done-keywords-for-agenda<span class="org-rainbow-delimiters-depth-5">)</span> -1<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-date-cmp</span> <span class="org-rainbow-delimiters-depth-2">(</span>a b<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>sched-a <span class="org-rainbow-delimiters-depth-5">(</span>or <span class="org-rainbow-delimiters-depth-6">(</span>get-text-property 1 'org-scheduled a<span class="org-rainbow-delimiters-depth-6">)</span> 0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>sched-b <span class="org-rainbow-delimiters-depth-5">(</span>or <span class="org-rainbow-delimiters-depth-6">(</span>get-text-property 1 'org-scheduled b<span class="org-rainbow-delimiters-depth-6">)</span> 0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>deadline-a <span class="org-rainbow-delimiters-depth-5">(</span>or <span class="org-rainbow-delimiters-depth-6">(</span>get-text-property 1 'org-deadline a<span class="org-rainbow-delimiters-depth-6">)</span> 0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>deadline-b <span class="org-rainbow-delimiters-depth-5">(</span>or <span class="org-rainbow-delimiters-depth-6">(</span>get-text-property 1 'org-deadline b<span class="org-rainbow-delimiters-depth-6">)</span> 0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>or
     <span class="org-rainbow-delimiters-depth-4">(</span>sacha/org-compare-dates
      <span class="org-rainbow-delimiters-depth-5">(</span>sacha/org-min-date sched-a deadline-a<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>sacha/org-min-date sched-b deadline-b<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-min-date</span> <span class="org-rainbow-delimiters-depth-2">(</span>a b<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Return the smaller of A or B, except for 0."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>funcall <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>and <span class="org-rainbow-delimiters-depth-5">(</span>&gt; a 0<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>&gt; b 0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> 'min 'max<span class="org-rainbow-delimiters-depth-3">)</span> a b<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-sort-agenda-items-user-defined</span> <span class="org-rainbow-delimiters-depth-2">(</span>a b<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">compare by deadline, then scheduled date; done tasks are listed at the very bottom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>or
   <span class="org-rainbow-delimiters-depth-3">(</span>sacha/org-complete-cmp a b<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>sacha/org-date-cmp a b<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-context-cmp</span> <span class="org-rainbow-delimiters-depth-2">(</span>a b<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Compare CONTEXT-A and CONTEXT-B."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>context-a <span class="org-rainbow-delimiters-depth-5">(</span>sacha/org-get-context a<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>context-b <span class="org-rainbow-delimiters-depth-5">(</span>sacha/org-get-context b<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">cond</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>null context-a<span class="org-rainbow-delimiters-depth-5">)</span> +1<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>null context-b<span class="org-rainbow-delimiters-depth-5">)</span> -1<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>string&lt; context-a context-b<span class="org-rainbow-delimiters-depth-5">)</span> -1<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>string&lt; context-b context-a<span class="org-rainbow-delimiters-depth-5">)</span> +1<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>t nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-sort-agenda-items-todo</span> <span class="org-rainbow-delimiters-depth-2">(</span>a b<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>or
   <span class="org-rainbow-delimiters-depth-3">(</span>org-cmp-time a b<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>sacha/org-complete-cmp a b<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>sacha/org-context-cmp a b<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>sacha/org-date-cmp a b<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>org-cmp-todo-state a b<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>org-cmp-priority a b<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>org-cmp-effort a b<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-84" class="outline-5">
<h5 id="unnumbered-84">Preventing things from falling through the cracks</h5>
<div class="outline-text-5" id="text-unnumbered-84">
<p>
This helps me keep track of unscheduled tasks, because I sometimes
forget to assign tasks a date. I also want to keep track of stuck projects.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-agenda-list-unscheduled</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;rest</span> ignore<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Create agenda view for tasks that are unscheduled and not done."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-agenda-todo-ignore-with-date t<span class="org-rainbow-delimiters-depth-4">)</span>
   <span class="org-rainbow-delimiters-depth-4">(</span>org-agenda-overriding-header <span class="org-string">"List of unscheduled tasks: "</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-agenda-get-todos<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-stuck-projects
      '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"+PROJECT-MAYBE-DONE"</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"TODO"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        nil
        <span class="org-string">"\\&lt;IGNORE\\&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-unnumbered-85" class="outline-4">
<h4 id="unnumbered-85">Reviews</h4>
<div class="outline-text-4" id="text-unnumbered-85">
</div><div id="outline-container-unnumbered-86" class="outline-5">
<h5 id="unnumbered-86">Weekly review</h5>
<div class="outline-text-5" id="text-unnumbered-86">
<p>
<a id="weekly-review"></a>
</p>

<p>
:CUSTOM_ID: weekly-review
</p>

<p>
I regularly post <a href="http://sachachua.com/blog/category/weekly">weekly reviews</a> to keep track of what I'm done, remind me to plan for the upcoming week, and list blog posts, sketches, and links. I
</p>


<p>
I want to try out grouping tasks by topic first, then breaking it
down into previous/next week.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/weekly-review-line-regexp</span>
  <span class="org-string">"^  </span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">:]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">: +</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">Sched[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">:]+: +</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">?TODO </span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">[      ]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">:[[:alnum:]_@#%:]+:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">?[        ]*$"</span>
  <span class="org-doc">"Regular expression matching lines to include."</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/weekly-done-line-regexp</span>
  <span class="org-string">"^  </span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">:]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">: +.*?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">Clocked</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Closed</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">:.*?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">TODO</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">DONE</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"> </span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">[       ]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">:[[:alnum:]_@#%:]+:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">?[        ]*$"</span>
  <span class="org-doc">"Regular expression matching lines to include as completed tasks."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/quantified-get-hours</span> <span class="org-rainbow-delimiters-depth-2">(</span>category time-summary<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Return the number of hours based on the time summary."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>stringp category<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>assoc category time-summary<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>/ <span class="org-rainbow-delimiters-depth-5">(</span>cdr <span class="org-rainbow-delimiters-depth-6">(</span>assoc category time-summary<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> 3600.0<span class="org-rainbow-delimiters-depth-4">)</span> 0<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>apply '+ <span class="org-rainbow-delimiters-depth-4">(</span>mapcar <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">(</span>x<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours x time-summary<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> category<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">_sacha/extract-tasks-from-agenda</span> <span class="org-rainbow-delimiters-depth-2">(</span>string matchers prefix line-re<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-temp-buffer</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>insert string<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-4">(</span>re-search-forward line-re nil t<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>temp-list matchers<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">while</span> temp-list
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">save-match-data</span>
                <span class="org-rainbow-delimiters-depth-8">(</span>string-match <span class="org-rainbow-delimiters-depth-9">(</span>car <span class="org-rainbow-delimiters-depth-1">(</span>car temp-list<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-rainbow-delimiters-depth-9">(</span>match-string 1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
              <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">progn</span>
                <span class="org-rainbow-delimiters-depth-8">(</span>add-to-list <span class="org-rainbow-delimiters-depth-9">(</span>cdr <span class="org-rainbow-delimiters-depth-1">(</span>car temp-list<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-rainbow-delimiters-depth-9">(</span>concat prefix <span class="org-rainbow-delimiters-depth-1">(</span>match-string 3<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span> t<span class="org-rainbow-delimiters-depth-8">)</span>
                <span class="org-rainbow-delimiters-depth-8">(</span>setq temp-list nil<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>setq temp-list <span class="org-rainbow-delimiters-depth-7">(</span>cdr temp-list<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">ert-deftest</span> <span class="org-function-name">_sacha/extract-tasks-from-agenda</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>list-a list-b <span class="org-rainbow-delimiters-depth-4">(</span>line-re <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">:]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string"> </span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>_sacha/extract-tasks-from-agenda
     <span class="org-string">"listA: Task 1\nother: Task 2\nlistA: Task 3"</span>
     '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"listA"</span> . list-a<span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"."</span> . list-b<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-string">"- [ ] "</span>
     line-re<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>should <span class="org-rainbow-delimiters-depth-4">(</span>equal list-a '<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"- [ ] Task 1"</span> <span class="org-string">"- [ ] Task 3"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>should <span class="org-rainbow-delimiters-depth-4">(</span>equal list-b '<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"- [ ] Task 2"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">_sacha/get-upcoming-tasks</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-window-excursion</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>org-agenda nil <span class="org-string">"W"</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>_sacha/extract-tasks-from-agenda <span class="org-rainbow-delimiters-depth-4">(</span>buffer-string<span class="org-rainbow-delimiters-depth-4">)</span>
                                        '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"routines"</span> . ignore<span class="org-rainbow-delimiters-depth-5">)</span>
                                          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"business"</span> . business-next<span class="org-rainbow-delimiters-depth-5">)</span>
                                          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"people"</span> . relationships-next<span class="org-rainbow-delimiters-depth-5">)</span>
                                          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"tasks"</span> . emacs-next<span class="org-rainbow-delimiters-depth-5">)</span>
                                          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"."</span> . life-next<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                        <span class="org-string">"  - [ ] "</span>
                                        sacha/weekly-review-line-regexp<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">_sacha/get-previous-tasks</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>string<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-window-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-agenda nil <span class="org-string">"W"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-agenda-later -1<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-agenda-log-mode 16<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>setq string <span class="org-rainbow-delimiters-depth-5">(</span>buffer-string<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">Get any completed tasks from the current week as well</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-agenda-later 1<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-agenda-log-mode 16<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>setq string <span class="org-rainbow-delimiters-depth-5">(</span>concat string <span class="org-string">"\n"</span> <span class="org-rainbow-delimiters-depth-6">(</span>buffer-string<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>_sacha/extract-tasks-from-agenda string
                                        '<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"routines"</span> . ignore<span class="org-rainbow-delimiters-depth-6">)</span>
                                          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"business"</span> . business<span class="org-rainbow-delimiters-depth-6">)</span>
                                          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"people"</span> . relationships<span class="org-rainbow-delimiters-depth-6">)</span>
                                          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"tasks"</span> . emacs<span class="org-rainbow-delimiters-depth-6">)</span>
                                          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"."</span> . life<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
                                        <span class="org-string">"  - [X] "</span>
                                        sacha/weekly-done-line-regexp<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-summarize-focus-areas</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Summarize previous and upcoming tasks as a list."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>base-date <span class="org-rainbow-delimiters-depth-5">(</span>apply 'encode-time <span class="org-rainbow-delimiters-depth-6">(</span>org-read-date-analyze <span class="org-string">"-fri"</span> nil '<span class="org-rainbow-delimiters-depth-7">(</span>0 0 0<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        business relationships life business-next relationships-next life-next string emacs emacs-next
        start end time-summary biz-time ignore<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq start <span class="org-rainbow-delimiters-depth-4">(</span>format-time-string <span class="org-string">"%Y-%m-%d"</span> <span class="org-rainbow-delimiters-depth-5">(</span>days-to-time <span class="org-rainbow-delimiters-depth-6">(</span>- <span class="org-rainbow-delimiters-depth-7">(</span>time-to-number-of-days base-date<span class="org-rainbow-delimiters-depth-7">)</span> 6<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq end <span class="org-rainbow-delimiters-depth-4">(</span>format-time-string <span class="org-string">"%Y-%m-%d"</span> <span class="org-rainbow-delimiters-depth-5">(</span>days-to-time <span class="org-rainbow-delimiters-depth-6">(</span>1+ <span class="org-rainbow-delimiters-depth-7">(</span>time-to-number-of-days base-date<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq time-summary <span class="org-rainbow-delimiters-depth-4">(</span>quantified-summarize-time start end<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq biz-time <span class="org-rainbow-delimiters-depth-4">(</span>sacha/quantified-get-hours <span class="org-string">"Business"</span> time-summary<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>_sacha/get-upcoming-tasks<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>_sacha/get-previous-tasks<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq string
          <span class="org-rainbow-delimiters-depth-4">(</span>concat
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"- *Business* (%.1fh - %d%%)\n"</span> biz-time <span class="org-rainbow-delimiters-depth-6">(</span>/ biz-time 1.68<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat 'identity business <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">"\n"</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat 'identity business-next <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-string">"\n"</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"  - *Earn* (%.1fh - %d%% of Business)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Business - Earn"</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>sacha/quantified-get-hours <span class="org-string">"Business - Earn"</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>* 0.01 biz-time<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"  - *Build* (%.1fh - %d%% of Business)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Business - Build"</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>sacha/quantified-get-hours <span class="org-string">"Business - Build"</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>* 0.01 biz-time<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"    - *Drawing* (%.1fh)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours '<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">"Business - Build - Drawing"</span>
                                                 <span class="org-string">"Business - Build - Book review"</span><span class="org-rainbow-delimiters-depth-7">)</span>  time-summary<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"    - *Delegation* (%.1fh)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Business - Build - Delegation"</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"    - *Packaging* (%.1fh)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Business - Build - Packaging"</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"    - *Paperwork* (%.1fh)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Business - Build - Paperwork"</span>  time-summary<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"  - *Connect* (%.1fh - %d%% of Business)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Business - Connect"</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>sacha/quantified-get-hours <span class="org-string">"Business - Connect"</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>* 0.01 biz-time<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"- *Relationships* (%.1fh - %d%%)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours '<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">"Discretionary - Social"</span>
                                                 <span class="org-string">"Discretionary - Family"</span><span class="org-rainbow-delimiters-depth-7">)</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>sacha/quantified-get-hours '<span class="org-rainbow-delimiters-depth-8">(</span><span class="org-string">"Discretionary - Social"</span>
                                                    <span class="org-string">"Discretionary - Family"</span><span class="org-rainbow-delimiters-depth-8">)</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span> 1.68<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat 'identity relationships <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">"\n"</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat 'identity relationships-next <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">"\n"</span>
           <span class="org-string">"\n"</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"- *Discretionary - Productive* (%.1fh - %d%%)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Discretionary - Productive"</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>sacha/quantified-get-hours <span class="org-string">"Discretionary - Productive"</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span> 1.68<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"  - *Emacs* (%.1fh - %d%% of all)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Discretionary - Productive - Emacs"</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>sacha/quantified-get-hours <span class="org-string">"Discretionary - Productive - Emacs"</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span> 1.68<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat 'identity emacs <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">"\n"</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat 'identity emacs-next <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">"\n"</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat 'identity life <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">"\n"</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat 'identity life-next <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">"\n"</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"  - *Writing* (%.1fh)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Discretionary - Productive - Writing"</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"- *Discretionary - Play* (%.1fh - %d%%)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Discretionary - Play"</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>sacha/quantified-get-hours <span class="org-string">"Discretionary - Play"</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span> 1.68<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"- *Personal routines* (%.1fh - %d%%)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Personal"</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>sacha/quantified-get-hours <span class="org-string">"Personal"</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span> 1.68<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"- *Unpaid work* (%.1fh - %d%%)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Unpaid work"</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>sacha/quantified-get-hours <span class="org-string">"Unpaid work"</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span> 1.68<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"- *Sleep* (%.1fh - %d%% - average of %.1f per day)\n"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>sacha/quantified-get-hours <span class="org-string">"Sleep"</span> time-summary<span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>sacha/quantified-get-hours <span class="org-string">"Sleep"</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span> 1.68<span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>sacha/quantified-get-hours <span class="org-string">"Sleep"</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span> 7<span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>called-interactively-p 'any<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>insert string<span class="org-rainbow-delimiters-depth-4">)</span>
      string<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I use this to put together a quick summary of how I spent my time.
</p>

<p>
The following code makes it easy to add a line:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-add-line-item-task</span> <span class="org-rainbow-delimiters-depth-2">(</span>task<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"MTask: "</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-insert-heading<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>insert <span class="org-string">"[ ] "</span> task<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-capture-entry '<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"t"</span> <span class="org-string">"Tasks"</span> entry
                             <span class="org-rainbow-delimiters-depth-6">(</span>file+headline <span class="org-string">"~/personal/organizer.org"</span> <span class="org-string">"Tasks"</span><span class="org-rainbow-delimiters-depth-6">)</span>
                             <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-capture nil <span class="org-string">"t"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>insert <span class="org-string">"TODO "</span> task <span class="org-string">"\nSCHEDULED: &lt;"</span> <span class="org-rainbow-delimiters-depth-4">(</span>org-read-date<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;</span><span class="org-comment">(define-key org-mode-map (kbd "C-c t") 'sacha/org-add-line-item-task)</span>
</pre>
</div>

<p>
Now we put it all together&#x2026;
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-prepare-weekly-review</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Prepare weekly review template."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>base-date <span class="org-rainbow-delimiters-depth-5">(</span>apply 'encode-time <span class="org-rainbow-delimiters-depth-6">(</span>org-read-date-analyze <span class="org-string">"-fri"</span> nil '<span class="org-rainbow-delimiters-depth-7">(</span>0 0 0<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        start end<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq start <span class="org-rainbow-delimiters-depth-4">(</span>format-time-string <span class="org-string">"%Y-%m-%d"</span> <span class="org-rainbow-delimiters-depth-5">(</span>days-to-time <span class="org-rainbow-delimiters-depth-6">(</span>- <span class="org-rainbow-delimiters-depth-7">(</span>time-to-number-of-days base-date<span class="org-rainbow-delimiters-depth-7">)</span> 6<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq end <span class="org-rainbow-delimiters-depth-4">(</span>format-time-string <span class="org-string">"%Y-%m-%d"</span> <span class="org-rainbow-delimiters-depth-5">(</span>days-to-time <span class="org-rainbow-delimiters-depth-6">(</span>1+ <span class="org-rainbow-delimiters-depth-7">(</span>time-to-number-of-days base-date<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>outline-next-heading<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>insert
       <span class="org-string">"*** Weekly review: Week ending "</span> <span class="org-rainbow-delimiters-depth-4">(</span>format-time-string <span class="org-string">"%B %e, %Y"</span> base-date<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"  :weekly:\n"</span>
       <span class="org-string">"*Blog posts*\n\n"</span>
       <span class="org-string">"*Sketches*\n\n"</span>
       <span class="org-rainbow-delimiters-depth-4">(</span>sacha/flickr-export-and-extract start end<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"\n"</span>
       <span class="org-string">"*Link round-up*\n\n"</span>
       <span class="org-rainbow-delimiters-depth-4">(</span>sacha/evernote-export-and-extract start end<span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-string">"\n\n*Focus areas and time review*\n\n"</span>
       <span class="org-rainbow-delimiters-depth-4">(</span>sacha/org-summarize-focus-areas<span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
<ul class="org-ul"><li><a id="unnumbered-87"></a>Flickr extract<br  /><div class="outline-text-6" id="text-unnumbered-87">
<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">_sacha/clean-up-flickr-list</span> <span class="org-rainbow-delimiters-depth-2">(</span>list<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>setq list
          <span class="org-rainbow-delimiters-depth-3">(</span>replace-regexp-in-string <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">-</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">-</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span>
                                    <span class="org-string">"\\1.\\2.\\3"</span> list<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>setq list
          <span class="org-rainbow-delimiters-depth-3">(</span>replace-regexp-in-string <span class="org-string">"\\[\""</span> <span class="org-string">"["</span> list<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>setq list
          <span class="org-rainbow-delimiters-depth-3">(</span>replace-regexp-in-string <span class="org-string">"&lt;a href=\"\"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">\"]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">.*?&gt;.*?&lt;/a&gt;"</span>
                                    <span class="org-string">"[[\\1][\\2]]"</span> list<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>setq list
          <span class="org-rainbow-delimiters-depth-3">(</span>replace-regexp-in-string <span class="org-string">"\"</span>
<span class="org-string">"</span> <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-4">(</span>replace-regexp-in-string <span class="org-string">"\"\\]"</span> <span class="org-string">"]"</span> list<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">_sacha/format-flickr-link-for-org</span> <span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>title <span class="org-rainbow-delimiters-depth-5">(</span>assoc-default <span class="org-string">"FileName"</span> x<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>format
       <span class="org-string">"- [[%s][%s]] %s"</span>
       <span class="org-rainbow-delimiters-depth-4">(</span>assoc-default <span class="org-string">"URL"</span> x<span class="org-rainbow-delimiters-depth-4">)</span>
       title
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>string= <span class="org-rainbow-delimiters-depth-6">(</span>assoc-default <span class="org-string">"Description"</span> x<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-string">""</span>
         <span class="org-rainbow-delimiters-depth-5">(</span>concat <span class="org-string">"- "</span>
                 <span class="org-rainbow-delimiters-depth-6">(</span>replace-regexp-in-string
                  <span class="org-string">"&lt;a href=\"\"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\"\".*?&gt;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">&lt;/a&gt;"</span>
                  <span class="org-string">"[[\\1][\\2]]"</span>
                  <span class="org-rainbow-delimiters-depth-7">(</span>assoc-default <span class="org-string">"Description"</span> x<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>


  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">_sacha/parse-and-filter-flickr-csv-buffer</span> <span class="org-rainbow-delimiters-depth-2">(</span>start end<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>sort
     <span class="org-rainbow-delimiters-depth-3">(</span>delq nil
           <span class="org-rainbow-delimiters-depth-4">(</span>mapcar <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">(</span>x<span class="org-rainbow-delimiters-depth-6">)</span>
                     <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>and <span class="org-rainbow-delimiters-depth-8">(</span>string&lt; <span class="org-rainbow-delimiters-depth-9">(</span>assoc-default <span class="org-string">"FileName"</span> x<span class="org-rainbow-delimiters-depth-9">)</span> end<span class="org-rainbow-delimiters-depth-8">)</span>
                              <span class="org-rainbow-delimiters-depth-8">(</span>org-string&lt;= start <span class="org-rainbow-delimiters-depth-9">(</span>assoc-default <span class="org-string">"FileName"</span> x<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                         x<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
                   <span class="org-rainbow-delimiters-depth-5">(</span>csv-parse-buffer t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>a b<span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span>string&lt; <span class="org-rainbow-delimiters-depth-5">(</span>assoc-default <span class="org-string">"FileName"</span> a<span class="org-rainbow-delimiters-depth-5">)</span>
                <span class="org-rainbow-delimiters-depth-5">(</span>assoc-default <span class="org-string">"FileName"</span> b<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>


  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/flickr-export-and-extract</span> <span class="org-rainbow-delimiters-depth-2">(</span>start end <span class="org-type">&amp;optional</span> do-insert update-db<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-doc">"Download Flickr metadata and extract the relevant part."</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-rainbow-delimiters-depth-3">(</span>list <span class="org-rainbow-delimiters-depth-4">(</span>org-read-date<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>org-read-date<span class="org-rainbow-delimiters-depth-4">)</span> t current-prefix-arg<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> update-db <span class="org-rainbow-delimiters-depth-3">(</span>shell-command <span class="org-string">"c:/sacha/dropbox/bin/flickr.bat"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> do-insert
        <span class="org-rainbow-delimiters-depth-3">(</span>insert <span class="org-rainbow-delimiters-depth-4">(</span>sacha/flickr-extract-links-for-review <span class="org-string">"c:/sacha/dropbox/bin/flickr_metadata.csv"</span> start end<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>sacha/flickr-extract-links-for-review <span class="org-string">"c:/sacha/dropbox/bin/flickr_metadata.csv"</span> start end<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>


  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/flickr-extract-links-for-review</span> <span class="org-rainbow-delimiters-depth-2">(</span>filename start end<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Extract Flickr titles and URLs from FILENAME from START to END.</span>
<span class="org-doc">  The file should be a CSV downloaded by the Flickr metadata downloader.</span>
<span class="org-doc">         Start date and end date should be strings in the form yyyy-mm-dd."</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">require</span> '<span class="org-constant">csv</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>list<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-temp-buffer</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>insert-file-contents filename<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>setq list
              <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat
               '_sacha/format-flickr-link-for-org
               <span class="org-rainbow-delimiters-depth-6">(</span>_sacha/parse-and-filter-flickr-csv-buffer start end<span class="org-rainbow-delimiters-depth-6">)</span>
               <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>setq list <span class="org-rainbow-delimiters-depth-5">(</span>_sacha/clean-up-flickr-list list<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>called-interactively-p 'any<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>insert list<span class="org-rainbow-delimiters-depth-5">)</span>
          list<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="unnumbered-88"></a>Link-related convenience functions<br  /><div class="outline-text-6" id="text-unnumbered-88">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">kensanata/resolve-redirect</span> <span class="org-rainbow-delimiters-depth-2">(</span>url<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Resolve shortened URL by launching `curl --head' and parsing the result."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>curl <span class="org-rainbow-delimiters-depth-5">(</span>shell-command-to-string
                <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"curl --silent --head %s"</span> url<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>location <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-6">(</span>and <span class="org-rainbow-delimiters-depth-7">(</span>string-match <span class="org-string">"^HTTP/1\.1 301"</span> curl<span class="org-rainbow-delimiters-depth-7">)</span>
                              <span class="org-rainbow-delimiters-depth-7">(</span>string-match <span class="org-string">"^Location: </span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> curl<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                     <span class="org-rainbow-delimiters-depth-6">(</span>match-string 1 curl<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>or location url<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/resolve-urls-in-region</span> <span class="org-rainbow-delimiters-depth-2">(</span>beg end<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Expand URLs between BEG and END."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"r"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-restriction</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>narrow-to-region beg end<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward org-bracket-link-regexp nil t<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>replace-match <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">save-match-data</span> <span class="org-rainbow-delimiters-depth-7">(</span>kensanata/resolve-redirect
                                         <span class="org-rainbow-delimiters-depth-8">(</span>match-string 1<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span> t t nil 1<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward org-link-re-with-space nil t<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>replace-match <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">save-match-data</span> <span class="org-rainbow-delimiters-depth-7">(</span>kensanata/resolve-redirect
                                         <span class="org-rainbow-delimiters-depth-8">(</span>match-string 0<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span> t t nil<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/open-urls-in-region</span> <span class="org-rainbow-delimiters-depth-2">(</span>beg end<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Open URLs between BEG and END."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"r"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-restriction</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>narrow-to-region beg end<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward org-plain-link-re nil t<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>org-open-at-point<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="unnumbered-89"></a>Evernote-related extract<br  /><div class="outline-text-6" id="text-unnumbered-89">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/evernote-export-and-extract</span> <span class="org-rainbow-delimiters-depth-2">(</span>start-date end-date<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Extract notes created on or after START-DATE and before END-DATE."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>filename <span class="org-string">"c:/sacha/tmp/Evernote.enex"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>call-process
     <span class="org-string">"c:/Program Files (x86)/Evernote/Evernote/enscript.exe"</span>
     nil t t
     <span class="org-string">"exportNotes"</span>
     <span class="org-string">"/q"</span> <span class="org-rainbow-delimiters-depth-4">(</span>concat
           <span class="org-string">" tag:roundup"</span>
           <span class="org-string">" created:"</span> <span class="org-rainbow-delimiters-depth-5">(</span>replace-regexp-in-string <span class="org-string">"-"</span> <span class="org-string">""</span> start-date<span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-string">" -created:"</span> <span class="org-rainbow-delimiters-depth-5">(</span>replace-regexp-in-string <span class="org-string">"-"</span> <span class="org-string">""</span> end-date<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-string">"/f"</span> filename<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>sacha/evernote-extract-links-for-review filename<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/evernote-extract-links-for-review</span> <span class="org-rainbow-delimiters-depth-2">(</span>filename<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Extract note names and URLs from FILENAME.</span>
<span class="org-doc">     The file should be an ENEX export."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-rainbow-delimiters-depth-3">(</span>list <span class="org-rainbow-delimiters-depth-4">(</span>read-file-name <span class="org-string">"File: "</span><span class="org-rainbow-delimiters-depth-4">)</span>
                     <span class="org-rainbow-delimiters-depth-4">(</span>org-read-date<span class="org-rainbow-delimiters-depth-4">)</span>
                     <span class="org-rainbow-delimiters-depth-4">(</span>org-read-date<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>list<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-temp-buffer</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert-file-contents filename<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward <span class="org-string">"&lt;title&gt;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.+?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">&lt;/title&gt;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*?\n</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">*?.*?href=\"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\""</span> nil t<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>setq list
              <span class="org-rainbow-delimiters-depth-6">(</span>cons
               <span class="org-rainbow-delimiters-depth-7">(</span>cons
                <span class="org-rainbow-delimiters-depth-8">(</span>match-string-no-properties 1<span class="org-rainbow-delimiters-depth-8">)</span>
                <span class="org-rainbow-delimiters-depth-8">(</span>match-string-no-properties 3<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> list<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq list
          <span class="org-rainbow-delimiters-depth-4">(</span>mapconcat <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">(</span>x<span class="org-rainbow-delimiters-depth-6">)</span>
                       <span class="org-rainbow-delimiters-depth-6">(</span>concat <span class="org-string">"- [["</span>
                               <span class="org-rainbow-delimiters-depth-7">(</span>kensanata/resolve-redirect <span class="org-rainbow-delimiters-depth-8">(</span>cdr x<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                               <span class="org-string">"]["</span> <span class="org-rainbow-delimiters-depth-7">(</span>car x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"]]: "</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> list <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>called-interactively-p 'any<span class="org-rainbow-delimiters-depth-4">)</span>
              <span class="org-rainbow-delimiters-depth-4">(</span>insert list<span class="org-rainbow-delimiters-depth-4">)</span>
            list<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
<ul class="org-ul"><li><a id="unnumbered-90"></a>For copying journal entries<br  /><div class="outline-text-7" id="text-unnumbered-90">
<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/evernote-export-and-extract-journal</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-doc">"Extract and file journal entries."</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>filename <span class="org-string">"c:\\sacha\\tmp\\journal.enex"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>journal-file <span class="org-string">"~/personal/journal.org"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>call-process
       <span class="org-string">"c:/Program Files (x86)/Evernote/Evernote/enscript.exe"</span>
       nil t t
       <span class="org-string">"exportNotes"</span>
       <span class="org-string">"/q"</span> <span class="org-rainbow-delimiters-depth-4">(</span>concat
             <span class="org-string">" notebook:!Inbox"</span>
             <span class="org-string">" intitle:Journal"</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-string">"/f"</span> filename<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>sacha/evernote-process-journal-entries filename journal-file<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/evernote-process-journal-entries</span> <span class="org-rainbow-delimiters-depth-2">(</span>filename journal-file<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-doc">"Insert all the journal entries if they do not yet exist."</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>data <span class="org-rainbow-delimiters-depth-5">(</span>car <span class="org-rainbow-delimiters-depth-6">(</span>xml-parse-file filename<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>mapc <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span>x<span class="org-rainbow-delimiters-depth-5">)</span>
              <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>and  <span class="org-rainbow-delimiters-depth-7">(</span>listp x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>equal <span class="org-rainbow-delimiters-depth-8">(</span>car x<span class="org-rainbow-delimiters-depth-8">)</span> 'note<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                  <span class="org-rainbow-delimiters-depth-6">(</span>sacha/evernote-create-journal-note x journal-file<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
            data<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/evernote-get-creation-date</span> <span class="org-rainbow-delimiters-depth-2">(</span>note<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-doc">"Return NOTE's created date as (month day year)."</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>created <span class="org-rainbow-delimiters-depth-5">(</span>cadr <span class="org-rainbow-delimiters-depth-6">(</span>assoc-default 'created note<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>list <span class="org-rainbow-delimiters-depth-4">(</span>string-to-number <span class="org-rainbow-delimiters-depth-5">(</span>substring created 4 6<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">month</span>
            <span class="org-rainbow-delimiters-depth-4">(</span>string-to-number <span class="org-rainbow-delimiters-depth-5">(</span>substring created 6 8<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">day</span>
            <span class="org-rainbow-delimiters-depth-4">(</span>string-to-number <span class="org-rainbow-delimiters-depth-5">(</span>substring created 0 4<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">year</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/evernote-create-journal-note</span> <span class="org-rainbow-delimiters-depth-2">(</span>note journal-file<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Save the given NOTE to the JOURNAL-FILE."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-3">(</span>find-file journal-file<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-datetree-find-date-create <span class="org-rainbow-delimiters-depth-4">(</span>sacha/evernote-get-creation-date note<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>forward-line 1<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>org-at-heading-p<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-excursion</span> <span class="org-rainbow-delimiters-depth-5">(</span>insert <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>content <span class="org-rainbow-delimiters-depth-6">(</span>sacha/evernote-convert-content-to-org note<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">save-excursion</span>
                <span class="org-rainbow-delimiters-depth-6">(</span>re-search-forward <span class="org-rainbow-delimiters-depth-7">(</span>regexp-quote content<span class="org-rainbow-delimiters-depth-7">)</span>
                <span class="org-rainbow-delimiters-depth-7">(</span>max <span class="org-rainbow-delimiters-depth-8">(</span>point<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">save-excursion</span> <span class="org-rainbow-delimiters-depth-9">(</span>org-end-of-subtree t<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> t<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>insert content<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/evernote-convert-content-to-org</span> <span class="org-rainbow-delimiters-depth-2">(</span>note<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Convert Evernote content for NOTE to HTML"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-temp-buffer</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>insert <span class="org-rainbow-delimiters-depth-4">(</span>cadr <span class="org-rainbow-delimiters-depth-5">(</span>assoc-default 'content note<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-4">(</span>re-search-forward <span class="org-string">"div&gt;"</span> nil t<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>replace-match <span class="org-string">"p&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>shell-command-on-region <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>point-max<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"pandoc -f html -t org"</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-4">(</span>re-search-forward <span class="org-string">"^\\\\+"</span> nil t<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>replace-match <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-4">(</span>re-search-forward <span class="org-string">"\\\\+$"</span> nil t<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>replace-match <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-4">(</span>re-search-forward <span class="org-string">"\n\n\n+"</span> nil t<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>replace-match <span class="org-string">"\n\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>s-trim <span class="org-rainbow-delimiters-depth-4">(</span>buffer-string<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li></ul>
</li></ul>
</div>

<div id="outline-container-unnumbered-91" class="outline-5">
<h5 id="unnumbered-91">Monthly reviews</h5>
<div class="outline-text-5" id="text-unnumbered-91">
<p>
<a id="monthly-reviews"></a>
</p>

<p>
I want to be able to see what I worked on in a month so that I can write my <a href="http://sachachua.com/blog/category/monthly">monthly reviews</a>. This code makes it easy to display a month's clocked tasks and time. I haven't been particularly thorough in tracking time before, but now that I have a shortcut that logs in Quantified Awesome as well as in Org, I should end up clocking more.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-review-month</span> <span class="org-rainbow-delimiters-depth-2">(</span>start-date<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Review the month's clocked tasks and time."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-rainbow-delimiters-depth-3">(</span>list <span class="org-rainbow-delimiters-depth-4">(</span>org-read-date<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Set to the beginning of the month</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq start-date <span class="org-rainbow-delimiters-depth-3">(</span>concat <span class="org-rainbow-delimiters-depth-4">(</span>substring start-date 0 8<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"01"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-agenda-show-log t<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>org-agenda-start-with-log-mode t<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>org-agenda-start-with-clockreport-mode t<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>org-agenda-clockreport-parameter-plist '<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:link</span> t <span class="org-builtin">:maxlevel</span> 3<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-agenda-list nil start-date 'month<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Here's a function like <code>sacha/org-prepare-weekly-review</code>:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">_sacha/extract-posts-from-webpage</span> <span class="org-rainbow-delimiters-depth-2">(</span>url<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-3">(</span>url-retrieve-synchronously url<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>re-search-forward <span class="org-string">"&lt;pre&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>buffer-substring
     <span class="org-rainbow-delimiters-depth-4">(</span>point<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward <span class="org-string">"&lt;/pre&gt;"</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>match-beginning 0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-prepare-monthly-review</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>date <span class="org-rainbow-delimiters-depth-5">(</span>decode-time<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>month <span class="org-rainbow-delimiters-depth-5">(</span>elt date 4<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>year <span class="org-rainbow-delimiters-depth-5">(</span>elt date 5<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         start-date
         end-date
         posts
         sketches<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>calendar-increment-month month year -1<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq start-date <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"%4d-%02d-01"</span> year month<span class="org-rainbow-delimiters-depth-4">)</span>
          end-date <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"%4d-%02d-01"</span> <span class="org-rainbow-delimiters-depth-5">(</span>elt date 5<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>elt date 4<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          posts <span class="org-rainbow-delimiters-depth-4">(</span>_sacha/extract-posts-from-webpage
                 <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"http://sachachua.com/blog/%4d/%d?org=1"</span>
                         year month<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          sketches <span class="org-rainbow-delimiters-depth-4">(</span>sacha/flickr-export-and-extract start-date end-date nil t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>insert
     <span class="org-string">"\n\n** Monthly review: "</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>format-time-string <span class="org-string">"%B %Y"</span> <span class="org-rainbow-delimiters-depth-5">(</span>encode-time 0 0 0 1 month year<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-string">"  :monthly:review:\n"</span>
     <span class="org-string">"*Blog posts*\n"</span>
     posts <span class="org-string">"\n\n"</span>
     <span class="org-string">"*Sketches*\n\n"</span>
     sketches<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-92" class="outline-5">
<h5 id="unnumbered-92">Fix timestamps in Flickr links</h5>
<div class="outline-text-5" id="text-unnumbered-92">
<p>
Photosync (for syncing with Flickr) can't deal with periods in filenames. Org gets confused with dashes in timestamps that are in link text. Solution? Save files with dashes, then use a little code to replace dashes in the region.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/fix-flickr-list</span> <span class="org-rainbow-delimiters-depth-2">(</span>beg end<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"r"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-restriction</span>
    <span class="org-rainbow-delimiters-depth-4">(</span>narrow-to-region beg end<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">-</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">-</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> nil t<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>replace-match <span class="org-rainbow-delimiters-depth-6">(</span>concat <span class="org-rainbow-delimiters-depth-7">(</span>match-string 1<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"."</span> <span class="org-rainbow-delimiters-depth-7">(</span>match-string 2<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"."</span> <span class="org-rainbow-delimiters-depth-7">(</span>match-string 3<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span> nil t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-unnumbered-93" class="outline-4">
<h4 id="unnumbered-93">Filing</h4>
<div class="outline-text-4" id="text-unnumbered-93">
</div><div id="outline-container-unnumbered-94" class="outline-5">
<h5 id="unnumbered-94">Moving lines around</h5>
<div class="outline-text-5" id="text-unnumbered-94">
<p>
This makes it easier to reorganize lines in my weekly review.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-move-line-to-destination</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-doc">"Moves the current list item to &lt;&lt;destination&gt;&gt; in the current buffer.</span>
<span class="org-doc">If no &lt;&lt;destination&gt;&gt; is found, move it to the end of the list</span>
<span class="org-doc">and indent it one level."</span>
      <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-window-excursion</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>string
                 <span class="org-rainbow-delimiters-depth-7">(</span>buffer-substring-no-properties
                  <span class="org-rainbow-delimiters-depth-8">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>line-end-position<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                found<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>delete-region <span class="org-rainbow-delimiters-depth-6">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>1+ <span class="org-rainbow-delimiters-depth-7">(</span>line-end-position<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">save-excursion</span>
              <span class="org-rainbow-delimiters-depth-6">(</span>goto-char <span class="org-rainbow-delimiters-depth-7">(</span>point-min<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
              <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-7">(</span>re-search-forward <span class="org-string">"&lt;&lt;destination&gt;&gt;"</span> nil t<span class="org-rainbow-delimiters-depth-7">)</span>
                <span class="org-rainbow-delimiters-depth-7">(</span>insert <span class="org-string">"\n"</span> <span class="org-rainbow-delimiters-depth-8">(</span>make-string <span class="org-rainbow-delimiters-depth-9">(</span>- <span class="org-rainbow-delimiters-depth-1">(</span>match-beginning 0<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span> ?\ <span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>s-trim string<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                <span class="org-rainbow-delimiters-depth-7">(</span>setq found t<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">unless</span> found
              <span class="org-rainbow-delimiters-depth-6">(</span>org-end-of-item-list<span class="org-rainbow-delimiters-depth-6">)</span>
              <span class="org-rainbow-delimiters-depth-6">(</span>insert string <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
    <span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c d"</span> 'sacha/org-move-line-to-destination org-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-move-line-to-end-of-list</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Move the current list item to the end of the list."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>string <span class="org-rainbow-delimiters-depth-6">(</span>buffer-substring-no-properties <span class="org-rainbow-delimiters-depth-7">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-7">)</span>
                                                  <span class="org-rainbow-delimiters-depth-7">(</span>line-end-position<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>delete-region <span class="org-rainbow-delimiters-depth-5">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>1+ <span class="org-rainbow-delimiters-depth-6">(</span>line-end-position<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-end-of-item-list<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert string<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-95" class="outline-5">
<h5 id="unnumbered-95">Organizing my blog index</h5>
<div class="outline-text-5" id="text-unnumbered-95">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-file-blog-index-entries</span> <span class="org-rainbow-delimiters-depth-2">(</span>beg end location<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Copy entries into blog.org."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive
   <span class="org-rainbow-delimiters-depth-3">(</span>list
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>region-active-p<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>region-active-p<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>mark<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>1+ <span class="org-rainbow-delimiters-depth-6">(</span>line-end-position<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>org-refile-targets
           '<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span><span class="org-string">"~/Dropbox/Public/sharing/blog.org"</span> . <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:maxlevel</span> . 3<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">save-excursion</span> <span class="org-rainbow-delimiters-depth-6">(</span>org-refile-get-location <span class="org-string">"Location"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>s
         <span class="org-rainbow-delimiters-depth-5">(</span>replace-regexp-in-string
          <span class="org-string">"^[ \t]*- </span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">\\[X\\] </span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">?"</span>
          <span class="org-string">"- [X] "</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>buffer-substring-no-properties beg end<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">if we're already in blog.org, delete the previous entry</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>string= buffer-file-name <span class="org-rainbow-delimiters-depth-5">(</span>expand-file-name <span class="org-string">"~/Dropbox/Public/sharing/blog.org"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>delete-region beg end<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-window-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-excursion</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>find-file <span class="org-rainbow-delimiters-depth-6">(</span>nth 1 location<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">save-excursion</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">save-restriction</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>widen<span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>goto-char <span class="org-rainbow-delimiters-depth-8">(</span>nth 3 location<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>looking-at org-outline-regexp<span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>forward-line 1<span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>insert s<span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>org-update-statistics-cookies nil<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c f"</span> 'sacha/org-file-blog-index-entries org-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-unnumbered-96" class="outline-4">
<h4 id="unnumbered-96">Publishing</h4>
<div class="outline-text-4" id="text-unnumbered-96">
<p>
Timestamps and section numbers make my published files look more
complicated than they are. Let's turn them off by default.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-export-with-section-numbers nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-html-include-timestamps nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-export-with-sub-superscripts nil<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
This makes it easier to publish my files:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>string= system-name <span class="org-string">"webdev"</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-rainbow-delimiters-depth-2">(</span>setq sacha/emacs-notes-directory <span class="org-string">"~/code/dev/emacs-notes"</span><span class="org-rainbow-delimiters-depth-2">)</span>
     <span class="org-rainbow-delimiters-depth-2">(</span>setq sacha/emacs-notes-directory <span class="org-string">"c:/sacha/code/dev/emacs-notes"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
    <span class="org-rainbow-delimiters-depth-1">(</span>setq org-publish-project-alist
          '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"public"</span>
             <span class="org-builtin">:base-directory</span> <span class="org-string">"c:/sacha/Dropbox/public"</span>
             <span class="org-builtin">:publishing-directory</span> <span class="org-string">"c:/sacha/Dropbox/public"</span>
             <span class="org-builtin">:publishing-function</span> sacha/org-html-publish-to-html-trustingly
             <span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sharing"</span>
             <span class="org-builtin">:base-directory</span> <span class="org-string">"c:/sacha/Dropbox/public/sharing"</span>
             <span class="org-builtin">:publishing-directory</span> <span class="org-string">"c:/sacha/Dropbox/public/sharing"</span>
             <span class="org-builtin">:publishing-function</span> sacha/org-html-publish-to-html-trustingly
             <span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"emacs-config"</span>
             <span class="org-builtin">:base-directory</span> <span class="org-string">"~/.emacs.d"</span>
             <span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/.emacs.d"</span>
             <span class="org-builtin">:publishing-function</span> sacha/org-html-publish-to-html-trustingly
             <span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"book-notes"</span>
             <span class="org-builtin">:base-directory</span> <span class="org-string">"c:/sacha/Dropbox/books"</span>
             <span class="org-builtin">:publishing-directory</span> <span class="org-string">"c:/sacha/Dropbox/books/html"</span>
             <span class="org-builtin">:publishing-function</span> sacha/org-html-publish-to-html-trustingly
             <span class="org-builtin">:makeindex</span> t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>load <span class="org-string">"~/code/dev/emacs-chats/build-site.el"</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>load <span class="org-string">"~/code/dev/emacs-notes/build-site.el"</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
If a file is in a publishing project, publish it.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-publish-maybe</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>org-publish-get-project-from-filename
           <span class="org-rainbow-delimiters-depth-5">(</span>buffer-file-name <span class="org-rainbow-delimiters-depth-6">(</span>buffer-base-buffer<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> 'up<span class="org-rainbow-delimiters-depth-4">)</span>
           <span class="org-rainbow-delimiters-depth-4">(</span>org-publish-current-file t<span class="org-rainbow-delimiters-depth-4">)</span>
           <span class="org-rainbow-delimiters-depth-4">(</span>sacha/org-html-export-trustingly<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c C-p C-p"</span> 'sacha/org-publish-maybe org-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Make it easy to publish and browse a file.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-publish-and-browse</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>save-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sacha/org-publish-maybe<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>browse-url <span class="org-rainbow-delimiters-depth-3">(</span>org-export-output-file-name <span class="org-string">".html"</span> nil default-directory<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"&lt;apps&gt; b"</span> 'sacha/org-publish-and-browse<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
<div id="outline-container-unnumbered-97" class="outline-5">
<h5 id="unnumbered-97">Org2blog</h5>
<div class="outline-text-5" id="text-unnumbered-97">
<p>
I use org2blog to post to my blog, which is Wordpress-based. I used to
use punchagan's org2blog, but there's a completely different one in
ELPA, so I figured I'd give that a try. UPDATE 2014-10-29: Overriding it with the Git version (see the first section of this config) so that I can use thumbnail support for now&#x2026;
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org2blog</span>
  <span class="org-builtin">:load-path</span> <span class="org-string">"~/code/org2blog"</span>
  <span class="org-builtin">:config</span>
   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq org-export-with-toc nil<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq org-html-toplevel-hlevel 2<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq org-export-htmlize-output-type 'css<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">org2blog/wp-post-buffer</span> <span class="org-rainbow-delimiters-depth-4">(</span>around sacha activate<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>org-confirm-babel-evaluate nil<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>org-html-toplevel-hlevel 3<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
      ad-do-it<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">htmlize</span> <span class="org-builtin">:ensure</span> htmlize<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-98" class="outline-5">
<h5 id="unnumbered-98">Publish without prompting</h5>
<div class="outline-text-5" id="text-unnumbered-98">
<p>
I want to be able to export without having to say yes to code blocks all the time.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-html-export-trustingly</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-confirm-babel-evaluate nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-html-export-to-html<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-html-publish-to-html-trustingly</span> <span class="org-rainbow-delimiters-depth-2">(</span>plist filename pub-dir<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-confirm-babel-evaluate nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-html-publish-to-html plist filename pub-dir<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-99" class="outline-5">
<h5 id="unnumbered-99">Stylesheet / header</h5>
<div class="outline-text-5" id="text-unnumbered-99">
<p>
Might as well take advantage of my stylesheet:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-html-head <span class="org-string">"&lt;link rel=\"stylesheet\" type=\"text/css\"</span>
<span class="org-string">href=\"http://sachachua.com/blog/wp-content/themes/sacha-v3/foundation/css/foundation.min.css\"&gt;&lt;/link&gt;</span>
<span class="org-string">&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"http://sachachua.com/org-export.css\"&gt;&lt;/link&gt;</span>
<span class="org-string">&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"http://sachachua.com/blog/wp-content/themes/sacha-v3/style.css\"&gt;&lt;/link&gt;</span>
<span class="org-string">&lt;script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js\"&gt;&lt;/script&gt;"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-html-htmlize-output-type 'css<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-src-fontify-natively t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-100" class="outline-5">
<h5 id="unnumbered-100">Footer</h5>
<div class="outline-text-5" id="text-unnumbered-100">
<p>
Make it easy to scroll to the top:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-html-preamble <span class="org-string">"&lt;a name=\"top\" id=\"top\"&gt;&lt;/a&gt;"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-html-postamble <span class="org-string">"</span>
<span class="org-string">&lt;style type=\"text/css\"&gt;</span>
<span class="org-string">.back-to-top {</span>
<span class="org-string">    position: fixed;</span>
<span class="org-string">    bottom: 2em;</span>
<span class="org-string">    right: 0px;</span>
<span class="org-string">    text-decoration: none;</span>
<span class="org-string">    color: #000000;</span>
<span class="org-string">    background-color: rgba(235, 235, 235, 0.80);</span>
<span class="org-string">    font-size: 12px;</span>
<span class="org-string">    padding: 1em;</span>
<span class="org-string">    display: none;</span>
<span class="org-string">}</span>

<span class="org-string">.back-to-top:hover {</span>
<span class="org-string">    background-color: rgba(135, 135, 135, 0.50);</span>
<span class="org-string">}</span>
<span class="org-string">&lt;/style&gt;</span>

<span class="org-string">&lt;div class=\"back-to-top\"&gt;</span>
<span class="org-string">&lt;a href=\"#top\"&gt;Back to top&lt;/a&gt; | &lt;a href=\"mailto:sacha@sachachua.com\"&gt;E-mail me&lt;/a&gt;</span>
<span class="org-string">&lt;/div&gt;</span>

<span class="org-string">&lt;script type=\"text/javascript\"&gt;</span>
<span class="org-string">    var offset = 220;</span>
<span class="org-string">    var duration = 500;</span>
<span class="org-string">    jQuery(window).scroll(function() {</span>
<span class="org-string">        if (jQuery(this).scrollTop() &gt; offset) {</span>
<span class="org-string">            jQuery('.back-to-top').fadeIn(duration);</span>
<span class="org-string">        } else {</span>
<span class="org-string">            jQuery('.back-to-top').fadeOut(duration);</span>
<span class="org-string">        }</span>
<span class="org-string">    });</span>
<span class="org-string">&lt;/script&gt;"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-101" class="outline-5">
<h5 id="unnumbered-101">Copy region</h5>
<div class="outline-text-5" id="text-unnumbered-101">
<p>
Sometimes I want a region's HTML in my kill-ring/clipboard without any of the extra fluff:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-copy-region-as-html</span> <span class="org-rainbow-delimiters-depth-2">(</span>beg end <span class="org-type">&amp;optional</span> level<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Make it easier to copy code for Wordpress posts and other things."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"r\np"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-export-html-preamble nil<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>org-html-toplevel-hlevel <span class="org-rainbow-delimiters-depth-5">(</span>or level 3<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>kill-new
     <span class="org-rainbow-delimiters-depth-4">(</span>org-export-string-as <span class="org-rainbow-delimiters-depth-5">(</span>buffer-substring beg end<span class="org-rainbow-delimiters-depth-5">)</span> 'html t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Sometimes I want a subtree:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-copy-subtree-as-html</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sacha/org-copy-region-as-html
   <span class="org-rainbow-delimiters-depth-3">(</span>org-back-to-heading<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>org-end-of-subtree<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-102" class="outline-5">
<h5 id="unnumbered-102">UTF-8 checkboxes</h5>
<div class="outline-text-5" id="text-unnumbered-102">
<p>
This snippet turns <code>- [X]</code> into ☑ and <code>- [ ]</code> into ☐, but leaves <code>[-]</code> alone.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-html-checkbox-type 'unicode<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-html-checkbox-types
 '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>unicode <span class="org-rainbow-delimiters-depth-4">(</span>on . <span class="org-string">"&lt;span class=\"task-done\"&gt;&amp;#x2611;&lt;/span&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span>off . <span class="org-string">"&lt;span class=\"task-todo\"&gt;&amp;#x2610;&lt;/span&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span>trans . <span class="org-string">"&lt;span class=\"task-in-progress\"&gt;[-]&lt;/span&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-103" class="outline-5">
<h5 id="unnumbered-103">Share my Emacs configuration</h5>
<div class="outline-text-5" id="text-unnumbered-103">
<p>
This code gets around the fact that my config is called Sacha.org, but
I want it to export as sacha-emacs.org in my Dropbox's public
directory. Although now that I'm shifting to Github Pages, maybe I
don't need this any more&#x2026;
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-share-emacs</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Share my Emacs configuration."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>destination-dir <span class="org-string">"~/Dropbox/Public/"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>destination-filename <span class="org-string">"sacha-emacs.org"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-4">(</span>find-file <span class="org-string">"~/.emacs.d/Sacha.org"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-restriction</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">save-excursion</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>widen<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>write-region <span class="org-rainbow-delimiters-depth-7">(</span>point-min<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>point-max<span class="org-rainbow-delimiters-depth-7">)</span>
                        <span class="org-rainbow-delimiters-depth-7">(</span>expand-file-name destination-filename destination-dir<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-7">(</span>find-file-noselect <span class="org-rainbow-delimiters-depth-8">(</span>expand-file-name
                                                    destination-filename destination-dir<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>org-babel-tangle-file buffer-file-name
                                   <span class="org-rainbow-delimiters-depth-8">(</span>expand-file-name
                                    <span class="org-string">"sacha-emacs.el"</span> destination-dir<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">"emacs-lisp"</span><span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>org-html-export-to-html<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-unnumbered-104" class="outline-4">
<h4 id="unnumbered-104">Links</h4>
<div class="outline-text-4" id="text-unnumbered-104">
</div><div id="outline-container-unnumbered-105" class="outline-5">
<h5 id="unnumbered-105">Quick links</h5>
<div class="outline-text-5" id="text-unnumbered-105">
<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-rainbow-delimiters-depth-1">(</span>setq org-link-abbrev-alist
    '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"google"</span> . <span class="org-string">"http://www.google.com/search?q="</span><span class="org-rainbow-delimiters-depth-3">)</span>
<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"gmap"</span> . <span class="org-string">"http://maps.google.com/maps?q=%s"</span><span class="org-rainbow-delimiters-depth-3">)</span>
<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"blog"</span> . <span class="org-string">"http://sachachua.com/blog/p/"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-106" class="outline-5">
<h5 id="unnumbered-106">Custom links</h5>
<div class="outline-text-5" id="text-unnumbered-106">
<p>
From <a href="http://endlessparentheses.com/use-org-mode-links-for-absolutely-anything.html?source=rss">http://endlessparentheses.com/use-org-mode-links-for-absolutely-anything.html?source=rss</a>
</p>
<blockquote>
<p>
(org-add-link-type
 "tag" 'endless/follow-tag-link)
</p>

<p>
(defun endless/follow-tag-link (tag)
  "Display a list of TODO headlines with tag TAG.
With prefix argument, also display headlines without a TODO keyword."
  (org-tags-view (null current-prefix-arg) tag))
</p>
</blockquote>
</div>
</div>
</div>

<div id="outline-container-unnumbered-107" class="outline-4">
<h4 id="unnumbered-107">Attachments</h4>
<div class="outline-text-4" id="text-unnumbered-107">
<p>
Org lets you attach files to an Org file. Haven't gotten the hang of this yet, but looks interesting.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-attach-store-link-p 'attached<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-attach-auto-tag nil<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-108" class="outline-4">
<h4 id="unnumbered-108">Diagrams and graphics</h4>
<div class="outline-text-4" id="text-unnumbered-108">
<p>
Ooooh. Graphviz and Ditaa make it easier to create diagrams from Emacs. See <a href="http://sachachua.com/evil-plans">http://sachachua.com/evil-plans</a> for examples and source.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-ditaa-jar-path <span class="org-string">"C:/Sacha/Dropbox/bin/ditaa.jar"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-startup-with-inline-images t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org</span>
 <span class="org-builtin">:config</span>
 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
<span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'org-babel-after-execute-hook 'org-display-inline-images<span class="org-rainbow-delimiters-depth-3">)</span>
<span class="org-rainbow-delimiters-depth-3">(</span>org-babel-do-load-languages
 'org-babel-load-languages
 '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>dot . t<span class="org-rainbow-delimiters-depth-5">)</span>
   <span class="org-rainbow-delimiters-depth-5">(</span>ditaa . t<span class="org-rainbow-delimiters-depth-5">)</span>
   <span class="org-rainbow-delimiters-depth-5">(</span>sh . t<span class="org-rainbow-delimiters-depth-5">)</span>
   <span class="org-rainbow-delimiters-depth-5">(</span>R . t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
<span class="org-rainbow-delimiters-depth-3">(</span>add-to-list 'org-src-lang-modes '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"dot"</span> . graphviz-dot<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-109" class="outline-4">
<h4 id="unnumbered-109">Counting</h4>
<div class="outline-text-4" id="text-unnumbered-109">
<p>
Good way to remind myself that I have lots of STARTED tasks.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-summarize-task-status</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Count number of tasks by status.</span>
<span class="org-doc">Probably should make this a dblock someday."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>result<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-map-entries
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>todo <span class="org-rainbow-delimiters-depth-8">(</span>elt <span class="org-rainbow-delimiters-depth-9">(</span>org-heading-components<span class="org-rainbow-delimiters-depth-9">)</span> 2<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> todo
             <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-8">(</span>assoc todo result<span class="org-rainbow-delimiters-depth-8">)</span>
                 <span class="org-rainbow-delimiters-depth-8">(</span>setcdr <span class="org-rainbow-delimiters-depth-9">(</span>assoc todo result<span class="org-rainbow-delimiters-depth-9">)</span>
                         <span class="org-rainbow-delimiters-depth-9">(</span>1+ <span class="org-rainbow-delimiters-depth-1">(</span>cdr <span class="org-rainbow-delimiters-depth-2">(</span>assoc todo result<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
               <span class="org-rainbow-delimiters-depth-8">(</span>setq result <span class="org-rainbow-delimiters-depth-9">(</span>cons <span class="org-rainbow-delimiters-depth-1">(</span>cons todo 1<span class="org-rainbow-delimiters-depth-1">)</span> result<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>message <span class="org-string">"%s"</span> <span class="org-rainbow-delimiters-depth-4">(</span>mapconcat <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">(</span>x<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"%s: %d"</span> <span class="org-rainbow-delimiters-depth-7">(</span>car x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>cdr x<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
                             result <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-110" class="outline-4">
<h4 id="unnumbered-110">Literate programming</h4>
<div class="outline-text-4" id="text-unnumbered-110">
</div><div id="outline-container-unnumbered-111" class="outline-5">
<h5 id="unnumbered-111">Editing source code</h5>
<div class="outline-text-5" id="text-unnumbered-111">
<p>
I don't want to get distracted by the same code in the other window, so I want org src to use the current window.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-src-window-setup 'current-window<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-112" class="outline-5">
<h5 id="unnumbered-112">Copying and sharing code</h5>
<div class="outline-text-5" id="text-unnumbered-112">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/copy-code-as-org-block-and-gist</span> <span class="org-rainbow-delimiters-depth-2">(</span>beg end<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"r"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>filename <span class="org-rainbow-delimiters-depth-5">(</span>file-name-base<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>mode <span class="org-rainbow-delimiters-depth-5">(</span>symbol-name major-mode<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>contents
         <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>use-region-p<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>buffer-substring beg end<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>buffer-string<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>gist <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>use-region-p<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>gist-region beg end<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>gist-buffer<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>kill-new
     <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"\n[[%s][Gist: %s]]\n#+begin_src %s\n%s\n#+end_src\n"</span>
             <span class="org-rainbow-delimiters-depth-5">(</span>oref <span class="org-rainbow-delimiters-depth-6">(</span>oref gist <span class="org-builtin">:data</span><span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-builtin">:html-url</span><span class="org-rainbow-delimiters-depth-5">)</span> filename
             <span class="org-rainbow-delimiters-depth-5">(</span>replace-regexp-in-string <span class="org-string">"-mode$"</span> <span class="org-string">""</span> mode<span class="org-rainbow-delimiters-depth-5">)</span>
             contents<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-unnumbered-113" class="outline-4">
<h4 id="unnumbered-113">Archiving</h4>
<div class="outline-text-4" id="text-unnumbered-113">
<p>
From <a href="http://stackoverflow.com/questions/6997387/how-to-archive-all-the-done-tasks-using-a-single-command">http://stackoverflow.com/questions/6997387/how-to-archive-all-the-done-tasks-using-a-single-command</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-archive-done-tasks</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Archive finished or cancelled tasks."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-map-entries
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>org-archive-subtree<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>setq org-map-continue-from <span class="org-rainbow-delimiters-depth-5">(</span>outline-previous-heading<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-string">"TODO=\"DONE\"|TODO=\"CANCELLED\""</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>org-before-first-heading-p<span class="org-rainbow-delimiters-depth-4">)</span> 'file 'tree<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-114" class="outline-4">
<h4 id="unnumbered-114">Filesystem</h4>
<div class="outline-text-4" id="text-unnumbered-114">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-fstree</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span> <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'org-ctrl-c-ctrl-c-hook 'org-fstree-apply-maybe<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'org-pre-cycle-hook 'org-fstree-show-entry-maybe<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
<div id="outline-container-unnumbered-115" class="outline-5">
<h5 id="unnumbered-115"><span class="todo TODO">TODO</span> check out org-fstree</h5>
</div>
</div>
<div id="outline-container-unnumbered-116" class="outline-4">
<h4 id="unnumbered-116">Presentations</h4>
<div class="outline-text-4" id="text-unnumbered-116">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ox-reveal</span>
 <span class="org-builtin">:ensure</span> ox-reveal<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-unnumbered-117" class="outline-3">
<h3 id="unnumbered-117">Coding</h3>
<div class="outline-text-3" id="text-unnumbered-117">
</div><div id="outline-container-unnumbered-118" class="outline-4">
<h4 id="unnumbered-118">Web development</h4>
<div class="outline-text-4" id="text-unnumbered-118">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">from FAQ at http://web-mode.org/ for smartparens</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/web-mode-hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq web-mode-enable-auto-pairing nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/sp-web-mode-is-code-context</span> <span class="org-rainbow-delimiters-depth-2">(</span>id action context<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>and <span class="org-rainbow-delimiters-depth-4">(</span>eq action 'insert<span class="org-rainbow-delimiters-depth-4">)</span>
             <span class="org-rainbow-delimiters-depth-4">(</span>not <span class="org-rainbow-delimiters-depth-5">(</span>or <span class="org-rainbow-delimiters-depth-6">(</span>get-text-property <span class="org-rainbow-delimiters-depth-7">(</span>point<span class="org-rainbow-delimiters-depth-7">)</span> 'part-side<span class="org-rainbow-delimiters-depth-6">)</span>
                      <span class="org-rainbow-delimiters-depth-6">(</span>get-text-property <span class="org-rainbow-delimiters-depth-7">(</span>point<span class="org-rainbow-delimiters-depth-7">)</span> 'block-side<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">web-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'auto-mode-alist '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.html?\\'"</span> . web-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq web-mode-enable-current-element-highlight t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq web-mode-ac-sources-alist
          '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"css"</span> . <span class="org-rainbow-delimiters-depth-6">(</span>ac-source-css-property<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"html"</span> . <span class="org-rainbow-delimiters-depth-6">(</span>ac-source-words-in-buffer ac-source-abbrev<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">tagedit</span>
   <span class="org-builtin">:ensure</span> t
   <span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'web-mode-hook 'tagedit-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-119" class="outline-4">
<h4 id="unnumbered-119">Tab width of 2 is compact and readable</h4>
<div class="outline-text-4" id="text-unnumbered-119">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq-default tab-width 2<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-120" class="outline-4">
<h4 id="unnumbered-120">New lines are always indented</h4>
<div class="outline-text-4" id="text-unnumbered-120">
<p>
I almost always want to go to the right indentation on the next line.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"RET"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'newline-and-indent<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
From <a href="https://github.com/purcell/emacs.d/blob/master/lisp/init-editing-utils.el">https://github.com/purcell/emacs.d/blob/master/lisp/init-editing-utils.el</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sanityinc/kill-back-to-indentation</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Kill from point back to the first non-whitespace character on the line."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>prev-pos <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>back-to-indentation<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>kill-region <span class="org-rainbow-delimiters-depth-4">(</span>point<span class="org-rainbow-delimiters-depth-4">)</span> prev-pos<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-M-&lt;backspace&gt;"</span> 'sanityinc/kill-back-to-indentation<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-121" class="outline-4">
<h4 id="unnumbered-121">Adapt to being on Windows</h4>
<div class="outline-text-4" id="text-unnumbered-121">
<p>
I'm on Windows, so I use Cygwin to add Unix-y tools to make my life easier.
These config snippets seem to help too.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span>eq system-type 'windows-nt<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setenv <span class="org-string">"CYGWIN"</span> <span class="org-string">"nodosfilewarning"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq shell-file-name <span class="org-string">"C:/emacs/libexec/emacs/24.4/i686-pc-mingw32/cmdproxy.exe"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'comint-output-filter-functions 'shell-strip-ctrl-m nil t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'comint-output-filter-functions 'comint-watch-for-password-prompt nil t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-122" class="outline-4">
<h4 id="unnumbered-122">Expand region</h4>
<div class="outline-text-4" id="text-unnumbered-122">
<p>
This is something I have to get the hang of too. It gradually expands the selection. Handy for Emacs Lisp.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">expand-region</span>
  <span class="org-builtin">:ensure</span> expand-region
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"C-="</span> . er/expand-region<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-123" class="outline-4">
<h4 id="unnumbered-123">Emacs Lisp</h4>
<div class="outline-text-4" id="text-unnumbered-123">
</div><div id="outline-container-unnumbered-124" class="outline-5">
<h5 id="unnumbered-124">Eldoc</h5>
<div class="outline-text-5" id="text-unnumbered-124">
<p>
Eldoc provides minibuffer hints when working with Emacs Lisp.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-string">"eldoc"</span>
  <span class="org-builtin">:diminish</span> eldoc-mode
  <span class="org-builtin">:commands</span> turn-on-eldoc-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'emacs-lisp-mode-hook 'turn-on-eldoc-mode<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'lisp-interaction-mode-hook 'turn-on-eldoc-mode<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'ielm-mode-hook 'turn-on-eldoc-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-125" class="outline-5">
<h5 id="unnumbered-125"><a id="ID-99ac7ddb-08ef-46c4-8fa8-8a45164f9ef4"></a>Refactoring&#xa0;&#xa0;&#xa0;<span class="tag"><span class="drill">drill</span></span></h5>
<div class="outline-text-5" id="text-unnumbered-125">
<p>
More things that I need to get used to&#x2026;
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">C-c C-v l : elint current buffer in clean environment.</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">C-c C-v L : elint current buffer by multiple emacs binaries.</span>
<span class="org-comment-delimiter">;;             </span><span class="org-comment">See `</span><span class="org-comment"><span class="org-constant">erefactor-lint-emacsen</span></span><span class="org-comment">'</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">C-c C-v r : Rename symbol in current buffer.</span>
<span class="org-comment-delimiter">;;             </span><span class="org-comment">Resolve `</span><span class="org-comment"><span class="org-constant">let</span></span><span class="org-comment">' binding as long as i can.</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">C-c C-v R : Rename symbol in requiring modules and current buffer.</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">C-c C-v h : Highlight current symbol in this buffer</span>
<span class="org-comment-delimiter">;;             </span><span class="org-comment">and suppress `</span><span class="org-comment"><span class="org-constant">erefacthr-highlight-mode</span></span><span class="org-comment">'.</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">C-c C-v d : Dehighlight all by above command.</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">C-c C-v c : Switch prefix bunch of symbols.</span>
<span class="org-comment-delimiter">;;             </span><span class="org-comment">ex: '(hoge-var hoge-func) -&gt; '(foo-var foo-func)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">C-c C-v ? : Display flymake elint warnings/errors</span>

  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">erefactor</span>
    <span class="org-builtin">:ensure</span> erefactor
    <span class="org-builtin">:config</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>define-key emacs-lisp-mode-map <span class="org-string">"\C-c\C-v"</span> erefactor-map<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">redshank</span>
    <span class="org-builtin">:ensure</span> t
    <span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'emacs-lisp-mode-hook 'redshank-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-126" class="outline-5">
<h5 id="unnumbered-126">Jumping to code</h5>
<div class="outline-text-5" id="text-unnumbered-126">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>define-key emacs-lisp-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c ."</span><span class="org-rainbow-delimiters-depth-2">)</span> 'find-function-at-point<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c f"</span> 'find-function<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-127" class="outline-5">
<h5 id="unnumbered-127">Sorting</h5>
<div class="outline-text-5" id="text-unnumbered-127">
<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/sort-sexps-in-region</span> <span class="org-rainbow-delimiters-depth-2">(</span>beg end<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-doc">"Can be handy for sorting out duplicates.</span>
<span class="org-doc">Sorts the sexps from BEG to END. Leaves the point at where it</span>
<span class="org-doc">couldn't figure things out (ex: syntax errors)."</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"r"</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>input <span class="org-rainbow-delimiters-depth-5">(</span>buffer-substring beg end<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          list last-point form result<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-restriction</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-excursion</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>narrow-to-region beg end<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>goto-char <span class="org-rainbow-delimiters-depth-6">(</span>point-min<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq last-point <span class="org-rainbow-delimiters-depth-6">(</span>point-min<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq form t<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-6">(</span>and form <span class="org-rainbow-delimiters-depth-7">(</span>not <span class="org-rainbow-delimiters-depth-8">(</span>eobp<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>setq form <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">ignore-errors</span> <span class="org-rainbow-delimiters-depth-8">(</span>read <span class="org-rainbow-delimiters-depth-9">(</span>current-buffer<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">when</span> form
              <span class="org-rainbow-delimiters-depth-7">(</span>add-to-list
               'list
               <span class="org-rainbow-delimiters-depth-8">(</span>cons
                <span class="org-rainbow-delimiters-depth-9">(</span>prin1-to-string form<span class="org-rainbow-delimiters-depth-9">)</span>
                <span class="org-rainbow-delimiters-depth-9">(</span>buffer-substring last-point <span class="org-rainbow-delimiters-depth-1">(</span>point<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
              <span class="org-rainbow-delimiters-depth-7">(</span>setq last-point <span class="org-rainbow-delimiters-depth-8">(</span>point<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq list <span class="org-rainbow-delimiters-depth-6">(</span>sort list <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-8">(</span>a b<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>string&lt; <span class="org-rainbow-delimiters-depth-9">(</span>car a<span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-rainbow-delimiters-depth-9">(</span>car b<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>delete-region <span class="org-rainbow-delimiters-depth-6">(</span>point-min<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>point<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>insert <span class="org-rainbow-delimiters-depth-6">(</span>mapconcat 'cdr list <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-128" class="outline-5">
<h5 id="unnumbered-128">Evaluation</h5>
<div class="outline-text-5" id="text-unnumbered-128">
<p>
Borrowed from Steve Purcell's config. This pretty-prints the results.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"M-:"</span> 'pp-eval-expression<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sanityinc/eval-last-sexp-or-region</span> <span class="org-rainbow-delimiters-depth-2">(</span>prefix<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Eval region from BEG to END if active, otherwise the last sexp."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>and <span class="org-rainbow-delimiters-depth-4">(</span>mark<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>use-region-p<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>eval-region <span class="org-rainbow-delimiters-depth-4">(</span>min <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>mark<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>max <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>mark<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>pp-eval-last-sexp prefix<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-x C-e"</span> 'sanityinc/eval-last-sexp-or-region emacs-lisp-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-unnumbered-129" class="outline-4">
<h4 id="unnumbered-129">Snippets</h4>
<div class="outline-text-4" id="text-unnumbered-129">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">yasnippet</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:diminish</span> yas-minor-mode
  <span class="org-builtin">:commands</span> yas-global-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'hippie-expand-try-functions-list 'yas-hippie-try-expand<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq yas-key-syntaxes '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"w_"</span> <span class="org-string">"w_."</span> <span class="org-string">"^ "</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq yas-installed-snippets-dir <span class="org-string">"~/elisp/yasnippet-snippets"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq yas-expand-only-for-last-commands '<span class="org-rainbow-delimiters-depth-4">(</span>self-insert-command<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>yas-global-mode 1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>bind-key <span class="org-string">"\t"</span> 'hippie-expand yas-minor-mode-map<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'yas-prompt-functions 'shk-yas/helm-prompt<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;;        </span><span class="org-comment">(global-set-key (kbd "C-c y") (lambda () (interactive)</span>
<span class="org-comment-delimiter">;;                                         </span><span class="org-comment">(yas/load-directory "~/elisp/snippets")))</span>
</pre>
</div>

<p>
From <a href="http://emacswiki.org/emacs/Yasnippet">http://emacswiki.org/emacs/Yasnippet</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">shk-yas/helm-prompt</span> <span class="org-rainbow-delimiters-depth-2">(</span>prompt choices <span class="org-type">&amp;optional</span> display-fn<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Use helm to select a snippet. Put this into `</span><span class="org-doc"><span class="org-constant">yas/prompt-functions.</span></span><span class="org-doc">'"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq display-fn <span class="org-rainbow-delimiters-depth-3">(</span>or display-fn 'identity<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">require</span> '<span class="org-constant">helm-config</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span>tmpsource cands result rmap<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>setq cands <span class="org-rainbow-delimiters-depth-5">(</span>mapcar <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>funcall display-fn x<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span> choices<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>setq rmap <span class="org-rainbow-delimiters-depth-5">(</span>mapcar <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>cons <span class="org-rainbow-delimiters-depth-8">(</span>funcall display-fn x<span class="org-rainbow-delimiters-depth-8">)</span> x<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span> choices<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>setq tmpsource
              <span class="org-rainbow-delimiters-depth-5">(</span>list
               <span class="org-rainbow-delimiters-depth-6">(</span>cons 'name prompt<span class="org-rainbow-delimiters-depth-6">)</span>
               <span class="org-rainbow-delimiters-depth-6">(</span>cons 'candidates cands<span class="org-rainbow-delimiters-depth-6">)</span>
               '<span class="org-rainbow-delimiters-depth-6">(</span>action . <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span><span class="org-string">"Expand"</span> . <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>selection<span class="org-rainbow-delimiters-depth-1">)</span> selection<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
               <span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>setq result <span class="org-rainbow-delimiters-depth-5">(</span>helm-other-buffer '<span class="org-rainbow-delimiters-depth-6">(</span>tmpsource<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">"*helm-select-yasnippet"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>null result<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-warning">signal</span> 'quit <span class="org-string">"user quit!"</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>cdr <span class="org-rainbow-delimiters-depth-6">(</span>assoc result rmap<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
From <a href="https://github.com/pcmantz/elisp/blob/master/my-bindings.el">https://github.com/pcmantz/elisp/blob/master/my-bindings.el</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq default-cursor-color <span class="org-string">"gray"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq yasnippet-can-fire-cursor-color <span class="org-string">"purple"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">It will test whether it can expand, if yes, cursor color -&gt; green.</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">yasnippet-can-fire-p</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> field<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq yas--condition-cache-timestamp <span class="org-rainbow-delimiters-depth-3">(</span>current-time<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>templates-and-pos<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span>and yas-expand-only-for-last-commands
                 <span class="org-rainbow-delimiters-depth-5">(</span>not <span class="org-rainbow-delimiters-depth-6">(</span>member last-command yas-expand-only-for-last-commands<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>setq templates-and-pos <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> field
                                  <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">save-restriction</span>
                                    <span class="org-rainbow-delimiters-depth-7">(</span>narrow-to-region <span class="org-rainbow-delimiters-depth-8">(</span>yas--field-start field<span class="org-rainbow-delimiters-depth-8">)</span>
                                                      <span class="org-rainbow-delimiters-depth-8">(</span>yas--field-end field<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                                    <span class="org-rainbow-delimiters-depth-7">(</span>yas--templates-for-key-at-point<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                                <span class="org-rainbow-delimiters-depth-6">(</span>yas--templates-for-key-at-point<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>and templates-and-pos <span class="org-rainbow-delimiters-depth-4">(</span>first templates-and-pos<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/change-cursor-color-when-can-expand</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> field<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>eq last-command 'self-insert-command<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>set-cursor-color <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>sacha/can-expand<span class="org-rainbow-delimiters-depth-5">)</span>
                          yasnippet-can-fire-cursor-color
                        default-cursor-color<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/can-expand</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Return true if right after an expandable thing."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>or <span class="org-rainbow-delimiters-depth-3">(</span>abbrev--before-point<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>yasnippet-can-fire-p<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

                                        <span class="org-comment-delimiter">; </span><span class="org-comment">As pointed out by Dmitri, this will make sure it will update color when needed.</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'post-command-hook 'sacha/change-cursor-color-when-can-expand<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/insert-space-or-expand</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"For binding to the SPC SPC keychord."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">condition-case</span> nil <span class="org-rainbow-delimiters-depth-3">(</span>or <span class="org-rainbow-delimiters-depth-4">(</span>sacha/hippie-expand-maybe nil<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>insert <span class="org-string">"  "</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
This requires me to modify the behaviour of hippie-expand so that it doesn't ding so much.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/hippie-expand-maybe</span> <span class="org-rainbow-delimiters-depth-2">(</span>arg<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Try to expand text before point, using multiple methods.</span>
<span class="org-doc">The expansion functions in `</span><span class="org-doc"><span class="org-constant">hippie-expand-try-functions-list</span></span><span class="org-doc">' are</span>
<span class="org-doc">tried in order, until a possible expansion is found.  Repeated</span>
<span class="org-doc">application of `</span><span class="org-doc"><span class="org-constant">hippie-expand</span></span><span class="org-doc">' inserts successively possible</span>
<span class="org-doc">expansions.</span>
<span class="org-doc">With a positive numeric argument, jumps directly to the ARG next</span>
<span class="org-doc">function in this list.  With a negative argument or just \\[</span><span class="org-doc"><span class="org-constant">universal-argument</span></span><span class="org-doc">],</span>
<span class="org-doc">undoes the expansion."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">require</span> '<span class="org-constant">hippie-exp</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>or <span class="org-rainbow-delimiters-depth-4">(</span>not arg<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>and <span class="org-rainbow-delimiters-depth-5">(</span>integerp arg<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>&gt; arg 0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>first <span class="org-rainbow-delimiters-depth-6">(</span>or <span class="org-rainbow-delimiters-depth-7">(</span>= he-num -1<span class="org-rainbow-delimiters-depth-7">)</span>
                       <span class="org-rainbow-delimiters-depth-7">(</span>not <span class="org-rainbow-delimiters-depth-8">(</span>equal this-command last-command<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> first
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">progn</span>
              <span class="org-rainbow-delimiters-depth-6">(</span>setq he-num -1<span class="org-rainbow-delimiters-depth-6">)</span>
              <span class="org-rainbow-delimiters-depth-6">(</span>setq he-tried-table nil<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> arg
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>not first<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>he-reset-string<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq arg 0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>i <span class="org-rainbow-delimiters-depth-7">(</span>max <span class="org-rainbow-delimiters-depth-8">(</span>+ he-num arg<span class="org-rainbow-delimiters-depth-8">)</span> 0<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-6">(</span>not <span class="org-rainbow-delimiters-depth-7">(</span>or <span class="org-rainbow-delimiters-depth-8">(</span>&gt;= i <span class="org-rainbow-delimiters-depth-9">(</span>length hippie-expand-try-functions-list<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                          <span class="org-rainbow-delimiters-depth-8">(</span>apply <span class="org-rainbow-delimiters-depth-9">(</span>nth i hippie-expand-try-functions-list<span class="org-rainbow-delimiters-depth-9">)</span>
                                 <span class="org-rainbow-delimiters-depth-9">(</span>list <span class="org-rainbow-delimiters-depth-1">(</span>= he-num i<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>setq i <span class="org-rainbow-delimiters-depth-7">(</span>1+ i<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq he-num i<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>&gt;= he-num <span class="org-rainbow-delimiters-depth-6">(</span>length hippie-expand-try-functions-list<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">progn</span> <span class="org-rainbow-delimiters-depth-6">(</span>setq he-num -1<span class="org-rainbow-delimiters-depth-6">)</span> nil<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>and hippie-expand-verbose
                   <span class="org-rainbow-delimiters-depth-7">(</span>not <span class="org-rainbow-delimiters-depth-8">(</span>window-minibuffer-p<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
              <span class="org-rainbow-delimiters-depth-6">(</span>message <span class="org-string">"Using %s"</span>
                       <span class="org-rainbow-delimiters-depth-7">(</span>nth he-num hippie-expand-try-functions-list<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>and <span class="org-rainbow-delimiters-depth-5">(</span>&gt;= he-num 0<span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span>eq <span class="org-rainbow-delimiters-depth-6">(</span>marker-buffer he-string-beg<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>current-buffer<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq he-num -1<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>he-reset-string<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>and hippie-expand-verbose
                   <span class="org-rainbow-delimiters-depth-7">(</span>not <span class="org-rainbow-delimiters-depth-8">(</span>window-minibuffer-p<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
              <span class="org-rainbow-delimiters-depth-6">(</span>message <span class="org-string">"Undoing expansions"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
yas/expand
yas-expand
</p>

<p>
because
because
Because
</p>
</div>
</div>


<div id="outline-container-unnumbered-130" class="outline-4">
<h4 id="unnumbered-130">Show column number</h4>
<div class="outline-text-4" id="text-unnumbered-130">
<p>
I sometimes need to know where I am in a line.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>column-number-mode 1<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-131" class="outline-4">
<h4 id="unnumbered-131">Don't show whitespace in diff, but show context</h4>
<div class="outline-text-4" id="text-unnumbered-131">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq vc-diff-switches '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"-b"</span> <span class="org-string">"-B"</span> <span class="org-string">"-u"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq vc-git-diff-switches nil<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-132" class="outline-4">
<h4 id="unnumbered-132">Javascript</h4>
<div class="outline-text-4" id="text-unnumbered-132">
<p>
This makes script blocks easier to copy:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/javascript-test-regexp</span> <span class="org-rainbow-delimiters-depth-2">(</span>concat <span class="org-rainbow-delimiters-depth-3">(</span>regexp-quote <span class="org-string">"/** Testing **/"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*\n</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">*"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Regular expression matching testing-related code to remove.</span>
<span class="org-doc">See `</span><span class="org-doc"><span class="org-constant">sacha/copy-javascript-region-or-buffer</span></span><span class="org-doc">'."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/copy-javascript-region-or-buffer</span> <span class="org-rainbow-delimiters-depth-2">(</span>beg end<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Copy the active region or the buffer, wrapping it in script tags.</span>
<span class="org-doc">Add a comment with the current filename and skip test-related</span>
<span class="org-doc">code. See `</span><span class="org-doc"><span class="org-constant">sacha/javascript-test-regexp</span></span><span class="org-doc">' to change the way</span>
<span class="org-doc">test-related code is detected."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"r"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span>region-active-p<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq beg <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span> end <span class="org-rainbow-delimiters-depth-4">(</span>point-max<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>kill-new
   <span class="org-rainbow-delimiters-depth-3">(</span>concat
    <span class="org-string">"&lt;script type=\"text/javascript\"&gt;\n"</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>concat <span class="org-string">"// "</span> <span class="org-rainbow-delimiters-depth-6">(</span>file-name-nondirectory <span class="org-rainbow-delimiters-depth-7">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span>replace-regexp-in-string
     sacha/javascript-test-regexp
     <span class="org-string">""</span>
     <span class="org-rainbow-delimiters-depth-5">(</span>buffer-substring <span class="org-rainbow-delimiters-depth-6">(</span>point-min<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>point-max<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
     nil<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-string">"\n&lt;/script&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
And the rest of the js2 config:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">js2-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> js2-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>add-to-list 'auto-mode-alist '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"\\.js$"</span> . js2-mode<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq-default js2-basic-offset 2<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>add-to-list 'interpreter-mode-alist <span class="org-rainbow-delimiters-depth-4">(</span>cons <span class="org-string">"node"</span> 'js2-mode<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>js2-imenu-extras-setup<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>bind-key <span class="org-string">"C-x C-e"</span> 'js-send-last-sexp js2-mode-map<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>bind-key <span class="org-string">"C-M-x"</span> 'js-send-last-sexp-and-go js2-mode-map<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>bind-key <span class="org-string">"C-c b"</span> 'js-send-buffer js2-mode-map<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>bind-key <span class="org-string">"C-c C-b"</span> 'js-send-buffer-and-go js2-mode-map<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>bind-key <span class="org-string">"C-c w"</span> 'sacha/copy-javascript-region-or-buffer js2-mode-map<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>bind-key <span class="org-string">"C-c l"</span> 'js-load-file-and-go js2-mode-map<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">coffee-mode</span>
<span class="org-builtin">:ensure</span> t
<span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span>setq-default coffee-js-mode 'js2-mode coffee-tab-width 2<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>

<div id="outline-container-unnumbered-133" class="outline-5">
<h5 id="unnumbered-133">Tern - for Javascript</h5>
<div class="outline-text-5" id="text-unnumbered-133">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">tern</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>setq tern-command '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"cmd"</span> <span class="org-string">"/c"</span> <span class="org-string">"tern"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'js2-mode-hook 'tern-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">company-tern</span>
<span class="org-builtin">:ensure</span> t
<span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'company-backends 'company-tern<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
#+end_src
</p>
</div>
</div>
</div>
<div id="outline-container-unnumbered-134" class="outline-4">
<h4 id="unnumbered-134"><a id="o2b:9a42a292-7b75-4c7f-8da2-7a0d8c22d0c6"></a>Magit - nice git interface</h4>
<div class="outline-text-4" id="text-unnumbered-134">
<p>
<a id="magit"></a>
</p>

<p>
Thanks to sheijk for hints on tweaking magit to limit it to the current directory!
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/magit-commit-all</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-doc">"Publish the current file and commit all the current changes."</span>
      <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">(</span>sacha/org-publish-maybe<span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">(</span>magit-status default-directory<span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">(</span>magit-stage-all<span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">(</span>call-interactively 'magit-log-edit<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">magit</span>
      <span class="org-builtin">:ensure</span> magit
      <span class="org-builtin">:load-path</span> <span class="org-string">"~/elisp/magit"</span>
      <span class="org-builtin">:config</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>equal system-type 'windows-nt<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>setq magit-git-executable <span class="org-string">"c:/program files (x86)/git/bin/git.exe"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span>setq magit-diff-options '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"-b"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">ignore whitespace</span>
        <span class="org-rainbow-delimiters-depth-3">(</span>define-key magit-mode-map <span class="org-string">"#gg"</span> 'endless/load-gh-pulls-mode<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/magit-limit-to-directory</span> nil <span class="org-doc">"Limit magit status to a specific directory."</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/magit-status-in-directory</span> <span class="org-rainbow-delimiters-depth-4">(</span>directory<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-doc">"Displays magit status limited to DIRECTORY.</span>
<span class="org-doc">  Uses the current `</span><span class="org-doc"><span class="org-constant">default-directory</span></span><span class="org-doc">', or prompts for a directory</span>
<span class="org-doc">  if called with a prefix argument. Sets `</span><span class="org-doc"><span class="org-constant">sacha/magit-limit-to-directory</span></span><span class="org-doc">'</span>
<span class="org-doc">  so that it's still active even after you stage a change. Very experimental."</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>interactive <span class="org-rainbow-delimiters-depth-5">(</span>list <span class="org-rainbow-delimiters-depth-6">(</span>expand-file-name
                              <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> current-prefix-arg
                                  <span class="org-rainbow-delimiters-depth-8">(</span>read-directory-name <span class="org-string">"Directory: "</span><span class="org-rainbow-delimiters-depth-8">)</span>
                                default-directory<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>setq sacha/magit-limit-to-directory directory<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>magit-status directory<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">magit-insert-untracked-files</span> <span class="org-rainbow-delimiters-depth-4">(</span>around sacha activate<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> sacha/magit-limit-to-directory
              <span class="org-rainbow-delimiters-depth-5">(</span>magit-with-section <span class="org-rainbow-delimiters-depth-6">(</span>section untracked 'untracked <span class="org-string">"Untracked files:"</span> t<span class="org-rainbow-delimiters-depth-6">)</span>
                <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>files <span class="org-rainbow-delimiters-depth-9">(</span>cl-mapcan
                              <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>f<span class="org-rainbow-delimiters-depth-2">)</span>
                                <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>eq <span class="org-rainbow-delimiters-depth-4">(</span>aref f 0<span class="org-rainbow-delimiters-depth-4">)</span> ??<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>list f<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                              <span class="org-rainbow-delimiters-depth-1">(</span>magit-git-lines
                               <span class="org-string">"status"</span> <span class="org-string">"--porcelain"</span> <span class="org-string">"--"</span> sacha/magit-limit-to-directory<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                  <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-8">(</span>not files<span class="org-rainbow-delimiters-depth-8">)</span>
                      <span class="org-rainbow-delimiters-depth-8">(</span>setq section nil<span class="org-rainbow-delimiters-depth-8">)</span>
                    <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-9">(</span>file files<span class="org-rainbow-delimiters-depth-9">)</span>
                      <span class="org-rainbow-delimiters-depth-9">(</span>setq file <span class="org-rainbow-delimiters-depth-1">(</span>magit-decode-git-path <span class="org-rainbow-delimiters-depth-2">(</span>substring file 3<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                      <span class="org-rainbow-delimiters-depth-9">(</span>magit-with-section <span class="org-rainbow-delimiters-depth-1">(</span>section file file<span class="org-rainbow-delimiters-depth-1">)</span>
                        <span class="org-rainbow-delimiters-depth-1">(</span>insert <span class="org-string">"\t"</span> file <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                    <span class="org-rainbow-delimiters-depth-8">(</span>insert <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            ad-do-it<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">magit-insert-unstaged-changes</span> <span class="org-rainbow-delimiters-depth-4">(</span>around sacha activate<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> sacha/magit-limit-to-directory
              <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>magit-current-diff-range <span class="org-rainbow-delimiters-depth-8">(</span>cons 'index 'working<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                    <span class="org-rainbow-delimiters-depth-7">(</span>magit-diff-options <span class="org-rainbow-delimiters-depth-8">(</span>copy-sequence magit-diff-options<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                <span class="org-rainbow-delimiters-depth-6">(</span>magit-git-insert-section <span class="org-rainbow-delimiters-depth-7">(</span>unstaged <span class="org-string">"Unstaged changes:"</span><span class="org-rainbow-delimiters-depth-7">)</span>
                    #'magit-wash-raw-diffs
                  <span class="org-string">"diff-files"</span>
                  <span class="org-string">"--"</span> sacha/magit-limit-to-directory
                  <span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            ad-do-it<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">magit-insert-staged-changes</span> <span class="org-rainbow-delimiters-depth-4">(</span>around sacha activate<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-doc">"Limit to `</span><span class="org-doc"><span class="org-constant">sacha/magit-limit-to-directory</span></span><span class="org-doc">' if specified."</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> sacha/magit-limit-to-directory
              <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>no-commit <span class="org-rainbow-delimiters-depth-8">(</span>not <span class="org-rainbow-delimiters-depth-9">(</span>magit-git-success <span class="org-string">"log"</span> <span class="org-string">"-1"</span> <span class="org-string">"HEAD"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-7">(</span>or no-commit <span class="org-rainbow-delimiters-depth-8">(</span>magit-anything-staged-p<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                  <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-9">(</span>magit-current-diff-range <span class="org-rainbow-delimiters-depth-1">(</span>cons <span class="org-string">"HEAD"</span> 'index<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                        <span class="org-rainbow-delimiters-depth-9">(</span>base <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> no-commit
                                  <span class="org-rainbow-delimiters-depth-2">(</span>magit-git-string <span class="org-string">"mktree"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                <span class="org-string">"HEAD"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                        <span class="org-rainbow-delimiters-depth-9">(</span>magit-diff-options <span class="org-rainbow-delimiters-depth-1">(</span>append '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"--cached"</span><span class="org-rainbow-delimiters-depth-2">)</span> magit-diff-options<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                    <span class="org-rainbow-delimiters-depth-8">(</span>magit-git-insert-section <span class="org-rainbow-delimiters-depth-9">(</span>staged <span class="org-string">"Staged changes:"</span><span class="org-rainbow-delimiters-depth-9">)</span>
                        <span class="org-rainbow-delimiters-depth-9">(</span>apply-partially #'magit-wash-raw-diffs t<span class="org-rainbow-delimiters-depth-9">)</span>
                      <span class="org-string">"diff-index"</span> <span class="org-string">"--cached"</span> base <span class="org-string">"--"</span> sacha/magit-limit-to-directory<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            ad-do-it<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x v d"</span> . magit-status<span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x v C-d"</span> . sacha/magit-status-in-directory<span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x v p"</span> . magit-push<span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x v c"</span> . sacha/magit-commit-all<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">From http://endlessparentheses.com/merging-github-pull-requests-from-emacs.html</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">endless/load-gh-pulls-mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Start `</span><span class="org-doc"><span class="org-constant">magit-gh-pulls-mode</span></span><span class="org-doc">' only after a manual request."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">require</span> '<span class="org-constant">magit-gh-pulls</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'magit-mode-hook 'turn-on-magit-gh-pulls<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>magit-gh-pulls-mode 1<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>magit-gh-pulls-reload<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">magit-gh-pulls</span>
  <span class="org-builtin">:ensure</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
The proper way to implement this is probably to patch or override the
definition of magit-git-insert-section so that it takes a list of
options to add at the end of the command, but that can wait for another time (or braver souls).
</p>
</div>

<div id="outline-container-unnumbered-135" class="outline-5">
<h5 id="unnumbered-135"><span class="todo TODO">TODO</span> Make this better by adding a post command options variable</h5>
</div>
</div>
<div id="outline-container-unnumbered-136" class="outline-4">
<h4 id="unnumbered-136">git-messenger - shows commit message</h4>
<div class="outline-text-4" id="text-unnumbered-136">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">git-messenger</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x v m"</span> . git-messenger:popup-message<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-137" class="outline-4">
<h4 id="unnumbered-137">Tag files</h4>
<div class="outline-text-4" id="text-unnumbered-137">
<p>
I don't often use a TAGS file, but when I do, I don't want to have
to set my tags file per project. I search for it in the directory
tree instead.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/recursive-find-file</span> <span class="org-rainbow-delimiters-depth-2">(</span>file <span class="org-type">&amp;optional</span> directory<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Find the first FILE in DIRECTORY or its parents."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq directory <span class="org-rainbow-delimiters-depth-3">(</span>or directory <span class="org-rainbow-delimiters-depth-4">(</span>file-name-directory <span class="org-rainbow-delimiters-depth-5">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>pwd<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>file-exists-p <span class="org-rainbow-delimiters-depth-4">(</span>expand-file-name file directory<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name file directory<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span>string= directory <span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>sacha/recursive-find-file file <span class="org-rainbow-delimiters-depth-5">(</span>expand-file-name <span class="org-string">".."</span> directory<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/find-tags</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Set the TAGS file."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>set <span class="org-rainbow-delimiters-depth-3">(</span>make-variable-buffer-local 'tags-table-list<span class="org-rainbow-delimiters-depth-3">)</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>set <span class="org-rainbow-delimiters-depth-3">(</span>make-variable-buffer-local 'tags-file-name<span class="org-rainbow-delimiters-depth-3">)</span>
       <span class="org-rainbow-delimiters-depth-3">(</span>sacha/recursive-find-file <span class="org-string">"TAGS"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>eval-after-load 'drupal-mode
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
     <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'drupal-mode-hook 'sacha/find-tags<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-138" class="outline-4">
<h4 id="unnumbered-138">Projects</h4>
<div class="outline-text-4" id="text-unnumbered-138">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">projectile</span>
  <span class="org-builtin">:ensure</span> projectile
  <span class="org-builtin">:diminish</span> projectile-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq projectile-keymap-prefix <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c p"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq projectile-completion-system 'default<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq projectile-enable-caching t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>projectile-global-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">helm-projectile</span>
   <span class="org-builtin">:ensure</span> helm-projectile<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-139" class="outline-4">
<h4 id="unnumbered-139">Exploring MELPA recipes</h4>
<div class="outline-text-4" id="text-unnumbered-139">
<div class="org-src-container">

<pre class="src src-emacs-lisp"></pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-140" class="outline-4">
<h4 id="unnumbered-140">Ruby</h4>
<div class="outline-text-4" id="text-unnumbered-140">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">rinari</span> <span class="org-builtin">:ensure</span> rinari<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">bundler</span> <span class="org-builtin">:ensure</span> bundler<span class="org-rainbow-delimiters-depth-1">)</span>
    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">robe</span>
      <span class="org-builtin">:ensure</span> robe
      <span class="org-builtin">:init</span>
      <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span> <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'ruby-mode-hook 'robe-mode<span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'robe-mode-hook 'ac-robe-setup<span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'ruby-mode-hook 'auto-complete-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/rspec-verify-single</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Runs the specified example at the point of the current buffer."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>rspec-run-single-file
   <span class="org-rainbow-delimiters-depth-3">(</span>concat
     <span class="org-rainbow-delimiters-depth-4">(</span>rspec-spec-file-for <span class="org-rainbow-delimiters-depth-5">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-string">":"</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-restriction</span>
               <span class="org-rainbow-delimiters-depth-5">(</span>widen<span class="org-rainbow-delimiters-depth-5">)</span>
               <span class="org-rainbow-delimiters-depth-5">(</span>number-to-string <span class="org-rainbow-delimiters-depth-6">(</span>line-number-at-pos<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>rspec-core-options<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">rspec-mode</span>
  <span class="org-builtin">:ensure</span> rspec-mode
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq rspec-command-options <span class="org-string">"--fail-fast --format documentation"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>bind-key <span class="org-string">"C-c , ,"</span> 'rspec-rerun rspec-mode-map<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>fset 'rspec-verify-single 'sacha/rspec-verify-single<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
SASS
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'sass-mode-hook
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>setq indent-tabs-mode nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq-default indent-tabs-mode nil<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-141" class="outline-4">
<h4 id="unnumbered-141">Skewer</h4>
<div class="outline-text-4" id="text-unnumbered-141">
<p>
This lets you send HTML, CSS, and Javascript fragments to Google
Chrome. You may need to start Chrome with <code>chrome
--allow-running-insecure-content</code>, if you're using the user script
with HTTPS sites.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">skewer-mode</span>
  <span class="org-builtin">:ensure</span> skewer-mode
  <span class="org-builtin">:config</span> <span class="org-rainbow-delimiters-depth-2">(</span>skewer-setup<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-142" class="outline-4">
<h4 id="unnumbered-142">Autocomplete</h4>
<div class="outline-text-4" id="text-unnumbered-142">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">company</span>
  <span class="org-builtin">:ensure</span> company
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'prog-mode-hook 'company-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-unnumbered-143" class="outline-3">
<h3 id="unnumbered-143">Ledger (personal finance): Make it easier to review my credit card transactions</h3>
<div class="outline-text-3" id="text-unnumbered-143">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/ledger-go-to-beginning-of-entry</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Move to the beginning of the current entry."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-3">(</span>and <span class="org-rainbow-delimiters-depth-4">(</span>not <span class="org-rainbow-delimiters-depth-5">(</span>bobp<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
              <span class="org-rainbow-delimiters-depth-4">(</span>eq <span class="org-rainbow-delimiters-depth-5">(</span>ledger-context-line-type <span class="org-rainbow-delimiters-depth-6">(</span>ledger-context-at-point<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
                  'acct-transaction<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>forward-line -1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/ledger-entry-date</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Returns the date of the entry containing point or nil."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>sacha/ledger-go-to-beginning-of-entry<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>context-info <span class="org-rainbow-delimiters-depth-6">(</span>ledger-context-other-line 0<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-5">(</span>eq <span class="org-rainbow-delimiters-depth-6">(</span>ledger-context-line-type context-info<span class="org-rainbow-delimiters-depth-6">)</span> 'entry<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>goto-char <span class="org-rainbow-delimiters-depth-6">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>looking-at <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[-0-9\\./]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>match-string-no-properties 1<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/ledger-guess-mbna</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Adds a sub-account for the dates for my credit card transactions."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>sacha/ledger-go-to-beginning-of-entry<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>forward-line 1<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>amount 0<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>date <span class="org-rainbow-delimiters-depth-6">(</span>sacha/ledger-entry-date<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> month<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>string-match <span class="org-string">"[0-9]+[-\\.]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">[-\\.]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> date<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq month <span class="org-rainbow-delimiters-depth-6">(</span>string-to-number <span class="org-rainbow-delimiters-depth-7">(</span>match-string 1 date<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">Is this a payment or a charge?</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-excursion</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-6">(</span>and <span class="org-rainbow-delimiters-depth-7">(</span>eq <span class="org-rainbow-delimiters-depth-8">(</span>ledger-context-line-type <span class="org-rainbow-delimiters-depth-9">(</span>ledger-context-at-point<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                        'acct-transaction<span class="org-rainbow-delimiters-depth-7">)</span>
                    <span class="org-rainbow-delimiters-depth-7">(</span>not <span class="org-rainbow-delimiters-depth-8">(</span>eobp<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>context <span class="org-rainbow-delimiters-depth-9">(</span>ledger-context-at-point<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-8">(</span>ledger-context-field-value context 'amount<span class="org-rainbow-delimiters-depth-8">)</span>
                <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-9">(</span>string-match <span class="org-string">"MBNA"</span> <span class="org-rainbow-delimiters-depth-1">(</span>ledger-context-field-value context 'account<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                    <span class="org-rainbow-delimiters-depth-9">(</span>setq amount <span class="org-rainbow-delimiters-depth-1">(</span>string-to-number <span class="org-rainbow-delimiters-depth-2">(</span>ledger-context-field-value context 'amount<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                  <span class="org-rainbow-delimiters-depth-9">(</span>setq amount <span class="org-rainbow-delimiters-depth-1">(</span>- <span class="org-rainbow-delimiters-depth-2">(</span>string-to-number <span class="org-rainbow-delimiters-depth-3">(</span>ledger-context-field-value context 'amount<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>forward-line 1<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-excursion</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-6">(</span>and <span class="org-rainbow-delimiters-depth-7">(</span>eq <span class="org-rainbow-delimiters-depth-8">(</span>ledger-context-line-type <span class="org-rainbow-delimiters-depth-9">(</span>ledger-context-at-point<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                        'acct-transaction<span class="org-rainbow-delimiters-depth-7">)</span>
                    <span class="org-rainbow-delimiters-depth-7">(</span>not <span class="org-rainbow-delimiters-depth-8">(</span>eobp<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>context <span class="org-rainbow-delimiters-depth-9">(</span>ledger-context-at-point<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-8">(</span>string-match <span class="org-string">"MBNA"</span> <span class="org-rainbow-delimiters-depth-9">(</span>ledger-context-field-value context 'account<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-9">(</span>re-search-forward <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">MBNA</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">[ \t]*[-$\.0-9]*[ \t]*$"</span> <span class="org-rainbow-delimiters-depth-1">(</span>line-end-position<span class="org-rainbow-delimiters-depth-1">)</span> t<span class="org-rainbow-delimiters-depth-9">)</span>
                    <span class="org-rainbow-delimiters-depth-9">(</span>replace-match
                     <span class="org-rainbow-delimiters-depth-1">(</span>concat <span class="org-string">"MBNA:"</span>
                             <span class="org-rainbow-delimiters-depth-2">(</span>elt
                              '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"January"</span> <span class="org-string">"February"</span> <span class="org-string">"March"</span> <span class="org-string">"April"</span> <span class="org-string">"May"</span> <span class="org-string">"June"</span> <span class="org-string">"July"</span> <span class="org-string">"August"</span> <span class="org-string">"September"</span> <span class="org-string">"October"</span> <span class="org-string">"November"</span> <span class="org-string">"December"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                              <span class="org-rainbow-delimiters-depth-3">(</span>% <span class="org-rainbow-delimiters-depth-4">(</span>+ <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>&gt; amount 0<span class="org-rainbow-delimiters-depth-6">)</span> 10 11<span class="org-rainbow-delimiters-depth-5">)</span> month<span class="org-rainbow-delimiters-depth-4">)</span> 12<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                             t t nil 1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>forward-line 1<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-144" class="outline-3">
<h3 id="unnumbered-144">Internet Relay Chat</h3>
<div class="outline-text-3" id="text-unnumbered-144">
<p>
IRC is a great way to hang out with other Emacs geeks.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">erc</span>
  <span class="org-builtin">:ensure</span> erc
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq erc-autojoin-channels-alist '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"freenode.net"</span>
         <span class="org-string">"#org-mode"</span>
         <span class="org-string">"#hacklabto"</span>
         <span class="org-string">"#emacs"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  erc-server <span class="org-string">"irc.freenode.net"</span>
  erc-nick <span class="org-string">"sachac"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-145" class="outline-3">
<h3 id="unnumbered-145">Self-tracking, statistics, and other data transformations</h3>
<div class="outline-text-3" id="text-unnumbered-145">
</div><div id="outline-container-unnumbered-146" class="outline-4">
<h4 id="unnumbered-146">Quantified Awesome</h4>
<div class="outline-text-4" id="text-unnumbered-146">
<p>
<a id="clock-in"></a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-clock-in-and-track</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Start the clock running. Clock into Quantified Awesome."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>derived-mode-p 'org-agenda-mode<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>org-agenda-clock-in<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>org-clock-in<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>call-interactively 'sacha/org-quantified-track<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"!"</span> 'sacha/org-clock-in-and-track org-agenda-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defmacro</span> <span class="org-function-name">sacha/with-org-task</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;rest</span> body<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Run BODY within the current agenda task, clocked task, or cursor task."</span>
  `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">cond</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>derived-mode-p 'org-agenda-mode<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>marker <span class="org-rainbow-delimiters-depth-7">(</span>org-get-at-bol 'org-marker<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>buffer <span class="org-rainbow-delimiters-depth-7">(</span>marker-buffer marker<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>pos <span class="org-rainbow-delimiters-depth-7">(</span>marker-position marker<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">with-current-buffer</span> buffer
         <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">save-excursion</span>
           <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">save-restriction</span>
             <span class="org-rainbow-delimiters-depth-8">(</span>widen<span class="org-rainbow-delimiters-depth-8">)</span>
             <span class="org-rainbow-delimiters-depth-8">(</span>goto-char pos<span class="org-rainbow-delimiters-depth-8">)</span>
             ,@body<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>and <span class="org-rainbow-delimiters-depth-5">(</span>derived-mode-p 'org-mode<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>org-at-heading-p<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-excursion</span> ,@body<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-clocking-p<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-excursion</span> <span class="org-rainbow-delimiters-depth-5">(</span>org-clock-goto<span class="org-rainbow-delimiters-depth-5">)</span> ,@body<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>derived-mode-p 'org-mode<span class="org-rainbow-delimiters-depth-4">)</span> ,@body<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-quantified-track</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> category note<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Create a tracking record using CATEGORY and NOTE.</span>
<span class="org-doc">Default to the current task in the agenda, the currently-clocked</span>
<span class="org-doc">entry, or the current subtree in Org."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-rainbow-delimiters-depth-3">(</span>list nil nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span>and category note<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>sacha/with-org-task
     <span class="org-rainbow-delimiters-depth-4">(</span>setq category <span class="org-rainbow-delimiters-depth-5">(</span>or category
                        <span class="org-rainbow-delimiters-depth-6">(</span>org-entry-get-with-inheritance <span class="org-string">"QUANTIFIED"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> category
       <span class="org-rainbow-delimiters-depth-5">(</span>setq category <span class="org-rainbow-delimiters-depth-6">(</span>read-string <span class="org-string">"Category: "</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span>org-set-property <span class="org-string">"QUANTIFIED"</span> category<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>setq note <span class="org-rainbow-delimiters-depth-5">(</span>or note <span class="org-rainbow-delimiters-depth-6">(</span>elt <span class="org-rainbow-delimiters-depth-7">(</span>org-heading-components<span class="org-rainbow-delimiters-depth-7">)</span> 4<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>read-string <span class="org-string">"Note: "</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>quantified-track <span class="org-rainbow-delimiters-depth-3">(</span>concat category <span class="org-string">" | "</span> note<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-quick-clock-in-task</span> <span class="org-rainbow-delimiters-depth-2">(</span>location jump<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Track and clock in on the specified task.</span>
<span class="org-doc">If JUMP is non-nil or the function is called with the prefix argument, jump to that location afterwards."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-rainbow-delimiters-depth-3">(</span>list <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-excursion</span> <span class="org-rainbow-delimiters-depth-5">(</span>org-refile-get-location <span class="org-string">"Location"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> current-prefix-arg<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> location
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> jump
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span> <span class="org-rainbow-delimiters-depth-5">(</span>org-refile 4 nil location<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>sacha/org-clock-in-and-track<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-window-excursion</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>org-refile 4 nil location<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>sacha/org-clock-in-and-track<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c q"</span> 'sacha/org-quick-clock-in-task<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">quantified</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-147" class="outline-4">
<h4 id="unnumbered-147">Compare times and effort estimates</h4>
<div class="outline-text-4" id="text-unnumbered-147">
<p>
<a id="compare-time"></a>
</p>

<p>
This is for comparing times in column view and in tables.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/compare-times</span> <span class="org-rainbow-delimiters-depth-2">(</span>clocked estimated<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>and <span class="org-rainbow-delimiters-depth-4">(</span>&gt; <span class="org-rainbow-delimiters-depth-5">(</span>length clocked<span class="org-rainbow-delimiters-depth-5">)</span> 0<span class="org-rainbow-delimiters-depth-4">)</span> estimated<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>format <span class="org-string">"%.2f"</span>
            <span class="org-rainbow-delimiters-depth-4">(</span>/ <span class="org-rainbow-delimiters-depth-5">(</span>* 1.0 <span class="org-rainbow-delimiters-depth-6">(</span>org-hh:mm-string-to-minutes clocked<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
               <span class="org-rainbow-delimiters-depth-5">(</span>org-hh:mm-string-to-minutes estimated<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Use with <code>#+COLUMNS: %40ITEM %17Effort(Estimated){:} %CLOCKSUM</code>, <code>#+BEGIN: columnview :hlines 1</code> &#x2026; <code>#+END:</code>, and
</p>

<div class="org-src-container">

<pre class="src src-org"><span class="org-org-meta-line">#+TBLFM: $4='(sacha/compare-times $3 $2)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-148" class="outline-4">
<h4 id="unnumbered-148">R</h4>
<div class="outline-text-4" id="text-unnumbered-148">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ess-site</span>
  <span class="org-builtin">:ensure</span> ess
  <span class="org-builtin">:commands</span> R<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-149" class="outline-4">
<h4 id="unnumbered-149">Workrave</h4>
<div class="outline-text-4" id="text-unnumbered-149">
<div class="org-src-container">

<pre class="src src-emacs-lisp">    <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/workrave-file</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">".\\Workrave\\historystats"</span> <span class="org-rainbow-delimiters-depth-3">(</span>getenv <span class="org-string">"AppData"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/workrave-transform-statistics</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> file<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-rainbow-delimiters-depth-3">(</span>list sacha/workrave-file<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-3">(</span>find-file-noselect file<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">D day month-1 year hour min day month-1 year hour min</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>result <span class="org-string">"Date\tStart\tEnd\tClicks\tKeystrokes\n"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward <span class="org-string">"^D </span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> nil t<span class="org-rainbow-delimiters-depth-5">)</span>
  <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>dates <span class="org-rainbow-delimiters-depth-8">(</span>split-string <span class="org-rainbow-delimiters-depth-9">(</span>match-string 1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
    <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>re-search-forward <span class="org-string">"^m </span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> nil t<span class="org-rainbow-delimiters-depth-7">)</span>
        <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-9">(</span>info <span class="org-rainbow-delimiters-depth-1">(</span>split-string <span class="org-rainbow-delimiters-depth-2">(</span>match-string 1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
    <span class="org-rainbow-delimiters-depth-8">(</span>setq result
          <span class="org-rainbow-delimiters-depth-9">(</span>concat result
            <span class="org-rainbow-delimiters-depth-1">(</span>format <span class="org-string">"%d-%d-%s\t%s:%02d\t%s:%02d\t%s\t%s\n"</span>
              <span class="org-rainbow-delimiters-depth-2">(</span>+ 1900 <span class="org-rainbow-delimiters-depth-3">(</span>string-to-number <span class="org-rainbow-delimiters-depth-4">(</span>elt dates 2<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">year</span>
              <span class="org-rainbow-delimiters-depth-2">(</span>1+ <span class="org-rainbow-delimiters-depth-3">(</span>string-to-number <span class="org-rainbow-delimiters-depth-4">(</span>elt dates 1<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">month</span>
              <span class="org-rainbow-delimiters-depth-2">(</span>elt dates 0<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">day</span>
              <span class="org-rainbow-delimiters-depth-2">(</span>elt dates 3<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">start hour</span>
              <span class="org-rainbow-delimiters-depth-2">(</span>string-to-number <span class="org-rainbow-delimiters-depth-3">(</span>elt dates 4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">start min</span>
              <span class="org-rainbow-delimiters-depth-2">(</span>elt dates 8<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">end hour</span>
              <span class="org-rainbow-delimiters-depth-2">(</span>string-to-number <span class="org-rainbow-delimiters-depth-3">(</span>elt dates 9<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">end min</span>
              <span class="org-rainbow-delimiters-depth-2">(</span>elt info 5<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">clicks</span>
              <span class="org-rainbow-delimiters-depth-2">(</span>elt info 6<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">keystrokes</span>
              <span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>interactive-p<span class="org-rainbow-delimiters-depth-5">)</span>
    <span class="org-rainbow-delimiters-depth-5">(</span>kill-new result<span class="org-rainbow-delimiters-depth-5">)</span>
  result<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-150" class="outline-4">
<h4 id="unnumbered-150">Blog</h4>
<div class="outline-text-4" id="text-unnumbered-150">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/strip-blog-share</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>base<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward
              <span class="org-string">"&lt;div class=\"sharedaddy sd-sharing-enabled\"&gt;.*?&lt;div class=\"sharing-clear\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"</span> nil t<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>replace-match <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-151" class="outline-4">
<h4 id="unnumbered-151">Artrage</h4>
<div class="outline-text-4" id="text-unnumbered-151">
<div class="org-src-container">

<pre class="src src-emacs-lisp">        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/artrage-export-png</span> <span class="org-rainbow-delimiters-depth-2">(</span>directory <span class="org-type">&amp;optional</span> prefix<span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-doc">"Change an Artrage script file (arscript) to export images to DIRECTORY.</span>
<span class="org-doc">    If PREFIX is specified, use that instead of image-."</span>
          <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"MPath: "</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span>file-directory-p directory<span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span>make-directory directory t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-3">(</span>re-search-forward <span class="org-string">"[0-9\\.]+s"</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span>replace-match <span class="org-string">"0.000s"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span>goto-char <span class="org-rainbow-delimiters-depth-3">(</span>point-min<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-3">(</span>search-forward <span class="org-string">"&lt;StrokeEvent&gt;"</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span>replace-match <span class="org-rainbow-delimiters-depth-4">(</span>concat
                            <span class="org-string">"EvType: Command    CommandID: ExportLayer    Idx: -1    Channels: NO    Path: \""</span>
                            directory
                            <span class="org-string">"/"</span> <span class="org-rainbow-delimiters-depth-5">(</span>or prefix <span class="org-string">"image-"</span><span class="org-rainbow-delimiters-depth-5">)</span>
                            <span class="org-string">".png\"</span>
<span class="org-string">&lt;StrokeEvent&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> t t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-unnumbered-152" class="outline-3">
<h3 id="unnumbered-152">Workarounds</h3>
<div class="outline-text-3" id="text-unnumbered-152">
</div><div id="outline-container-unnumbered-153" class="outline-4">
<h4 id="unnumbered-153">color-theme sometimes comes across lists. Odd!</h4>
<div class="outline-text-4" id="text-unnumbered-153">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">face-attribute</span> <span class="org-rainbow-delimiters-depth-2">(</span>around sacha activate<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>symbolp <span class="org-rainbow-delimiters-depth-4">(</span>ad-get-arg 0<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      ad-do-it<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-154" class="outline-4">
<h4 id="unnumbered-154">ido-sort-mtime stopped working when I upgraded to Windows 8</h4>
<div class="outline-text-4" id="text-unnumbered-154">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">ido-sort-mtime</span> <span class="org-rainbow-delimiters-depth-2">(</span>around sacha activate<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq ido-temp-list
        <span class="org-rainbow-delimiters-depth-3">(</span>sort ido-temp-list
              <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span>a b<span class="org-rainbow-delimiters-depth-5">)</span>
                <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>ta <span class="org-rainbow-delimiters-depth-8">(</span>or <span class="org-rainbow-delimiters-depth-9">(</span>nth 5 <span class="org-rainbow-delimiters-depth-1">(</span>file-attributes <span class="org-rainbow-delimiters-depth-2">(</span>concat ido-current-directory a<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span> '<span class="org-rainbow-delimiters-depth-9">(</span>0 0<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                      <span class="org-rainbow-delimiters-depth-7">(</span>tb <span class="org-rainbow-delimiters-depth-8">(</span>or <span class="org-rainbow-delimiters-depth-9">(</span>nth 5 <span class="org-rainbow-delimiters-depth-1">(</span>file-attributes <span class="org-rainbow-delimiters-depth-2">(</span>concat ido-current-directory b<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span> '<span class="org-rainbow-delimiters-depth-9">(</span>0 0<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                  <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>= <span class="org-rainbow-delimiters-depth-8">(</span>nth 0 ta<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>nth 0 tb<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                      <span class="org-rainbow-delimiters-depth-7">(</span>&gt; <span class="org-rainbow-delimiters-depth-8">(</span>nth 1 ta<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>nth 1 tb<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                    <span class="org-rainbow-delimiters-depth-7">(</span>&gt; <span class="org-rainbow-delimiters-depth-8">(</span>nth 0 ta<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>nth 0 tb<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq ad-return-value
        <span class="org-rainbow-delimiters-depth-3">(</span>ido-to-end  <span class="org-comment-delimiter">;; </span><span class="org-comment">move . files to end (again)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>delq nil <span class="org-rainbow-delimiters-depth-5">(</span>mapcar
                    <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-8">(</span>string-equal <span class="org-rainbow-delimiters-depth-9">(</span>substring x 0 1<span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-string">"."</span><span class="org-rainbow-delimiters-depth-8">)</span> x<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                    ido-temp-list<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-155" class="outline-4">
<h4 id="unnumbered-155">Cygwin mogrify doesn't work for me, but ImageMagick does</h4>
<div class="outline-text-4" id="text-unnumbered-155">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;</span><span class="org-comment">(setq eimp-mogrify-program "c:/Program Files/ImageMagick-6.8.3-Q16/mogrify.exe")</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-unnumbered-156" class="outline-3">
<h3 id="unnumbered-156">Display</h3>
<div class="outline-text-3" id="text-unnumbered-156">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sanityinc/adjust-opacity</span> <span class="org-rainbow-delimiters-depth-2">(</span>frame incr<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>oldalpha <span class="org-rainbow-delimiters-depth-5">(</span>or <span class="org-rainbow-delimiters-depth-6">(</span>frame-parameter frame 'alpha<span class="org-rainbow-delimiters-depth-6">)</span> 100<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>newalpha <span class="org-rainbow-delimiters-depth-5">(</span>+ incr oldalpha<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>and <span class="org-rainbow-delimiters-depth-5">(</span>&lt;= frame-alpha-lower-limit newalpha<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>&gt;= 100 newalpha<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>modify-frame-parameters frame <span class="org-rainbow-delimiters-depth-5">(</span>list <span class="org-rainbow-delimiters-depth-6">(</span>cons 'alpha newalpha<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-C-8"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>interactive<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>sanityinc/adjust-opacity nil -2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-C-9"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>interactive<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>sanityinc/adjust-opacity nil 2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-C-0"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>interactive<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>modify-frame-parameters nil `<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>alpha . 100<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-157" class="outline-3">
<h3 id="unnumbered-157">Advanced stuff / things I tend to forget about</h3>
<div class="outline-text-3" id="text-unnumbered-157">
</div><div id="outline-container-unnumbered-158" class="outline-4">
<h4 id="unnumbered-158">Editing multiple things</h4>
<div class="outline-text-4" id="text-unnumbered-158">
</div><div id="outline-container-unnumbered-159" class="outline-5">
<h5 id="unnumbered-159"><a id="o2b:61b0ffae-669b-4360-98fd-a6f0ea6f018e"></a>Multiple cursors mode&#xa0;&#xa0;&#xa0;<span class="tag"><span class="drill">drill</span></span></h5>
<div class="outline-text-5" id="text-unnumbered-159">
<p>
I often define keyboard macros to process multiple lines in a region.
Maybe <code>multiple-cursors</code> will be an even better way. Looks promising!
<a href="http://emacsrocks.com/e13.html">See Emacs Rocks episode 13 (multiple-cursors) for a great demo</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">multiple-cursors</span>
  <span class="org-builtin">:ensure</span> multiple-cursors
  <span class="org-builtin">:bind</span>
   <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c m t"</span> . mc/mark-all-like-this<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c m m"</span> . mc/mark-all-like-this-dwim<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c m l"</span> . mc/edit-lines<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c m e"</span> . mc/edit-ends-of-lines<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c m a"</span> . mc/edit-beginnings-of-lines<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c m n"</span> . mc/mark-next-like-this<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c m p"</span> . mc/mark-previous-like-this<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c m s"</span> . mc/mark-sgml-tag-pair<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c m d"</span> . mc/mark-all-like-this-in-defun<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">phi-search</span>
  <span class="org-builtin">:ensure</span> phi-search<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">phi-search-mc</span>
  <span class="org-builtin">:ensure</span> phi-search-mc
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>phi-search-mc/setup-keys<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">mc-extras</span>
  <span class="org-builtin">:ensure</span> mc-extras
  <span class="org-builtin">:config</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>define-key mc/keymap <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-. ="</span><span class="org-rainbow-delimiters-depth-3">)</span> 'mc/compare-chars<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Thanks to <a href="http://irreal.org/blog/?p=1733">Irreal</a> and <a href="http://planet.emacsen.org/">Planet Emacsen</a> for the link!
</p>
</div>
</div>
</div>

<div id="outline-container-unnumbered-160" class="outline-4">
<h4 id="unnumbered-160"><a id="ID-e9147cb0-bad0-421c-9396-4f9045d6ebbb"></a>Edit list&#xa0;&#xa0;&#xa0;<span class="tag"><span class="drill">drill</span></span></h4>
<div class="outline-text-4" id="text-unnumbered-160">
<p>
M-x edit-list makes it easier to edit an Emacs Lisp list.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">edit-list</span>
  <span class="org-builtin">:ensure</span> edit-list
  <span class="org-builtin">:commands</span> edit-list<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-161" class="outline-4">
<h4 id="unnumbered-161"><a id="ID-56f173e7-d2a2-4589-84d7-c6b435c8a5f8"></a>Ace Jump mode&#xa0;&#xa0;&#xa0;<span class="tag"><span class="drill">drill</span></span></h4>
<div class="outline-text-4" id="text-unnumbered-161">
<p>
Quickly jump to a position in the current view.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ace-jump-mode</span>
  <span class="org-builtin">:ensure</span> ace-jump-mode<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">I use the jj key-chord for this; see the definitions for key-chord</span>
</pre>
</div>

<p>
Ace Window looks useful too.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ace-window</span>
  <span class="org-builtin">:ensure</span> ace-window
  <span class="org-builtin">:config</span> <span class="org-rainbow-delimiters-depth-2">(</span>setq aw-keys '<span class="org-rainbow-delimiters-depth-3">(</span>?a ?o ?e ?u ?i ?d ?h ?t ?n ?s<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"C-x o"</span> . ace-window<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
And ace-isearch&#x2026;
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ace-isearch</span>
  <span class="org-builtin">:ensure</span> ace-isearch
  <span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span>global-ace-isearch-mode 1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
And ace-jump-zap&#x2026;
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ace-jump-zap</span>
  <span class="org-builtin">:ensure</span> ace-jump-zap
  <span class="org-builtin">:bind</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-z"</span> . ace-jump-zap-up-to-char-dwim<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-Z"</span> . ace-jump-zap-to-char-dwim<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-162" class="outline-4">
<h4 id="unnumbered-162">Deleting things</h4>
<div class="outline-text-4" id="text-unnumbered-162">
<p>
From Steve Purcell, who linked to <a href="http://www.emacswiki.org/emacs/ZapToISearch">http://www.emacswiki.org/emacs/ZapToISearch</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">zap-to-isearch</span> <span class="org-rainbow-delimiters-depth-2">(</span>rbeg rend<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Kill the region between the mark and the closest portion of</span>
<span class="org-doc">the isearch match string. The behaviour is meant to be analogous</span>
<span class="org-doc">to zap-to-char; let's call it zap-to-isearch. The deleted region</span>
<span class="org-doc">does not include the isearch word. This is meant to be bound only</span>
<span class="org-doc">in isearch mode.  The point of this function is that oftentimes</span>
<span class="org-doc">you want to delete some portion of text, one end of which happens</span>
<span class="org-doc">to be an active isearch word. The observation to make is that if</span>
<span class="org-doc">you use isearch a lot to move the cursor around (as you should,</span>
<span class="org-doc">it is much more efficient than using the arrows), it happens a</span>
<span class="org-doc">lot that you could just delete the active region between the mark</span>
<span class="org-doc">and the point, not include the isearch word."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"r"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>not mark-active<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-warning">error</span> <span class="org-string">"Mark is not active"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>isearch-bounds <span class="org-rainbow-delimiters-depth-5">(</span>list isearch-other-end <span class="org-rainbow-delimiters-depth-6">(</span>point<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>ismin <span class="org-rainbow-delimiters-depth-5">(</span>apply 'min isearch-bounds<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>ismax <span class="org-rainbow-delimiters-depth-5">(</span>apply 'max isearch-bounds<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>&lt; <span class="org-rainbow-delimiters-depth-5">(</span>mark<span class="org-rainbow-delimiters-depth-5">)</span> ismin<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>kill-region <span class="org-rainbow-delimiters-depth-5">(</span>mark<span class="org-rainbow-delimiters-depth-5">)</span> ismin<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>&gt; <span class="org-rainbow-delimiters-depth-6">(</span>mark<span class="org-rainbow-delimiters-depth-6">)</span> ismax<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>kill-region ismax <span class="org-rainbow-delimiters-depth-6">(</span>mark<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-warning">error</span> <span class="org-string">"Internal error in isearch kill function."</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>isearch-exit<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key isearch-mode-map <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">(</span>meta z<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">]</span> 'zap-to-isearch<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
<div id="outline-container-unnumbered-163" class="outline-5">
<h5 id="unnumbered-163"><span class="todo TODO">TODO</span> Get zap-to-isearch to work with helm-swoop</h5>
</div>
</div>
<div id="outline-container-unnumbered-164" class="outline-4">
<h4 id="unnumbered-164">Network: TRAMP and editing files over SSH</h4>
<div class="outline-text-4" id="text-unnumbered-164">
<p>
Emacs lets you edit files on remote servers, which is pretty darn
cool. On Windows, these things help a little.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq tramp-default-method <span class="org-string">"plink"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq tramp-auto-save-directory <span class="org-string">"c:\\sacha\\tmp"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-unnumbered-165" class="outline-3">
<h3 id="unnumbered-165">Other nifty Emacs things I want to learn</h3>
<div class="outline-text-3" id="text-unnumbered-165">
</div><div id="outline-container-unnumbered-166" class="outline-4">
<h4 id="unnumbered-166">Smartparens mode&#xa0;&#xa0;&#xa0;<span class="tag"><span class="drill">drill</span></span></h4>
<div class="outline-text-4" id="text-unnumbered-166">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">smartparens</span>
  <span class="org-builtin">:ensure</span> smartparens
  <span class="org-builtin">:diminish</span> smartparens
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">require</span> '<span class="org-constant">smartparens-config</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'emacs-lisp-mode-hook 'smartparens-mode<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'emacs-lisp-mode-hook 'show-smartparens-mode<span class="org-rainbow-delimiters-depth-3">)</span>

<span class="org-comment-delimiter">;;;;;;;;;;;;;;;;;;;;;;;;</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">keybinding management</span>

    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c s r n"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-narrow-to-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-f"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-forward-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-b"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-backward-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-d"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-down-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-a"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-backward-down-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-S-a"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-beginning-of-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-S-d"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-end-of-sexp<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-e"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-up-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key emacs-lisp-mode-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">")"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-up-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-u"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-backward-up-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-t"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-transpose-sexp<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-n"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-next-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-p"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-previous-sexp<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-k"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-kill-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-w"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-copy-sexp<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"M-&lt;delete&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-unwrap-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"M-&lt;backspace&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-backward-unwrap-sexp<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-&lt;right&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-forward-slurp-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-&lt;left&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-forward-barf-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-&lt;left&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-backward-slurp-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-&lt;right&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-backward-barf-sexp<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"M-D"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-splice-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-&lt;delete&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-splice-sexp-killing-forward<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-&lt;backspace&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-splice-sexp-killing-backward<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-S-&lt;backspace&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-splice-sexp-killing-around<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-]"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-select-next-thing-exchange<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-&lt;left_bracket&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-select-previous-thing<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-M-]"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-select-next-thing<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"M-F"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-forward-symbol<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"M-B"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-backward-symbol<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c s t"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-prefix-tag-object<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c s p"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-prefix-pair-object<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c s c"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-convolute-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c s a"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-absorb-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c s e"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-emit-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c s p"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-add-to-previous-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c s n"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-add-to-next-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c s j"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-join-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key sp-keymap <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c s s"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'sp-split-sexp<span class="org-rainbow-delimiters-depth-3">)</span>

<span class="org-comment-delimiter">;;;;;;;;;;;;;;;;;;</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">pair management</span>

    <span class="org-rainbow-delimiters-depth-3">(</span>sp-local-pair 'minibuffer-inactive-mode <span class="org-string">"'"</span> nil <span class="org-builtin">:actions</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>sp-local-pair 'web-mode <span class="org-string">"&lt;"</span> nil <span class="org-builtin">:when</span> '<span class="org-rainbow-delimiters-depth-4">(</span>sacha/sp-web-mode-is-code-context<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">markdown-mode</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">sp-with-modes</span> '<span class="org-rainbow-delimiters-depth-4">(</span>markdown-mode gfm-mode rst-mode<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>sp-local-pair <span class="org-string">"*"</span> <span class="org-string">"*"</span> <span class="org-builtin">:bind</span> <span class="org-string">"C-*"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>sp-local-tag <span class="org-string">"2"</span> <span class="org-string">"**"</span> <span class="org-string">"**"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>sp-local-tag <span class="org-string">"s"</span> <span class="org-string">"```scheme"</span> <span class="org-string">"```"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>sp-local-tag <span class="org-string">"&lt;"</span>  <span class="org-string">"&lt;_&gt;"</span> <span class="org-string">"&lt;/_&gt;"</span> <span class="org-builtin">:transform</span> 'sp-match-sgml-tags<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">tex-mode latex-mode</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">sp-with-modes</span> '<span class="org-rainbow-delimiters-depth-4">(</span>tex-mode plain-tex-mode latex-mode<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>sp-local-tag <span class="org-string">"i"</span> <span class="org-string">"1d5f8e69396c521f645375107197ea4dfbc7b792quot;&lt;"</span> <span class="org-string">"1d5f8e69396c521f645375107197ea4dfbc7b792quot;&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">html-mode</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">sp-with-modes</span> '<span class="org-rainbow-delimiters-depth-4">(</span>html-mode sgml-mode web-mode<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>sp-local-pair <span class="org-string">"&lt;"</span> <span class="org-string">"&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">lisp modes</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">sp-with-modes</span> sp--lisp-modes
      <span class="org-rainbow-delimiters-depth-4">(</span>sp-local-pair <span class="org-string">"("</span> nil <span class="org-builtin">:bind</span> <span class="org-string">"C-("</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-unnumbered-167" class="outline-3">
<h3 id="unnumbered-167">Web browsing</h3>
<div class="outline-text-3" id="text-unnumbered-167">
<p>
Minor tweak for Firefox on Windows. Otherwise I get "Searching for
program" "permission denied" "firefox".
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq browse-url-firefox-program
      <span class="org-string">"C:/Program Files (x86)/Mozilla Firefox/firefox.exe"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-168" class="outline-3">
<h3 id="unnumbered-168">Transcript editing</h3>
<div class="outline-text-3" id="text-unnumbered-168">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">emms</span>
  <span class="org-builtin">:ensure</span> emms
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">require</span> '<span class="org-constant">emms-player-simple</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">require</span> '<span class="org-constant">emms-source-file</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">require</span> '<span class="org-constant">emms-source-playlist</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">require</span> '<span class="org-constant">emms-player-mplayer</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq emms-player-list '<span class="org-rainbow-delimiters-depth-4">(</span>emms-player-mplayer<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c e SPC"</span> . emms-pause<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c e e"</span> . emms-pause<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c e +"</span> . emms-seek-forward<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c e -"</span> . emms-seek-backward<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c e s"</span> . emms-seek<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c e ["</span> . sacha/emms-player-mplayer-slow-down<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c e ]"</span> . sacha/emms-player-mplayer-speed-up<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c t s"</span>  'sacha/split-sentence-and-capitalize org-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c t -"</span>  'sacha/split-sentence-delete-word-and-capitalize org-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>bind-key <span class="org-string">"C-c t d"</span>  'sacha/delete-word-and-capitalize org-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/split-sentence-and-capitalize</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>delete-char 1<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>insert <span class="org-string">"."</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>capitalize-word 1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/split-sentence-delete-word-and-capitalize</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>delete-char 1<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>insert <span class="org-string">"."</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>kill-word 1<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>capitalize-word 1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/delete-word-and-capitalize</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>skip-syntax-backward <span class="org-string">"w"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>kill-word 1<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>capitalize-word 1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/emms-player-mplayer-set-speed</span> <span class="org-rainbow-delimiters-depth-2">(</span>speed<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Depends on mplayer's -slave mode"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-string">"MSpeed: "</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>process-send-string emms-player-simple-process-name
     <span class="org-rainbow-delimiters-depth-3">(</span>format <span class="org-string">"speed_set %s\n"</span> speed<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/emms-player-mplayer-speed-increment</span> 0.1<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/emms-player-mplayer-speed-up</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Depends on mplayer's -slave mode"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>process-send-string emms-player-simple-process-name
     <span class="org-rainbow-delimiters-depth-3">(</span>format <span class="org-string">"speed_incr %f\n"</span> sacha/emms-player-mplayer-speed-increment<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/emms-player-mplayer-slow-down</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Depends on mplayer's -slave mode"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>process-send-string emms-player-simple-process-name
     <span class="org-rainbow-delimiters-depth-3">(</span>format <span class="org-string">"speed_incr %f\n"</span> <span class="org-rainbow-delimiters-depth-4">(</span>- 0 sacha/emms-player-mplayer-speed-increment<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-169" class="outline-3">
<h3 id="unnumbered-169">Japanese</h3>
<div class="outline-text-3" id="text-unnumbered-169">
<p>
Got sdic from <a href="http://namazu.org/~tsuchiya/sdic/">http://namazu.org/~tsuchiya/sdic/</a> . Attempting to get this to work on Windows&#x2026;
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'load-path <span class="org-string">"~/elisp/sdic-2.1.3/lisp"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">sdic</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">cond</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>file-exists-p <span class="org-string">"~/Dropbox/Japanese/edict.txt"</span><span class="org-rainbow-delimiters-depth-3">)</span>
       <span class="org-rainbow-delimiters-depth-3">(</span>setq sdic-waei-dictionary-list
       <span class="org-rainbow-delimiters-depth-4">(</span>cons
        '<span class="org-rainbow-delimiters-depth-5">(</span>sdicf-client <span class="org-string">"~/Dropbox/Japanese/edict.txt"</span> <span class="org-rainbow-delimiters-depth-6">(</span>add-keys-to-headword t<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        sdic-waei-dictionary-list<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">cond</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>file-exists-p <span class="org-string">"~/Dropbox/Japanese/jedict.sdic.txt"</span><span class="org-rainbow-delimiters-depth-3">)</span>
       <span class="org-rainbow-delimiters-depth-3">(</span>setq sdic-waei-dictionary-list
       <span class="org-rainbow-delimiters-depth-4">(</span>cons
        '<span class="org-rainbow-delimiters-depth-5">(</span>sdicf-client <span class="org-string">"~/Dropbox/Japanese/jedict.sdic.txt"</span> <span class="org-rainbow-delimiters-depth-6">(</span>add-keys-to-headword t<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        sdic-waei-dictionary-list<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-unnumbered-170" class="outline-2">
<h2 id="unnumbered-170">Other cool configs you may want to check out</h2>
<div class="outline-text-2" id="text-unnumbered-170">
<p>
<a id="links"></a>
</p>

<ul class="org-ul">
<li><a href="http://doc.norang.ca/org-mode.html">Bernt Hansen</a>: Lots of Org-related config. I picked up the graph-drawing stuff from this.
</li>
<li><a href="http://bzg.fr/emacs.html">Bastien Guerry</a>: Org, Gnus, ERC - Explained in this <a href="http://sachachua.com/blog/2013/05/emacs-chat-bastien-guerry/">Emacs Chat (~1h)</a>
</li>
<li><a href="https://github.com/iani/emacs-prelude">Iannis Zannos</a>: Explained in this <a href="https://www.youtube.com/watch?v=0F8aCbC9z3A">Emacs Chat (~1h)</a>
</li>
<li><a href="https://github.com/magnars/.emacs.d">Magnar Sveen</a>: <a href="http://whattheemacsd.com/">http://whattheemacsd.com/</a> has some explanations. <a href="http://sachachua.com/blog/2013/11/emacs-chat-magnar-sveen-emacs-rocks/">Emacs Chat (~1h)</a>
</li>
<li><a href="https://github.com/jwiegley/dot-emacs">John Wiegley</a>: Also see his <a href="http://www.youtube.com/watch?v=RvPFZL6NJNQ">Emacs Lisp Development talk</a> (sorry, sucky video) and <a href="http://www.youtube.com/watch?v=ytNsHmRLZGM">Emacs Chat video</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-unnumbered-171" class="outline-2">
<h2 id="unnumbered-171">Inactive/infrequent things</h2>
<div class="outline-text-2" id="text-unnumbered-171">
</div><div id="outline-container-unnumbered-172" class="outline-3">
<h3 id="unnumbered-172">Org - mapping blog posts and image URLs from bulk exports</h3>
<div class="outline-text-3" id="text-unnumbered-172">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-map-blog-and-image-urls</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Extract and map blog post / image URLs."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>goto-char <span class="org-rainbow-delimiters-depth-3">(</span>point-min<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>keep-lines <span class="org-string">"h2</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">img"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>goto-char <span class="org-rainbow-delimiters-depth-3">(</span>point-min<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-3">(</span>re-search-forward
          <span class="org-string">"^.*?h2.*?a href=\"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\".*$"</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>replace-match <span class="org-string">"\\1"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>goto-char <span class="org-rainbow-delimiters-depth-3">(</span>point-min<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-3">(</span>re-search-forward
          <span class="org-string">"^.*?src=\"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\".*$"</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>replace-match <span class="org-string">"\\1"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>last-post current-url result<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-4">(</span>re-search-forward <span class="org-string">"http://</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> nil t<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>setq current-url <span class="org-rainbow-delimiters-depth-5">(</span>match-string 0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>string-match <span class="org-string">"/</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">/]*?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">_thumb</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">-640x.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">?.png"</span> current-url<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq result <span class="org-rainbow-delimiters-depth-6">(</span>cons <span class="org-rainbow-delimiters-depth-7">(</span>concat <span class="org-rainbow-delimiters-depth-8">(</span>match-string 1 current-url<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">"\t"</span> last-post<span class="org-rainbow-delimiters-depth-7">)</span> result<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>setq last-post current-url<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>kill-new <span class="org-rainbow-delimiters-depth-4">(</span>mapconcat 'identity result <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-173" class="outline-3">
<h3 id="unnumbered-173">Beeminder</h3>
<div class="outline-text-3" id="text-unnumbered-173">
<p>
<a id="beeminder"></a>
</p>

<p>
<a href="https://github.com/sachac/beeminder.el">https://github.com/sachac/beeminder.el</a>
</p>

<p>
This bit of code lets me track sent messages in Gnus:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/beeminder-track-message</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>re-search-forward <span class="org-string">"Newsgroups: .*emacs"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward <span class="org-string">"Subject: </span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> nil t<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>beeminder-add-data <span class="org-string">"orgml"</span> <span class="org-string">"1"</span> <span class="org-rainbow-delimiters-depth-6">(</span>match-string 1<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
And this loads the beeminder code:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">beeminder</span>
  <span class="org-builtin">:config</span> <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'message-send-news-hook 'sacha/beeminder-track-message<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-174" class="outline-3">
<h3 id="unnumbered-174">Strike through DONE headlines</h3>
<div class="outline-text-3" id="text-unnumbered-174">
<p>
I wanted a quick way to visually distinguish DONE tasks from tasks I
still need to do. This <a href="http://lists.gnu.org/archive/html/emacs-orgmode/2007-03/msg00179.html">handy snippet from the Emacs Org-mode mailing list</a> does the trick by striking through the headlines for DONE tasks.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq org-fontify-done-headline t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>custom-set-faces
 '<span class="org-rainbow-delimiters-depth-2">(</span>org-done <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>t <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"PaleGreen"</span>
                 <span class="org-builtin">:weight</span> normal
                 <span class="org-builtin">:strike-through</span> t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
 '<span class="org-rainbow-delimiters-depth-2">(</span>org-headline-done
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>class color<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>min-colors 16<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>background dark<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
               <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"LightSalmon"</span> <span class="org-builtin">:strike-through</span> t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-175" class="outline-3">
<h3 id="unnumbered-175">Rainbow delimiters</h3>
<div class="outline-text-3" id="text-unnumbered-175">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">rainbow-delimiters</span>
  <span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'emacs-lisp-mode-hook 'rainbow-delimiters-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-176" class="outline-3">
<h3 id="unnumbered-176">Drupal</h3>
<div class="outline-text-3" id="text-unnumbered-176">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-derived-mode</span> <span class="org-function-name">drupal-mode</span> php-mode <span class="org-string">"Drupal"</span>
  <span class="org-doc">"Major mode for Drupal source code.</span>
<span class="org-doc">\\{drupal-mode-map}"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq case-fold-search t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq indent-tabs-mode nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq c-basic-offset 2<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq indent-tabs-mode nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq tab-width 2<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq fill-column 78<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>c-set-offset 'arglist-cont 0<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>c-set-offset 'arglist-intro '+<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>c-set-offset 'case-label 2<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>c-set-offset 'arglist-close 0<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq yas/buffer-local-condition
  '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">cond</span>
   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>looking-at <span class="org-string">"\\w"</span><span class="org-rainbow-delimiters-depth-5">)</span> nil<span class="org-rainbow-delimiters-depth-4">)</span>
   <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>and
     <span class="org-rainbow-delimiters-depth-6">(</span>not <span class="org-rainbow-delimiters-depth-7">(</span>bobp<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
     <span class="org-rainbow-delimiters-depth-6">(</span>or <span class="org-rainbow-delimiters-depth-7">(</span>equal <span class="org-string">"font-lock-comment-face"</span>
                <span class="org-rainbow-delimiters-depth-8">(</span>get-char-property <span class="org-rainbow-delimiters-depth-9">(</span>1- <span class="org-rainbow-delimiters-depth-1">(</span>point<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span> 'face<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
         <span class="org-rainbow-delimiters-depth-7">(</span>equal <span class="org-string">"font-lock-string-face"</span>
                <span class="org-rainbow-delimiters-depth-8">(</span>get-char-property <span class="org-rainbow-delimiters-depth-9">(</span>1- <span class="org-rainbow-delimiters-depth-1">(</span>point<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span> 'face<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
    '<span class="org-rainbow-delimiters-depth-5">(</span>require-snippet-condition . force-in-comment<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
   <span class="org-rainbow-delimiters-depth-4">(</span>t t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key drupal-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"TAB"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'indent-according-to-mode<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'drupal-mode-hook <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>flymake-mode 1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'drupal-mode-hook <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>yas/minor-mode 1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'auto-mode-alist '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">php</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">test</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">module</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">inc</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">install</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">engine</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">profile</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">.theme</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">$"</span> . drupal-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'auto-mode-alist '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.tpl.php$"</span> . html-helper-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key drupal-mode-map '<span class="org-rainbow-delimiters-depth-2">[</span>M-S-up<span class="org-rainbow-delimiters-depth-2">]</span> 'flymake-goto-prev-error<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key drupal-mode-map '<span class="org-rainbow-delimiters-depth-2">[</span>M-S-down<span class="org-rainbow-delimiters-depth-2">]</span> 'flymake-goto-next-error<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key drupal-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c C-c"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'comment-dwim<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/drupal-module-name</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Return the Drupal module name for .module and .install files."</span>    <span class="org-rainbow-delimiters-depth-2">(</span>file-name-sans-extension <span class="org-rainbow-delimiters-depth-3">(</span>file-name-nondirectory
                             <span class="org-rainbow-delimiters-depth-4">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'hs-special-modes-alist '<span class="org-rainbow-delimiters-depth-2">(</span>drupal-mode <span class="org-string">"{"</span> <span class="org-string">"}"</span> <span class="org-string">"/[*/]"</span> nil hs-c-like-adjust-block-beginning<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-unnumbered-177" class="outline-3">
<h3 id="unnumbered-177">Autoconnect to IRC so that I don't forget</h3>
<div class="outline-text-3" id="text-unnumbered-177">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>erc <span class="org-builtin">:server</span> <span class="org-string">"irc.freenode.net"</span> <span class="org-builtin">:port</span> 6667 <span class="org-builtin">:nick</span> <span class="org-string">"sachac"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-178" class="outline-3">
<h3 id="unnumbered-178">Org - send things to the bottom of the list</h3>
<div class="outline-text-3" id="text-unnumbered-178">
<p>
Handy for collecting items together.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-send-to-bottom-of-list</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Send the current line to the bottom of the list."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>beginning-of-line<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>kill-whole-line t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>kill-line 1<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-end-of-item-list<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>yank<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-179" class="outline-3">
<h3 id="unnumbered-179">Previous weekly review</h3>
<div class="outline-text-3" id="text-unnumbered-179">
<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/org-quantified-categories</span>
    '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Business"</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Earn"</span> . <span class="org-string">"Business - Earn"</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"E1"</span> . <span class="org-string">"Business - Earn - Consulting - E1"</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Connect"</span> . <span class="org-string">"Business - Connect"</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Build"</span> . <span class="org-string">"Business - Build"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Discretionary"</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Social"</span> . <span class="org-string">"Discretionary - Social"</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Productive"</span> . <span class="org-string">"Discretionary - Productive"</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Writing"</span> . <span class="org-string">"Discretionary - Productive - Writing"</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Emacs"</span> . <span class="org-string">"Discretionary - Productive - Emacs"</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Play"</span> . <span class="org-string">"Discretionary - Play"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Personal"</span> <span class="org-comment-delimiter">;</span><span class="org-comment">("Biking" . "Personal - Bike")</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Routines"</span> . <span class="org-string">"Personal - Routines"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Sleep"</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Unpaid work"</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Commuting"</span> . <span class="org-string">"Unpaid work - Subway"</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Cook"</span> . <span class="org-string">"Unpaid work - Cook"</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Tidy"</span> . <span class="org-string">"Unpaid work - Tidy up"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-doc">"Categories for time summary."</span><span class="org-rainbow-delimiters-depth-1">)</span>

  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-summarize-time-use</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> start end<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">require</span> '<span class="org-constant">quantified</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> start <span class="org-rainbow-delimiters-depth-3">(</span>setq start <span class="org-rainbow-delimiters-depth-4">(</span>format-time-string <span class="org-string">"%Y-%m-%d"</span> <span class="org-rainbow-delimiters-depth-5">(</span>days-to-time <span class="org-rainbow-delimiters-depth-6">(</span>- <span class="org-rainbow-delimiters-depth-7">(</span>time-to-number-of-days base-date<span class="org-rainbow-delimiters-depth-7">)</span> 6<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> end <span class="org-rainbow-delimiters-depth-3">(</span>setq end <span class="org-rainbow-delimiters-depth-4">(</span>format-time-string <span class="org-string">"%Y-%m-%d"</span> <span class="org-rainbow-delimiters-depth-5">(</span>days-to-time <span class="org-rainbow-delimiters-depth-6">(</span>1+ <span class="org-rainbow-delimiters-depth-7">(</span>time-to-number-of-days base-date<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>time-summary <span class="org-rainbow-delimiters-depth-5">(</span>quantified-summarize-time start end<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>categories sacha/org-quantified-categories<span class="org-rainbow-delimiters-depth-4">)</span>
          result<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>setq result
            <span class="org-rainbow-delimiters-depth-4">(</span>mapconcat
             <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">(</span>a<span class="org-rainbow-delimiters-depth-6">)</span>
               <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>assoc <span class="org-rainbow-delimiters-depth-8">(</span>car a<span class="org-rainbow-delimiters-depth-8">)</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span>
                   <span class="org-rainbow-delimiters-depth-7">(</span>concat
                    <span class="org-rainbow-delimiters-depth-8">(</span>format <span class="org-string">"- %s: %.1f hours"</span> <span class="org-rainbow-delimiters-depth-9">(</span>car a<span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-rainbow-delimiters-depth-9">(</span>/ <span class="org-rainbow-delimiters-depth-1">(</span>cdr <span class="org-rainbow-delimiters-depth-2">(</span>assoc <span class="org-rainbow-delimiters-depth-3">(</span>car a<span class="org-rainbow-delimiters-depth-3">)</span> time-summary<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> 3600.0<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                    <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-9">(</span>cdr a<span class="org-rainbow-delimiters-depth-9">)</span>
                        <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>detail
                               <span class="org-rainbow-delimiters-depth-3">(</span>delq nil
                                     <span class="org-rainbow-delimiters-depth-4">(</span>mapcar <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">(</span>b<span class="org-rainbow-delimiters-depth-6">)</span>
                                               <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>assoc <span class="org-rainbow-delimiters-depth-8">(</span>cdr b<span class="org-rainbow-delimiters-depth-8">)</span> time-summary<span class="org-rainbow-delimiters-depth-7">)</span>
                                                   <span class="org-rainbow-delimiters-depth-7">(</span>format <span class="org-string">"%s: %.1f"</span>
                                                           <span class="org-rainbow-delimiters-depth-8">(</span>car b<span class="org-rainbow-delimiters-depth-8">)</span>
                                                           <span class="org-rainbow-delimiters-depth-8">(</span>/ <span class="org-rainbow-delimiters-depth-9">(</span>cdr <span class="org-rainbow-delimiters-depth-1">(</span>assoc <span class="org-rainbow-delimiters-depth-2">(</span>cdr b<span class="org-rainbow-delimiters-depth-2">)</span> time-summary<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span> 3600.0<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                                                 nil<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
                                             <span class="org-rainbow-delimiters-depth-5">(</span>cdr a<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                          <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> detail
                              <span class="org-rainbow-delimiters-depth-2">(</span>concat <span class="org-string">" ("</span> <span class="org-rainbow-delimiters-depth-3">(</span>mapconcat 'identity detail <span class="org-string">", "</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-string">")"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                            <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                      <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-8">)</span>
                    <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-9">(</span>string-equal <span class="org-rainbow-delimiters-depth-1">(</span>car a<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Sleep"</span><span class="org-rainbow-delimiters-depth-9">)</span>
                        <span class="org-rainbow-delimiters-depth-9">(</span>format <span class="org-string">" - average of %.1f hours per day"</span> <span class="org-rainbow-delimiters-depth-1">(</span>/ <span class="org-rainbow-delimiters-depth-2">(</span>cdr <span class="org-rainbow-delimiters-depth-3">(</span>assoc <span class="org-rainbow-delimiters-depth-4">(</span>car a<span class="org-rainbow-delimiters-depth-4">)</span> time-summary<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> 3600.0 7.0<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                      <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-8">)</span>
                    <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
       categories <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>called-interactively-p<span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span>insert result<span class="org-rainbow-delimiters-depth-4">)</span>
  result<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
List upcoming tasks so that I can see if I'm overloaded.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-summarize-upcoming-week</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Summarize upcoming tasks as a list."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-agenda nil <span class="org-string">"w"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>string <span class="org-rainbow-delimiters-depth-5">(</span>buffer-string<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        business relationships life<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-temp-buffer</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert string<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward sacha/weekly-review-line-regexp nil t<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">cond</span>
         <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>string= <span class="org-rainbow-delimiters-depth-8">(</span>match-string 1<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">"routines"</span><span class="org-rainbow-delimiters-depth-7">)</span> nil<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">skip routine tasks</span>
         <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>string= <span class="org-rainbow-delimiters-depth-8">(</span>match-string 1<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">"business"</span><span class="org-rainbow-delimiters-depth-7">)</span>
          <span class="org-rainbow-delimiters-depth-7">(</span>add-to-list 'business <span class="org-rainbow-delimiters-depth-8">(</span>concat <span class="org-string">"  - [ ] "</span> <span class="org-rainbow-delimiters-depth-9">(</span>match-string 3<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>string= <span class="org-rainbow-delimiters-depth-8">(</span>match-string 1<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">"people"</span><span class="org-rainbow-delimiters-depth-7">)</span>
          <span class="org-rainbow-delimiters-depth-7">(</span>add-to-list 'relationships <span class="org-rainbow-delimiters-depth-8">(</span>concat <span class="org-string">"  - [ ] "</span> <span class="org-rainbow-delimiters-depth-9">(</span>match-string 3<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         <span class="org-rainbow-delimiters-depth-6">(</span>t <span class="org-rainbow-delimiters-depth-7">(</span>add-to-list 'life <span class="org-rainbow-delimiters-depth-8">(</span>concat <span class="org-string">"  - [ ] "</span> <span class="org-rainbow-delimiters-depth-9">(</span>match-string 3<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq string
          <span class="org-rainbow-delimiters-depth-4">(</span>concat
      <span class="org-string">"*Plans for next week*\n"</span>
      <span class="org-string">"- Business\n"</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat 'identity business <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-string">"\n- Relationships\n"</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat 'identity relationships <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-string">"\n- Life\n"</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat 'identity life <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>called-interactively-p<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>kill-new string<span class="org-rainbow-delimiters-depth-4">)</span>
      string<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
This uses Org Agenda's log mode to summarize the tasks that I checked
off. I still need to match it up with the plans for the previous week
to see which items I'd planned ahead, and which ones were new tasks.
(Hmm, is it important to track those separately? I might just skip it.)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-summarize-previous-week</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Summarize previously-completed tasks as a list."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-window-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-agenda nil <span class="org-string">"w"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-agenda-later -1<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-agenda-log-mode 16<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>string <span class="org-rainbow-delimiters-depth-6">(</span>buffer-string<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          business relationships life<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">with-temp-buffer</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>insert string<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>goto-char <span class="org-rainbow-delimiters-depth-6">(</span>point-min<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-6">(</span>re-search-forward sacha/weekly-review-line-regexp nil t<span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">cond</span>
         <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>string= <span class="org-rainbow-delimiters-depth-9">(</span>match-string 1<span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-string">"routines"</span><span class="org-rainbow-delimiters-depth-8">)</span> nil<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">skip routine tasks</span>
         <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>string= <span class="org-rainbow-delimiters-depth-9">(</span>match-string 1<span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-string">"business"</span><span class="org-rainbow-delimiters-depth-8">)</span>
          <span class="org-rainbow-delimiters-depth-8">(</span>add-to-list 'business <span class="org-rainbow-delimiters-depth-9">(</span>concat <span class="org-string">"  - "</span> <span class="org-rainbow-delimiters-depth-1">(</span>match-string 2<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
         <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>string= <span class="org-rainbow-delimiters-depth-9">(</span>match-string 1<span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-string">"people"</span><span class="org-rainbow-delimiters-depth-8">)</span>
          <span class="org-rainbow-delimiters-depth-8">(</span>add-to-list 'relationships <span class="org-rainbow-delimiters-depth-9">(</span>concat <span class="org-string">"  - "</span> <span class="org-rainbow-delimiters-depth-1">(</span>match-string 2<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
         <span class="org-rainbow-delimiters-depth-7">(</span>t <span class="org-rainbow-delimiters-depth-8">(</span>add-to-list 'life <span class="org-rainbow-delimiters-depth-9">(</span>concat <span class="org-string">"  - "</span> <span class="org-rainbow-delimiters-depth-1">(</span>match-string 2<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span>setq string
          <span class="org-rainbow-delimiters-depth-5">(</span>concat
           <span class="org-string">"*Accomplished this week*\n\n"</span>
           <span class="org-string">"- Business\n"</span>
           <span class="org-rainbow-delimiters-depth-6">(</span>mapconcat 'identity business <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-6">)</span>
           <span class="org-string">"\n- Relationships\n"</span>
           <span class="org-rainbow-delimiters-depth-6">(</span>mapconcat 'identity relationships <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-6">)</span>
           <span class="org-string">"\n- Life\n"</span>
           <span class="org-rainbow-delimiters-depth-6">(</span>mapconcat 'identity life <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>called-interactively-p<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>kill-new string<span class="org-rainbow-delimiters-depth-5">)</span>
      string<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-180" class="outline-3">
<h3 id="unnumbered-180">Animation for Emacs chats</h3>
<div class="outline-text-3" id="text-unnumbered-180">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/animate-emacs-chat</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>text-scale-set 6<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>erase-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sit-for 3<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>list '<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"Emacs Chat: Sacha Chua"</span>
                <span class="org-string">"interviewed by Bastien Guerry"</span>
                <span class="org-string">""</span>
                <span class="org-string">"July 24, 2013"</span>
                <span class="org-string">"sachachua.com/emacs-chat"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>approx-width 41<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>approx-height 16<span class="org-rainbow-delimiters-depth-4">)</span>
        row<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq row <span class="org-rainbow-delimiters-depth-4">(</span>/ <span class="org-rainbow-delimiters-depth-5">(</span>- approx-height <span class="org-rainbow-delimiters-depth-6">(</span>length list<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> 2<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>mapcar
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span>x<span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span>animate-string x
                       row
                       <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>- approx-width <span class="org-rainbow-delimiters-depth-8">(</span>length x<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> 2<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span>setq row <span class="org-rainbow-delimiters-depth-6">(</span>1+ row<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     list<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-181" class="outline-3">
<h3 id="unnumbered-181">Idle timer</h3>
<div class="outline-text-3" id="text-unnumbered-181">
<p>
This snippet is from John Wiegley -
<a href="http://lists.gnu.org/archive/html/emacs-orgmode/2010-03/msg00367.html">http://lists.gnu.org/archive/html/emacs-orgmode/2010-03/msg00367.html</a>.
It shows the org agenda when Emacs is idle.
</p>

<p>
Thanks to winner-mode, I can get back to my previous buffers with C-c
left.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">jump-to-org-agenda</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>buf <span class="org-rainbow-delimiters-depth-5">(</span>get-buffer <span class="org-string">"*Org Agenda*"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        wind<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> buf
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>setq wind <span class="org-rainbow-delimiters-depth-6">(</span>get-buffer-window buf<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>select-window wind<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>called-interactively-p<span class="org-rainbow-delimiters-depth-6">)</span>
              <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">progn</span>
                <span class="org-rainbow-delimiters-depth-7">(</span>select-window <span class="org-rainbow-delimiters-depth-8">(</span>display-buffer buf t t<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                <span class="org-rainbow-delimiters-depth-7">(</span>org-fit-window-to-buffer<span class="org-rainbow-delimiters-depth-7">)</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">(org-agenda-redo)</span>
                <span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">with-selected-window</span> <span class="org-rainbow-delimiters-depth-7">(</span>display-buffer buf<span class="org-rainbow-delimiters-depth-7">)</span>
              <span class="org-rainbow-delimiters-depth-7">(</span>org-fit-window-to-buffer<span class="org-rainbow-delimiters-depth-7">)</span>
              <span class="org-comment-delimiter">;; </span><span class="org-comment">(org-agenda-redo)</span>
              <span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>call-interactively 'org-agenda-list<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;;</span><span class="org-comment">(let ((buf (get-buffer "*Calendar*")))</span>
  <span class="org-comment-delimiter">;;  </span><span class="org-comment">(unless (get-buffer-window buf)</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">(org-agenda-goto-calendar)))</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>run-with-idle-timer 300 t 'jump-to-org-agenda<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-182" class="outline-3">
<h3 id="unnumbered-182">Old Flickr/Evernote export</h3>
<div class="outline-text-3" id="text-unnumbered-182">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">I don't use these as much now that I have the functions above.</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/evernote-extract-links</span> <span class="org-rainbow-delimiters-depth-2">(</span>filename<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Extract note names and URLs from an ENEX file."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>goto-char <span class="org-rainbow-delimiters-depth-3">(</span>point-min<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>list<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-4">(</span>re-search-forward <span class="org-string">"&lt;title&gt;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.+?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">&lt;/title&gt;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*?\n</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">*?.*?href=\"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.*?</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\""</span> nil t<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>setq list <span class="org-rainbow-delimiters-depth-5">(</span>cons <span class="org-rainbow-delimiters-depth-6">(</span>cons <span class="org-rainbow-delimiters-depth-7">(</span>match-string-no-properties 1<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>match-string-no-properties 3<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span> list<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>delete-region <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>point-max<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>insert <span class="org-rainbow-delimiters-depth-4">(</span>mapconcat <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">(</span>x<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>concat <span class="org-string">"- [["</span> <span class="org-rainbow-delimiters-depth-7">(</span>cdr x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"]["</span> <span class="org-rainbow-delimiters-depth-7">(</span>car x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"]]"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> list <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/flickr-extract-this-week</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Extract this week's sketch titles and URLs from the flickr_metadata CSV."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>base-date <span class="org-rainbow-delimiters-depth-5">(</span>apply 'encode-time <span class="org-rainbow-delimiters-depth-6">(</span>org-read-date-analyze <span class="org-string">"-fri"</span> nil '<span class="org-rainbow-delimiters-depth-7">(</span>0 0 0<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        start end list<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq start <span class="org-rainbow-delimiters-depth-4">(</span>format-time-string <span class="org-string">"%Y-%m-%d"</span> <span class="org-rainbow-delimiters-depth-5">(</span>days-to-time <span class="org-rainbow-delimiters-depth-6">(</span>- <span class="org-rainbow-delimiters-depth-7">(</span>time-to-number-of-days base-date<span class="org-rainbow-delimiters-depth-7">)</span> 6<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq end <span class="org-rainbow-delimiters-depth-4">(</span>format-time-string <span class="org-string">"%Y-%m-%d"</span> <span class="org-rainbow-delimiters-depth-5">(</span>days-to-time <span class="org-rainbow-delimiters-depth-6">(</span>1+ <span class="org-rainbow-delimiters-depth-7">(</span>time-to-number-of-days base-date<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq list <span class="org-rainbow-delimiters-depth-4">(</span>csv-parse-buffer t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>erase-buffer<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>insert
     <span class="org-rainbow-delimiters-depth-4">(</span>mapconcat <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">(</span>x<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>concat <span class="org-string">"- [["</span> <span class="org-rainbow-delimiters-depth-7">(</span>car x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"]["</span> <span class="org-rainbow-delimiters-depth-7">(</span>cdr x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"]]"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
                <span class="org-rainbow-delimiters-depth-5">(</span>sort
                 <span class="org-rainbow-delimiters-depth-6">(</span>delq nil
                       <span class="org-rainbow-delimiters-depth-7">(</span>mapcar <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-9">(</span>x<span class="org-rainbow-delimiters-depth-9">)</span>
                                 <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>title <span class="org-rainbow-delimiters-depth-3">(</span>cdr <span class="org-rainbow-delimiters-depth-4">(</span>assoc <span class="org-string">"FileName"</span> x<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                                   <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>and <span class="org-rainbow-delimiters-depth-3">(</span>not <span class="org-rainbow-delimiters-depth-4">(</span>string&lt; title start<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                                            <span class="org-rainbow-delimiters-depth-3">(</span>string&lt; title end<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                       <span class="org-rainbow-delimiters-depth-2">(</span>cons <span class="org-rainbow-delimiters-depth-3">(</span>cdr <span class="org-rainbow-delimiters-depth-4">(</span>assoc <span class="org-string">"URL"</span> x<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> title<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                               list<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                 <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>a b<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>string&lt;  <span class="org-rainbow-delimiters-depth-8">(</span>cdr a<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>cdr b<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                 <span class="org-rainbow-delimiters-depth-5">)</span>
                <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-183" class="outline-3">
<h3 id="unnumbered-183">Presentation code for Emacs Conference</h3>
<div class="outline-text-3" id="text-unnumbered-183">
<p>
<a id="emacsconf2013"></a>
</p>

<div class="org-src-container">

<pre class="src src-:eval">(defvar sacha/org-show-presentation-file "~/Dropbox/Emacs Conference/public.org" "File containing the presentation.")
(defvar sacha/org-show-slide-tag "slide" "Tag that marks slides.")
(defvar sacha/org-show-slide-tag-regexp (concat ":" (regexp-quote sacha/org-show-slide-tag) ":"))
(require 'eimp)

;; From org-pres--eimp-fit
(defun sacha/org-show-eimp-fit ()
  "Function used as a hook, fits the image found to the window."
  (when (eq major-mode 'image-mode)
    (eimp-fit-image-to-window nil)))
(add-hook 'find-file-hook 'sacha/org-show-eimp-fit)

(defun sacha/org-show-execute-slide ()
  "Process slide at point.
  If it contains an Emacs Lisp source block, evaluate it.
  If it contains an image, view it and switch to that buffer.
  Else, focus on that buffer.
  Hide all drawers."
  (interactive)
  (find-file sacha/org-show-presentation-file)
  (org-narrow-to-subtree)
  (visual-line-mode)
  (let ((heading-text (nth 4 (org-heading-components))))
    (cond
     ;; view images
     ((and (goto-char (point-min))
           (re-search-forward "\\[\\[.*\\.\\(jpg\\|gif\\|png\\)" nil t))
      (delete-other-windows)
      (let ((org-link-frame-setup '((file . find-file))))
        (org-open-at-point))
      (delete-other-windows)
      (goto-char (point-min)))
     ;; find and execute source code blocks
     ((and (goto-char (point-min))
           (re-search-forward "#\\+begin_src" nil t))
      (let ((info (org-babel-get-src-block-info)))
        (unwind-protect
            (eval (read (concat "(progn " (nth 1 info) ")"))))))
     (t
      (switch-to-buffer (current-buffer))
      (text-scale-set 4)
      (org-show-subtree)
      (org-cycle-hide-drawers t)
      (org-display-inline-images)
      (delete-other-windows)))
    (set-frame-name heading-text)))

(defun sacha/org-show-next-slide ()
  "Show the next slide."
  (interactive)
  (find-file sacha/org-show-presentation-file)
  (widen)
  (goto-char (line-end-position))
  (when (re-search-forward sacha/org-show-slide-tag-regexp nil t)
    (sacha/org-show-execute-slide)))

(defun sacha/org-show-previous-slide ()
  "Show the next slide."
  (interactive)
  (find-file sacha/org-show-presentation-file)
  (widen)
  (goto-char (line-beginning-position))
  (when (re-search-backward sacha/org-show-slide-tag-regexp nil t)
    (sacha/org-show-execute-slide)))

(global-set-key '[f5] 'sacha/org-show-previous-slide)
(global-set-key '[f6] 'sacha/org-show-execute-slide)
(global-set-key '[f7] 'sacha/org-show-next-slide)
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-184" class="outline-3">
<h3 id="unnumbered-184">Enable minibuffer completion</h3>
<div class="outline-text-3" id="text-unnumbered-184">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2013-03-31]</span></span> Superseded by ido-hacks?
</p>

<p>
It can be difficult to remember the full names of Emacs commands, so I
use <code>icomplete-mode</code> for minibuffer completion. This also makes it
easier to discover commands.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>icomplete-mode 1<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-185" class="outline-3">
<h3 id="unnumbered-185">Because I'm trying to use helm instead of ido&#x2026;</h3>
<div class="outline-text-3" id="text-unnumbered-185">
</div><div id="outline-container-unnumbered-186" class="outline-4">
<h4 id="unnumbered-186">Ido-mode: Much better navigationy things</h4>
<div class="outline-text-4" id="text-unnumbered-186">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2013-03-31]</span></span>: Let's try using Helm instead.
</p>

<p>
Ido-mode is awesome. Let's make it awesomer. I usually want to go to
recently-opened files first.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ido</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>ido-mode 1<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>setq ido-default-buffer-method 'selected-window<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'ido-make-file-list-hook 'ido-sort-mtime<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>add-hook 'ido-make-dir-list-hook 'ido-sort-mtime<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">defun</span> <span class="org-function-name">ido-sort-mtime</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span>setq ido-temp-list
          <span class="org-rainbow-delimiters-depth-5">(</span>sort ido-temp-list
                <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>a b<span class="org-rainbow-delimiters-depth-7">)</span>
                  <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-9">(</span>ta <span class="org-rainbow-delimiters-depth-1">(</span>nth 5 <span class="org-rainbow-delimiters-depth-2">(</span>file-attributes <span class="org-rainbow-delimiters-depth-3">(</span>concat ido-current-directory a<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                        <span class="org-rainbow-delimiters-depth-9">(</span>tb <span class="org-rainbow-delimiters-depth-1">(</span>nth 5 <span class="org-rainbow-delimiters-depth-2">(</span>file-attributes <span class="org-rainbow-delimiters-depth-3">(</span>concat ido-current-directory b<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                    <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-9">(</span>= <span class="org-rainbow-delimiters-depth-1">(</span>nth 0 ta<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>nth 0 tb<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                        <span class="org-rainbow-delimiters-depth-9">(</span>&gt; <span class="org-rainbow-delimiters-depth-1">(</span>nth 1 ta<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>nth 1 tb<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                      <span class="org-rainbow-delimiters-depth-9">(</span>&gt; <span class="org-rainbow-delimiters-depth-1">(</span>nth 0 ta<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>nth 0 tb<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span>ido-to-end  <span class="org-comment-delimiter">;; </span><span class="org-comment">move . files to end (again)</span>
     <span class="org-rainbow-delimiters-depth-5">(</span>delq nil <span class="org-rainbow-delimiters-depth-6">(</span>mapcar
                <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-8">(</span>x<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-9">(</span>string-equal <span class="org-rainbow-delimiters-depth-1">(</span>substring x 0 1<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"."</span><span class="org-rainbow-delimiters-depth-9">)</span> x<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                ido-temp-list<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-187" class="outline-4">
<h4 id="unnumbered-187">Ido and Org</h4>
<div class="outline-text-4" id="text-unnumbered-187">
<p>
When I use <code>org-refile</code> to organize my notes, I like seeing the
latest entries on top. Ido-related and verify-related snippets
are from "Using ido-mode for org-refile (and archiving via
refile)" in <a href="http://orgmode.org/worg/org-hacks.html">Org Hacks</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq ido-everywhere t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq ido-enable-flex-matching t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq ido-max-directory-size 100000<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>ido-mode <span class="org-rainbow-delimiters-depth-2">(</span>quote both<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-completion-us-ido t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-188" class="outline-4">
<h4 id="unnumbered-188">Finding files</h4>
<div class="outline-text-4" id="text-unnumbered-188">
<p>
I don't want to think about directory structures, I just want to
open files.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">filecache</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">ido</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">file-cache-ido-find-file</span> <span class="org-rainbow-delimiters-depth-2">(</span>file<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Using ido, interactively open file from file cache'.</span>
<span class="org-doc">First select a file, matched using ido-switch-buffer against the contents</span>
<span class="org-doc">in `</span><span class="org-doc"><span class="org-constant">file-cache-alist</span></span><span class="org-doc">'. If the file exist in more than one</span>
<span class="org-doc">directory, select directory. Lastly the file is opened."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-rainbow-delimiters-depth-3">(</span>list <span class="org-rainbow-delimiters-depth-4">(</span>file-cache-ido-read <span class="org-string">"File: "</span>
                                          <span class="org-rainbow-delimiters-depth-5">(</span>mapcar
                                           <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>x<span class="org-rainbow-delimiters-depth-7">)</span>
                                             <span class="org-rainbow-delimiters-depth-7">(</span>car x<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                                           file-cache-alist<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>record <span class="org-rainbow-delimiters-depth-5">(</span>assoc file file-cache-alist<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>find-file
     <span class="org-rainbow-delimiters-depth-4">(</span>expand-file-name
      file
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>= <span class="org-rainbow-delimiters-depth-7">(</span>length record<span class="org-rainbow-delimiters-depth-7">)</span> 2<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>car <span class="org-rainbow-delimiters-depth-7">(</span>cdr record<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-rainbow-delimiters-depth-6">(</span>file-cache-ido-read
         <span class="org-rainbow-delimiters-depth-7">(</span>format <span class="org-string">"Find %s in dir: "</span> file<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>cdr record<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">file-cache-ido-read</span> <span class="org-rainbow-delimiters-depth-2">(</span>prompt choices<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>ido-make-buffer-list-hook
         <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-6">)</span>
           <span class="org-rainbow-delimiters-depth-6">(</span>setq ido-temp-list choices<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>ido-read-buffer prompt<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'file-cache-filter-regexps <span class="org-string">"docs/html"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'file-cache-filter-regexps <span class="org-string">"\\.svn-base$"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'file-cache-filter-regexps <span class="org-string">"\\.dump$"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
To use this code, I add something like
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>sacha/file-cache-setup-tree <span class="org-string">"sacha/proj1"</span> <span class="org-string">"C-c d"</span>
                             '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"/dir1"</span>
                               <span class="org-string">"/dir2"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
<p>
to my config. Then <code>C-c d</code> (or whatever keyboard shortcut I use)
searches for files within the specified directories.
</p>
</div>
</div>
</div>

<div id="outline-container-unnumbered-189" class="outline-3">
<h3 id="unnumbered-189">Keywiz - keyboard quizzes</h3>
<div class="outline-text-3" id="text-unnumbered-189">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">keywiz</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/load-keybindings</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Since we don't want to have to pass through a keywiz game each time..."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq keywiz-cached-commands nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>do-all-symbols <span class="org-rainbow-delimiters-depth-3">(</span>sym<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>and <span class="org-rainbow-delimiters-depth-5">(</span>commandp sym<span class="org-rainbow-delimiters-depth-5">)</span>
               <span class="org-rainbow-delimiters-depth-5">(</span>not <span class="org-rainbow-delimiters-depth-6">(</span>memq sym '<span class="org-rainbow-delimiters-depth-7">(</span>self-insert-command
                                digit-argument undefined<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>keys <span class="org-rainbow-delimiters-depth-7">(</span>apply 'nconc <span class="org-rainbow-delimiters-depth-8">(</span>mapcar
                                 <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">(</span>key<span class="org-rainbow-delimiters-depth-1">)</span>
                                   <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span>keywiz-key-press-event-p key<span class="org-rainbow-delimiters-depth-2">)</span>
                                     <span class="org-rainbow-delimiters-depth-2">(</span>list key<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                                 <span class="org-rainbow-delimiters-depth-9">(</span>where-is-internal sym<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-comment-delimiter">;;  </span><span class="org-comment">Politically incorrect, but clearer version of the above:</span>
        <span class="org-comment-delimiter">;;    </span><span class="org-comment">(let ((keys (delete-if-not 'keywiz-key-press-event-p</span>
        <span class="org-comment-delimiter">;;                               </span><span class="org-comment">(where-is-internal sym))))</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>and keys
             <span class="org-rainbow-delimiters-depth-6">(</span>push <span class="org-rainbow-delimiters-depth-7">(</span>list sym keys<span class="org-rainbow-delimiters-depth-7">)</span> keywiz-cached-commands<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>sacha/load-keybindings<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Might be good to use this in org-agenda...</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/random-keybinding</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Describe a random keybinding."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>command <span class="org-rainbow-delimiters-depth-5">(</span>keywiz-random keywiz-cached-commands<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>doc <span class="org-rainbow-delimiters-depth-5">(</span>and command <span class="org-rainbow-delimiters-depth-6">(</span>documentation <span class="org-rainbow-delimiters-depth-7">(</span>car command<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> command
        <span class="org-rainbow-delimiters-depth-4">(</span>concat <span class="org-rainbow-delimiters-depth-5">(</span>symbol-name <span class="org-rainbow-delimiters-depth-6">(</span>car command<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">" "</span>
                <span class="org-string">"("</span> <span class="org-rainbow-delimiters-depth-5">(</span>mapconcat 'key-description <span class="org-rainbow-delimiters-depth-6">(</span>cadr command<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">", "</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">")"</span>
                <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> doc
                    <span class="org-rainbow-delimiters-depth-6">(</span>concat <span class="org-string">": "</span> <span class="org-rainbow-delimiters-depth-7">(</span>substring doc 0 <span class="org-rainbow-delimiters-depth-8">(</span>string-match <span class="org-string">"\n"</span> doc<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                  <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-190" class="outline-3">
<h3 id="unnumbered-190">MobileOrg for Android</h3>
<div class="outline-text-3" id="text-unnumbered-190">
<p>
I've been playing around with MobileOrg so that I can review my
agenda and capture notes on my smartphone. My main Org file is too
big to open easily there, though.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-mobile</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>autoload 'org-mobile-pull <span class="org-string">"org-mobile"</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>autoload 'org-mobile-push <span class="org-string">"org-mobile"</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq org-mobile-directory <span class="org-string">"~/Dropbox/mobile"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq org-mobile-inbox-for-pull <span class="org-string">"~/personal/mobileorg.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq default-buffer-file-coding-system 'utf-8<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq org-mobile-files '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"/cygdrive/c/sacha/personal/organizer.org"</span>
                             <span class="org-string">"/cygdrive/c/sacha/personal/business.org"</span>
                             <span class="org-string">"/cygdrive/c/sacha/personal/books.org"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq org-mobile-agendas '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"a"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-191" class="outline-3">
<h3 id="unnumbered-191">Encryption</h3>
<div class="outline-text-3" id="text-unnumbered-191">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">org-crypt</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>org-crypt-use-before-save-magic<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setq org-tags-exclude-from-inheritance <span class="org-rainbow-delimiters-depth-2">(</span>quote <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"crypt"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>setq org-crypt-key nil<span class="org-rainbow-delimiters-depth-1">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">GPG key to use for encryption</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Either the Key ID or set to nil to use symmetric encryption.</span>

  <span class="org-comment-delimiter">;;     </span><span class="org-comment">(setq auto-save-default nil)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Auto-saving does not cooperate with org-crypt.el: so you need</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">to turn it off if you plan to use org-crypt.el quite often.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Otherwise, you'll get an (annoying) message each time you</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">start Org.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">To turn it off only locally, you can insert this:</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment"># -*- buffer-auto-save-file-name: nil; -*-</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-192" class="outline-3">
<h3 id="unnumbered-192">Drawing</h3>
<div class="outline-text-3" id="text-unnumbered-192">
</div><div id="outline-container-unnumbered-193" class="outline-4">
<h4 id="unnumbered-193"><a id="o2b:243ed83f-244f-417d-b251-53a3fef813aa"></a><span class="done DONE">DONE</span> Digital index piles with Emacs</h4>
<div class="outline-text-4" id="text-unnumbered-193">
<p>
Somewhat daunted by the prospect of categorizing more than a hundred
sketches and blog posts for my monthly review, I spent some time
figuring out how to create the digital equivalent of sorting index
cards into various piles.
</p>

<p>
<a href="https://www.flickr.com/photos/sachac/16234413499/">2015-02-01 Digital piles of index cards &#x2013; index card #indexing #organization #pkm</a>
</p>

<p>
In fact, wouldn't it be super-cool if the items could automatically
guess which category they should probably go in, prompting me only if
it wasn't clear?
</p>

<p>
I wanted to write a function that could take a list structured like this:
</p>

<ul class="org-ul">
<li>Keyword A
<ul class="org-ul">
<li>Previous links
</li>
</ul>
</li>
<li>Keyword B
<ul class="org-ul">
<li>Previous links
</li>
</ul>
</li>
<li>Link 1 with Keyword A
</li>
<li>Link 2 with Keyword B
</li>
<li>Link 3 with Keyword A
</li>
<li>Link 4
</li>
</ul>

<p>
It should file Link 1 and 3 under Keyword A, Link 2 under Keyword B,
and prompt me for the category for Link 4. At that prompt, I should be
able to select Keyword A or Keyword B, or specify a new category.
</p>

<p>
Inspired by John Kitchin's recent post on <a href="http://kitchingroup.cheme.cmu.edu/blog/2015/01/24/Anatomy-of-a-helm-source/">defining a Helm source</a>, I
wanted to get it to work with Helm.
</p>

<p>
First step: I needed to figure out the structure of the list, maybe
including a sample from the category to make it clearer what's
included. <code>org-list.el</code> seemed to have useful functions for this.
<code>org-list-struct</code> gave me the structure of the current list. Let's say
that a category is anything whose text does not match
<code>org-bracket-link-regexp</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-get-list-categories</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Return a list of (category indent matching-regexp sample).</span>
<span class="org-doc">List categories are items that don't contain links."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>list <span class="org-rainbow-delimiters-depth-5">(</span>org-list-struct<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> last-category results<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>mapc
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">(</span>x<span class="org-rainbow-delimiters-depth-6">)</span>
         <span class="org-rainbow-delimiters-depth-6">(</span>goto-char <span class="org-rainbow-delimiters-depth-7">(</span>car x<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>current-item
                <span class="org-rainbow-delimiters-depth-9">(</span>buffer-substring-no-properties
                 <span class="org-rainbow-delimiters-depth-1">(</span>+ <span class="org-rainbow-delimiters-depth-2">(</span>point<span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span>elt x 1<span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-rainbow-delimiters-depth-2">(</span>length <span class="org-rainbow-delimiters-depth-3">(</span>elt x 2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                 <span class="org-rainbow-delimiters-depth-1">(</span>line-end-position<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
           <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-8">(</span>string-match
                org-bracket-link-regexp
                <span class="org-rainbow-delimiters-depth-9">(</span>buffer-substring-no-properties
                 <span class="org-rainbow-delimiters-depth-1">(</span>point<span class="org-rainbow-delimiters-depth-1">)</span>
                 <span class="org-rainbow-delimiters-depth-1">(</span>line-end-position<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
               <span class="org-comment-delimiter">;; </span><span class="org-comment">Link - update the last category</span>
               <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">when</span> last-category
                 <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">(</span>&lt; <span class="org-rainbow-delimiters-depth-2">(</span>elt x 1<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span>elt last-category 1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                     <span class="org-rainbow-delimiters-depth-1">(</span>setq results
                           <span class="org-rainbow-delimiters-depth-2">(</span>cons <span class="org-rainbow-delimiters-depth-3">(</span>append last-category
                                         <span class="org-rainbow-delimiters-depth-4">(</span>list
                                          <span class="org-rainbow-delimiters-depth-5">(</span>match-string-no-properties
                                           3
                                           <span class="org-rainbow-delimiters-depth-6">(</span>buffer-substring-no-properties
                                            <span class="org-rainbow-delimiters-depth-7">(</span>point<span class="org-rainbow-delimiters-depth-7">)</span>
                                            <span class="org-rainbow-delimiters-depth-7">(</span>line-end-position<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                                 <span class="org-rainbow-delimiters-depth-3">(</span>cdr results<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                 <span class="org-rainbow-delimiters-depth-9">(</span>setq last-category nil<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
             <span class="org-comment-delimiter">;; </span><span class="org-comment">Category</span>
             <span class="org-rainbow-delimiters-depth-8">(</span>setq results
                     <span class="org-rainbow-delimiters-depth-9">(</span>cons
                      <span class="org-rainbow-delimiters-depth-1">(</span>setq last-category
                            <span class="org-rainbow-delimiters-depth-2">(</span>list
                             current-item
                             <span class="org-rainbow-delimiters-depth-3">(</span>elt x 1<span class="org-rainbow-delimiters-depth-3">)</span>
                             <span class="org-rainbow-delimiters-depth-3">(</span>concat <span class="org-string">"^"</span>
                                     <span class="org-rainbow-delimiters-depth-4">(</span>make-string <span class="org-rainbow-delimiters-depth-5">(</span>elt x 1<span class="org-rainbow-delimiters-depth-5">)</span> ?\ <span class="org-rainbow-delimiters-depth-4">)</span>
                                     <span class="org-rainbow-delimiters-depth-4">(</span>regexp-quote
                                      <span class="org-rainbow-delimiters-depth-5">(</span>concat <span class="org-rainbow-delimiters-depth-6">(</span>elt x 2<span class="org-rainbow-delimiters-depth-6">)</span>
                                              current-item<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                     <span class="org-string">"$"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                      results<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
       list<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    results<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
The next step was to write a function that guessed the list category
based on the item text, and moved the item there.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/helm-org-list-candidates</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/helm-org-list-categories-init-candidates</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Return a list of categories from this list in a form ready for Helm."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setq sacha/helm-org-list-candidates
        <span class="org-rainbow-delimiters-depth-3">(</span>mapcar <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span>x<span class="org-rainbow-delimiters-depth-5">)</span>
                  <span class="org-rainbow-delimiters-depth-5">(</span>cons <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>elt x 3<span class="org-rainbow-delimiters-depth-7">)</span>
                            <span class="org-rainbow-delimiters-depth-7">(</span>format <span class="org-string">"%s - %s"</span> <span class="org-rainbow-delimiters-depth-8">(</span>car x<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>elt x 3<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                          <span class="org-rainbow-delimiters-depth-7">(</span>car x<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                        x<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-rainbow-delimiters-depth-4">(</span>sacha/org-get-list-categories<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-move-current-item-to-category</span> <span class="org-rainbow-delimiters-depth-2">(</span>category<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> category
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>beg <span class="org-rainbow-delimiters-depth-6">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>end <span class="org-rainbow-delimiters-depth-6">(</span>line-end-position<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>string <span class="org-rainbow-delimiters-depth-6">(</span>buffer-substring-no-properties beg end<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-excursion</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-6">(</span>re-search-backward <span class="org-rainbow-delimiters-depth-7">(</span>elt category 2<span class="org-rainbow-delimiters-depth-7">)</span> nil t<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>delete-region beg <span class="org-rainbow-delimiters-depth-7">(</span>min <span class="org-rainbow-delimiters-depth-8">(</span>1+ end<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>point-max<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>forward-line 1<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>insert <span class="org-rainbow-delimiters-depth-7">(</span>make-string <span class="org-rainbow-delimiters-depth-8">(</span>+ 2 <span class="org-rainbow-delimiters-depth-9">(</span>elt category 1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span> ?\ <span class="org-rainbow-delimiters-depth-7">)</span>
                  string <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-guess-list-category</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> categories<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">require</span> '<span class="org-constant">cl-lib</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> categories
    <span class="org-rainbow-delimiters-depth-3">(</span>setq categories
          <span class="org-rainbow-delimiters-depth-4">(</span>sacha/helm-org-list-categories-init-candidates<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>beg <span class="org-rainbow-delimiters-depth-5">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>end <span class="org-rainbow-delimiters-depth-5">(</span>line-end-position<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>string <span class="org-rainbow-delimiters-depth-5">(</span>buffer-substring-no-properties beg end<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>found
          <span class="org-rainbow-delimiters-depth-5">(</span>cl-member string
                     categories
                     <span class="org-builtin">:test</span>
                     <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>string cat-entry<span class="org-rainbow-delimiters-depth-7">)</span>
                       <span class="org-rainbow-delimiters-depth-7">(</span>string-match <span class="org-rainbow-delimiters-depth-8">(</span>regexp-quote <span class="org-rainbow-delimiters-depth-9">(</span>downcase <span class="org-rainbow-delimiters-depth-1">(</span>car cat-entry<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                                     string<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>car found<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>sacha/org-move-current-item-to-category
       <span class="org-rainbow-delimiters-depth-5">(</span>cdr <span class="org-rainbow-delimiters-depth-6">(</span>car found<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
After that, I wrote a function that used Helm to prompt me for a
category in case it couldn't guess the category. It took me a while to
figure out that I needed to use <code>:init</code> instead of <code>:candidates</code>
because I wanted to read information from the buffer before Helm
kicked in.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq sacha/helm-org-list-category-source
      <span class="org-rainbow-delimiters-depth-2">(</span>helm-build-sync-source
          <span class="org-string">"Non-link categories in the current list"</span>
        <span class="org-builtin">:init</span> 'sacha/helm-org-list-categories-init-candidates
        <span class="org-builtin">:candidates</span> 'sacha/helm-org-list-candidates
        <span class="org-builtin">:action</span> 'sacha/org-move-current-item-to-category
        <span class="org-builtin">:fuzzy-match</span> t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/org-guess-uncategorized</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sacha/helm-org-list-categories-init-candidates<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>done<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-4">(</span>not done<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">save-excursion</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-6">(</span>sacha/org-guess-list-category sacha/helm-org-list-candidates<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">unless</span>
              <span class="org-rainbow-delimiters-depth-7">(</span>helm <span class="org-builtin">:sources</span>
                    '<span class="org-rainbow-delimiters-depth-8">(</span>sacha/helm-org-list-category-source
                      sacha/helm-org-list-category-create-source<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>setq done t<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> done
        <span class="org-rainbow-delimiters-depth-5">(</span>setq done <span class="org-rainbow-delimiters-depth-6">(</span>not <span class="org-rainbow-delimiters-depth-7">(</span>looking-at <span class="org-string">"^[-+] \\["</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
The <code>:action</code> above refers to this function, which creates a category if it doesn't exist yet.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setq sacha/helm-org-list-category-create-source
      <span class="org-rainbow-delimiters-depth-2">(</span>helm-build-dummy-source
          <span class="org-string">"Create category"</span>
        <span class="org-builtin">:action</span> <span class="org-rainbow-delimiters-depth-3">(</span>helm-make-actions
                 <span class="org-string">"Create category"</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span>candidate<span class="org-rainbow-delimiters-depth-5">)</span>
                   <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">save-excursion</span>
                     <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>beg <span class="org-rainbow-delimiters-depth-9">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                            <span class="org-rainbow-delimiters-depth-8">(</span>end <span class="org-rainbow-delimiters-depth-9">(</span>line-end-position<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                            <span class="org-rainbow-delimiters-depth-8">(</span>string <span class="org-rainbow-delimiters-depth-9">(</span>buffer-substring beg end<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                       <span class="org-rainbow-delimiters-depth-7">(</span>delete-region beg <span class="org-rainbow-delimiters-depth-8">(</span>min <span class="org-rainbow-delimiters-depth-9">(</span>1+ end<span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-rainbow-delimiters-depth-9">(</span>point-max<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                       <span class="org-rainbow-delimiters-depth-7">(</span>org-beginning-of-item-list<span class="org-rainbow-delimiters-depth-7">)</span>
                       <span class="org-rainbow-delimiters-depth-7">(</span>insert <span class="org-string">"- "</span> candidate <span class="org-string">"\n  "</span> string <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
                   <span class="org-rainbow-delimiters-depth-5">(</span>sacha/helm-org-list-categories-init-candidates<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I'm new to fiddling with Helm, so this implementation is not the best
it could be. But it's nifty and it works the way I want it to, hooray!
Now I can generate a list of blog posts and unblogged sketches,
categorize them quickly, and then tweak the categorizations
afterwards.
</p>

<p>
<a href="https://www.flickr.com/photos/sachac/16394665616/">2015-02-01 Index card sketches and monthly reviews &#x2013; index card #organization #pkm #indexing</a>
</p>

<p>
You can see the results in my <a href="http://sachachua.com/blog/2015/02/monthly-review-january-2015/">January 2015</a> review.
</p>

<p>
My next step for learning more about Helm sources is probably to write
a Helm command that creates a montage of selected images. John Kitchin
has a post about <a href="http://kitchingroup.cheme.cmu.edu/blog/">handling multiple selection in Helm</a>, so I just need
to combine that with my code for using Imagemagick to create a montage
of images. Whee!
</p>
</div>
</div>

<div id="outline-container-unnumbered-194" class="outline-4">
<h4 id="unnumbered-194"><a id="o2b:3ca1d203-722f-42c0-a95a-387dcd6e27bc"></a><span class="done DONE">DONE</span> Using Emacs to prepare files for external applications like Autodesk Sketchbook Pro</h4>
<div class="outline-text-4" id="text-unnumbered-194">
<p>
To make it easier to draw using Autodesk Sketchbook Pro on my laptop
(a Lenovo X220 tablet PC), I've created several templates with
consistent dot grids and sizes. Since I want to minimize typing when
I'm drawing, I wrote a couple of functions to make it easier to copy
these templates and set up appropriately-named files. That way, I can
save them without the grid layer, flip between files using Sketchbook
Pro's next/previous file commands, and then process them all when I'm
ready.
</p>
</div>

<div id="outline-container-unnumbered-195" class="outline-5">
<h5 id="unnumbered-195">Index cards</h5>
<div class="outline-text-5" id="text-unnumbered-195">
<p>
I've been experimenting with a habit of drawing at least five index
cards every day. Here's a function that creates five index cards (or a
specified number of them) and then opens the last one for me to edit.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">sacha/autodesk-sketchbook-executable</span> <span class="org-string">"C:/Program Files/Autodesk/SketchBook Pro 7/SketchBookPro.exe"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/prepare-index-cards</span> <span class="org-rainbow-delimiters-depth-2">(</span>n<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-rainbow-delimiters-depth-3">(</span>list <span class="org-rainbow-delimiters-depth-4">(</span>or current-prefix-arg 5<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>counter 1<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>directory <span class="org-string">"~/Dropbox/Inbox"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>template <span class="org-string">"c:/data/drawing-templates/custom/0 - index.tif"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>date <span class="org-rainbow-delimiters-depth-5">(</span>org-read-date nil nil <span class="org-string">"."</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        temp-file<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-4">(</span>&gt; n 0<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>setq temp-file
            <span class="org-rainbow-delimiters-depth-5">(</span>expand-file-name <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"%s-%d.tif"</span> date counter<span class="org-rainbow-delimiters-depth-6">)</span>
                              directory<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-5">(</span>file-exists-p temp-file<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>copy-file template temp-file<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>setq n <span class="org-rainbow-delimiters-depth-6">(</span>1- n<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>= n 0<span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>shell-command
             <span class="org-rainbow-delimiters-depth-7">(</span>concat <span class="org-rainbow-delimiters-depth-8">(</span>shell-quote-argument sacha/autodesk-sketchbook-executable<span class="org-rainbow-delimiters-depth-8">)</span>
                     <span class="org-string">" "</span>
                     <span class="org-rainbow-delimiters-depth-8">(</span>shell-quote-argument temp-file<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">" &amp;"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>setq counter <span class="org-rainbow-delimiters-depth-5">(</span>1+ counter<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Afterwards, I call <code>sacha/rename-scanned-cards</code> function to convert
the TIFFs to PNGs, display the files and ask me to rename them
properly. 
</p>
</div>
</div>

<div id="outline-container-unnumbered-196" class="outline-5">
<h5 id="unnumbered-196">Rename scanned index cards</h5>
<div class="outline-text-5" id="text-unnumbered-196">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/rename-scanned-cards</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Display and rename the scanned files."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>directory-files <span class="org-string">"~/Dropbox/Inbox"</span> t <span class="org-string">"^[0-9]+-[0-9]+-[0-9]+-.*.tif"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Convert the TIFFs first</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>apply 'call-process <span class="org-string">"mogrify"</span> nil nil nil <span class="org-string">"-format"</span> <span class="org-string">"png"</span> <span class="org-string">"-quality"</span> <span class="org-string">"1"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span>directory-files <span class="org-string">"~/Dropbox/Inbox"</span> t <span class="org-string">"^[0-9]+-[0-9]+-[0-9]+-.*.tif"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>mapc <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span>x<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>rename-file x <span class="org-string">"~/Dropbox/Inbox/backup"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>directory-files <span class="org-string">"~/Dropbox/Inbox"</span> t <span class="org-string">"^[0-9]+-[0-9]+-[0-9]+-.*.tif"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>mapc <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>filename<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>find-file filename<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>delete-other-windows<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-5">(</span>string-match <span class="org-string">"/</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[0-9]+-[0-9]+-[0-9]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> filename<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>kill-buffer-query-functions nil<span class="org-rainbow-delimiters-depth-7">)</span>
                  <span class="org-rainbow-delimiters-depth-7">(</span>new-name <span class="org-rainbow-delimiters-depth-8">(</span>read-string <span class="org-string">"New name: "</span>
                                         <span class="org-rainbow-delimiters-depth-9">(</span>concat <span class="org-rainbow-delimiters-depth-1">(</span>match-string 1 filename<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
              <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-7">(</span>&gt; <span class="org-rainbow-delimiters-depth-8">(</span>length new-name<span class="org-rainbow-delimiters-depth-8">)</span> 0<span class="org-rainbow-delimiters-depth-7">)</span>
                <span class="org-rainbow-delimiters-depth-7">(</span>revert-buffer t t<span class="org-rainbow-delimiters-depth-7">)</span>
                <span class="org-rainbow-delimiters-depth-7">(</span>rename-file filename <span class="org-rainbow-delimiters-depth-8">(</span>concat new-name <span class="org-string">".png"</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                <span class="org-rainbow-delimiters-depth-7">(</span>kill-buffer<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span>directory-files <span class="org-string">"~/Dropbox/Inbox"</span> t <span class="org-string">"^[0-9]+-[0-9]+-[0-9]+-.*.png"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I might tweak the files a little more after I rename them, so I don't
automatically upload them. When I'm happy with the files, I use a <a href="http://sachachua.com/blog/?p=27830&shareadraft=baba27830_54b92ac511e86">Node
script</a> to upload the files to Flickr, move them to my <code>To blog</code>
directory, and copy Org-formatted text that I can paste into my
learning outline.
</p>
</div>
</div>

<div id="outline-container-unnumbered-197" class="outline-5">
<h5 id="unnumbered-197">Automatically resize images</h5>
<div class="outline-text-5" id="text-unnumbered-197">
<p>
The <code>image+</code> package is handy for displaying the images so
that they're scaled to the window size.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">image+</span>
 <span class="org-builtin">:load-path</span> <span class="org-string">"~/elisp/Emacs-imagex"</span>
 <span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span> <span class="org-rainbow-delimiters-depth-3">(</span>imagex-global-sticky-mode<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>imagex-auto-adjust-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-198" class="outline-5">
<h5 id="unnumbered-198">Get information for sketched books</h5>
<div class="outline-text-5" id="text-unnumbered-198">
<p>
For sketchnotes of books, I set up the filename based on properties in
my Org Mode tree for that book.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/prepare-sketchnote-file</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>base-name <span class="org-rainbow-delimiters-depth-5">(</span>org-entry-get-with-inheritance  <span class="org-string">"BASENAME"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>filename <span class="org-rainbow-delimiters-depth-5">(</span>expand-file-name <span class="org-rainbow-delimiters-depth-6">(</span>concat base-name <span class="org-string">".tif"</span><span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">"~/dropbox/inbox/"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> base-name <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-warning">error</span> <span class="org-string">"Missing basename property"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>file-exists-p filename<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-warning">error</span> <span class="org-string">"File already exists"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>copy-file <span class="org-string">"g:/drawing-templates/custom/0 - base.tif"</span> filename<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>shell-command <span class="org-rainbow-delimiters-depth-4">(</span>concat <span class="org-rainbow-delimiters-depth-5">(</span>shell-quote-argument sacha/autodesk-sketchbook-executable<span class="org-rainbow-delimiters-depth-5">)</span>
                             <span class="org-rainbow-delimiters-depth-5">(</span>shell-quote-argument filename<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">" &amp;"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
By using Emacs Lisp functions to set up files that I'm going to use in
an external application, I minimize fussing about with the keyboard
while still being able to take advantage of structured information.
</p>

<p>
Do you work with external applications? Where does it make sense to
use Emacs Lisp to make setup or processing easier?
</p>
</div>
</div>
</div>

<div id="outline-container-unnumbered-199" class="outline-4">
<h4 id="unnumbered-199">Other sketches</h4>
<div class="outline-text-4" id="text-unnumbered-199">
<p>
Based on <a href="http://williamedwardscoder.tumblr.com/post/84505278488/making-image-mosaics">http://williamedwardscoder.tumblr.com/post/84505278488/making-image-mosaics</a>
Aspect ratio is width / height
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/get-tile-dimensions</span> <span class="org-rainbow-delimiters-depth-2">(</span>num-items orig-width orig-height target-aspect-ratio<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>rows 1<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>cols 1<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>current-aspect <span class="org-rainbow-delimiters-depth-5">(</span>/ orig-width <span class="org-rainbow-delimiters-depth-6">(</span>float orig-height<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        add-col-aspect
        add-row-aspect<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-4">(</span>&lt; <span class="org-rainbow-delimiters-depth-5">(</span>* rows cols<span class="org-rainbow-delimiters-depth-5">)</span> num-items<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>setq add-col-aspect <span class="org-rainbow-delimiters-depth-5">(</span>/ <span class="org-rainbow-delimiters-depth-6">(</span>* <span class="org-rainbow-delimiters-depth-7">(</span>1+ cols<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>float orig-width<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                              <span class="org-rainbow-delimiters-depth-6">(</span>* rows orig-height<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            add-row-aspect <span class="org-rainbow-delimiters-depth-5">(</span>/ <span class="org-rainbow-delimiters-depth-6">(</span>* cols <span class="org-rainbow-delimiters-depth-7">(</span>float orig-width<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                              <span class="org-rainbow-delimiters-depth-6">(</span>* <span class="org-rainbow-delimiters-depth-7">(</span>1+ rows<span class="org-rainbow-delimiters-depth-7">)</span> orig-height<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>&lt;  <span class="org-rainbow-delimiters-depth-6">(</span>abs <span class="org-rainbow-delimiters-depth-7">(</span>- add-col-aspect target-aspect-ratio<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
              <span class="org-rainbow-delimiters-depth-6">(</span>abs <span class="org-rainbow-delimiters-depth-7">(</span>- add-row-aspect target-aspect-ratio<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setq cols <span class="org-rainbow-delimiters-depth-6">(</span>1+ cols<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>setq rows <span class="org-rainbow-delimiters-depth-6">(</span>1+ rows<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>cons cols rows<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">ert-deftest</span> <span class="org-function-name">sacha/get-tile-dimensions</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>should <span class="org-rainbow-delimiters-depth-3">(</span>equal <span class="org-rainbow-delimiters-depth-4">(</span>sacha/get-tile-dimensions 2 2 1 1<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>cons 1 2<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>should <span class="org-rainbow-delimiters-depth-3">(</span>equal <span class="org-rainbow-delimiters-depth-4">(</span>sacha/get-tile-dimensions 4 2 1 0.5<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>cons 1 4<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>should <span class="org-rainbow-delimiters-depth-3">(</span>equal <span class="org-rainbow-delimiters-depth-4">(</span>sacha/get-tile-dimensions 12 1 1 <span class="org-rainbow-delimiters-depth-5">(</span>/ 4.0 3.0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>cons 4 3<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>should <span class="org-rainbow-delimiters-depth-3">(</span>equal <span class="org-rainbow-delimiters-depth-4">(</span>sacha/get-tile-dimensions 11 1 1 <span class="org-rainbow-delimiters-depth-5">(</span>/ 4.0 3.0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>cons 4 3<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>should <span class="org-rainbow-delimiters-depth-3">(</span>equal <span class="org-rainbow-delimiters-depth-4">(</span>sacha/get-tile-dimensions 13 1 1 <span class="org-rainbow-delimiters-depth-5">(</span>/ 4.0 3.0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>cons 4 4<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/extract-image-filenames</span> <span class="org-rainbow-delimiters-depth-2">(</span>beg end<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Return the filenames from the links in this region."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>files<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>min beg end<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward <span class="org-string">"\\[\\[https://www.flickr.com/photos/[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">]]+\\]\\[</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">]]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">]\\]"</span> <span class="org-rainbow-delimiters-depth-6">(</span>max beg end<span class="org-rainbow-delimiters-depth-6">)</span> t<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>add-to-list 'files <span class="org-rainbow-delimiters-depth-6">(</span>concat <span class="org-rainbow-delimiters-depth-7">(</span>match-string-no-properties 1<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">".png"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    files<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/create-sketch-montage</span> <span class="org-rainbow-delimiters-depth-2">(</span>beg end tiles<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Combine the sketches in the region."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive <span class="org-rainbow-delimiters-depth-3">(</span>list <span class="org-rainbow-delimiters-depth-4">(</span>point<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>mark<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> current-prefix-arg <span class="org-rainbow-delimiters-depth-5">(</span>read-string <span class="org-string">"Tiling: "</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Extract the links</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>files <span class="org-rainbow-delimiters-depth-5">(</span>sacha/extract-image-filenames beg end<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>output-file <span class="org-string">"c:/sacha/dropbox/inbox/output.png"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> tiles
      <span class="org-rainbow-delimiters-depth-4">(</span>setq tiles
            <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"%dx"</span>
              <span class="org-rainbow-delimiters-depth-6">(</span>car <span class="org-rainbow-delimiters-depth-7">(</span>sacha/get-tile-dimensions <span class="org-rainbow-delimiters-depth-8">(</span>length files<span class="org-rainbow-delimiters-depth-8">)</span> 1497 896 <span class="org-rainbow-delimiters-depth-8">(</span>/ 4.0 3<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-temp-buffer</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>cd <span class="org-string">"~/Dropbox/Inbox/To Blog"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>apply 'call-process
             <span class="org-string">"montage"</span> nil nil nil
             <span class="org-rainbow-delimiters-depth-5">(</span>append
              files
              <span class="org-rainbow-delimiters-depth-6">(</span>list
               <span class="org-string">"-geometry"</span> <span class="org-string">"+0+0"</span>
               <span class="org-string">"-tile"</span> tiles
               output-file<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>find-file output-file<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-unnumbered-200" class="outline-4">
<h4 id="unnumbered-200">Sketched books</h4>
<div class="outline-text-4" id="text-unnumbered-200">
<p>
Convenience functions to make my life easier when sketchnoting books.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-rainbow-delimiters-depth-1">(</span>setq yas-indent-line 'fixed<span class="org-rainbow-delimiters-depth-1">)</span>
  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/convert-sketch-title-to-filename</span> <span class="org-rainbow-delimiters-depth-2">(</span>text<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>setq text <span class="org-rainbow-delimiters-depth-3">(</span>replace-regexp-in-string <span class="org-string">"[?!]$"</span> <span class="org-string">""</span> text<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>setq text <span class="org-rainbow-delimiters-depth-3">(</span>replace-regexp-in-string <span class="org-string">"[?!:] "</span> <span class="org-string">" - "</span> text<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">ert-deftest</span> <span class="org-function-name">sacha/convert-sketch-title-to-filename</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>should <span class="org-rainbow-delimiters-depth-3">(</span>string= <span class="org-rainbow-delimiters-depth-4">(</span>sacha/convert-sketch-title-to-filename <span class="org-string">"Test"</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"Test"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>should <span class="org-rainbow-delimiters-depth-3">(</span>string= <span class="org-rainbow-delimiters-depth-4">(</span>sacha/convert-sketch-title-to-filename <span class="org-string">"Another Test!"</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"Another Test"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>should <span class="org-rainbow-delimiters-depth-3">(</span>string= <span class="org-rainbow-delimiters-depth-4">(</span>sacha/convert-sketch-title-to-filename <span class="org-string">"Does this work? Yes"</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"Does this work - Yes"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>should <span class="org-rainbow-delimiters-depth-3">(</span>string= <span class="org-rainbow-delimiters-depth-4">(</span>sacha/convert-sketch-title-to-filename <span class="org-string">"Title: Subtitle"</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"Title - Subtitle"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/convert-sketched-book-to-png</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Convert TIFF to PNG."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>basename <span class="org-rainbow-delimiters-depth-5">(</span>org-entry-get-with-inheritance <span class="org-string">"BASENAME"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>shell-command <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"convert \"c:/sacha/dropbox/inbox/%s.tif\" \"c:/sacha/dropbox/inbox/%s.png\""</span>
                           basename
                           basename<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/index-sketched-book</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Add entries to sketched books index."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>title <span class="org-rainbow-delimiters-depth-5">(</span>org-entry-get-with-inheritance <span class="org-string">"SHORT_TITLE"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>author <span class="org-rainbow-delimiters-depth-5">(</span>org-entry-get-with-inheritance <span class="org-string">"AUTHOR"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>basename <span class="org-rainbow-delimiters-depth-5">(</span>org-entry-get-with-inheritance <span class="org-string">"BASENAME"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>base-file <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"~/Dropbox/inbox/%s.png"</span> basename<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>file-exists-p base-file<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>copy-file base-file
                 <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"~/Dropbox/packaging/sketched-books/%s.png"</span> basename<span class="org-rainbow-delimiters-depth-5">)</span> t t<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>copy-file base-file
                 <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"g:/documents/photosync/Visual Book Reviews/%s.png"</span> basename<span class="org-rainbow-delimiters-depth-5">)</span> t t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>find-file <span class="org-string">"~/Dropbox/packaging/sketched-books/index.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>vc-git-register <span class="org-rainbow-delimiters-depth-4">(</span>list <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"%s.png"</span> basename<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>re-search-forward <span class="org-string">"&lt;&lt;insert-point&gt;&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>insert <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"\n- [[file:%s.png][%s - %s (sketched %s)]]\n  [[file:%s.png]]\n\n"</span>
                    basename
                    title
                    author
                    <span class="org-rainbow-delimiters-depth-5">(</span>substring basename 0 10<span class="org-rainbow-delimiters-depth-5">)</span>
                    basename<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>find-file <span class="org-string">"~/Dropbox/packaging/sketched-books/ebook.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>re-search-forward <span class="org-string">"&lt;&lt;insert-point&gt;&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>insert <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"\n* %s - %s (sketched %s)\n\n[[file:%s.png]]\n\n"</span>
                    title
                    author
                    <span class="org-rainbow-delimiters-depth-5">(</span>substring basename 0 10<span class="org-rainbow-delimiters-depth-5">)</span>
                    basename<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/package-sketched-book</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Add the latest sketch and package the collection."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>interactive<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>shell-command
   <span class="org-rainbow-delimiters-depth-3">(</span>format <span class="org-string">"plink -A vagrant@127.0.0.1 -P 2222 \"cd ~/dropbox/Packaging/sketched-books; git add '%s.png'; git commit -m 'Added %s - %s' -a; git push; make all\" &amp;"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span>org-entry-get-with-inheritance <span class="org-string">"BASENAME"</span><span class="org-rainbow-delimiters-depth-4">)</span>
           <span class="org-rainbow-delimiters-depth-4">(</span>org-entry-get-with-inheritance <span class="org-string">"SHORT_TITLE"</span><span class="org-rainbow-delimiters-depth-4">)</span>
           <span class="org-rainbow-delimiters-depth-4">(</span>org-entry-get-with-inheritance <span class="org-string">"AUTHOR"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-unnumbered-201" class="outline-2">
<h2 id="unnumbered-201">Games</h2>
<div class="outline-text-2" id="text-unnumbered-201">
</div><div id="outline-container-unnumbered-202" class="outline-3">
<h3 id="unnumbered-202">Typing of Emacs</h3>
<div class="outline-text-3" id="text-unnumbered-202">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">typing</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>autoload 'typing-of-emacs <span class="org-string">"typing"</span> nil t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq toe-starting-length 6<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq toe-starting-time-per-word 2<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>setq toe-max-length 20<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-unnumbered-203" class="outline-3">
<h3 id="unnumbered-203"><a id="o2b:e2b41b2d-463c-4469-91b8-63eb97a13b9d"></a>2048 in Emacs, and colours too&#xa0;&#xa0;&#xa0;<span class="tag"><span class="emacs">emacs</span></span></h3>
<div class="outline-text-3" id="text-unnumbered-203">
<p>
While browsing through <code>M-x list-packages</code>, I noticed that there was a
new MELPA package that implemented the 2048 game in Emacs. I wrote the
following code to colorize it. Haven't tested the higher numbers yet,
but they're easy enough to tweak if the colours disagree with your
theme. =)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">2048-face-2</span>    '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:background</span> <span class="org-string">"khaki"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-doc">"Face for the tile 2"</span> <span class="org-builtin">:group</span> '2048-faces<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">2048-face-4</span>    '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:background</span> <span class="org-string">"burlywood"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-doc">"Face for the tile 4"</span> <span class="org-builtin">:group</span> '2048-faces<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">2048-face-8</span>    '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:background</span> <span class="org-string">"orange3"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-doc">"Face for the tile 8"</span> <span class="org-builtin">:group</span> '2048-faces<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">2048-face-16</span>   '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:background</span> <span class="org-string">"orange"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-doc">"Face for the tile 16"</span> <span class="org-builtin">:group</span> '2048-faces<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">2048-face-32</span>   '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:background</span> <span class="org-string">"orange red"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-doc">"Face for the tile 32"</span> <span class="org-builtin">:group</span> '2048-faces<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">2048-face-64</span>   '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:background</span> <span class="org-string">"firebrick"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"white"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-doc">"Face for the tile 64"</span> <span class="org-builtin">:group</span> '2048-faces<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">2048-face-128</span>  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:background</span> <span class="org-string">"dark red"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"white"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-doc">"Face for the tile 128"</span> <span class="org-builtin">:group</span> '2048-faces<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">2048-face-256</span>  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:background</span> <span class="org-string">"dark magenta"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"white"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-doc">"Face for the tile 256"</span> <span class="org-builtin">:group</span> '2048-faces<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">2048-face-512</span>  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:background</span> <span class="org-string">"magenta"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-doc">"Face for the tile 512"</span> <span class="org-builtin">:group</span> '2048-faces<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">2048-face-1024</span> '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:background</span> <span class="org-string">"gold"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-doc">"Face for the tile 1024"</span> <span class="org-builtin">:group</span> '2048-faces<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">2048-face-2048</span> '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:background</span> <span class="org-string">"yellow"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-doc">"Face for the tile 2048"</span> <span class="org-builtin">:group</span> '2048-faces<span class="org-rainbow-delimiters-depth-1">)</span>


  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">sacha/2048-set-font-size</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>text-scale-set 5<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>goto-char <span class="org-rainbow-delimiters-depth-3">(</span>point-min<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">2048-game</span>
    <span class="org-builtin">:config</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
     <span class="org-rainbow-delimiters-depth-3">(</span>add-hook '2048-mode-hook 'sacha/2048-set-font-size<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-unnumbered-204" class="outline-2">
<h2 id="unnumbered-204">Path</h2>
<div class="outline-text-2" id="text-unnumbered-204">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setenv <span class="org-string">"PATH"</span> <span class="org-rainbow-delimiters-depth-2">(</span>concat <span class="org-string">"\"c:/program files/postgresql/9.3/bin;\""</span> <span class="org-rainbow-delimiters-depth-3">(</span>getenv <span class="org-string">"PATH"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

<style type="text/css">
.back-to-top {
    position: fixed;
    bottom: 2em;
    right: 0px;
    text-decoration: none;
    color: #000000;
    background-color: rgba(235, 235, 235, 0.80);
    font-size: 12px;
    padding: 1em;
    display: none;
}

.back-to-top:hover {
    background-color: rgba(135, 135, 135, 0.50);
}
</style>

<div class="back-to-top">
<a href="#top">Back to top</a> | <a href="mailto:sacha@sachachua.com">E-mail me</a>
</div>

<script type="text/javascript">
    var offset = 220;
    var duration = 500;
    jQuery(window).scroll(function() {
        if (jQuery(this).scrollTop() > offset) {
            jQuery('.back-to-top').fadeIn(duration);
        } else {
            jQuery('.back-to-top').fadeOut(duration);
        }
    });
</script>
</div>
</body>
</html>
